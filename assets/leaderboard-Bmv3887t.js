import{s as e}from"./rolldown-runtime-Cb2Vi1zU.js";import{a as t,n}from"./vendor-react-Pim_c09P.js";import"./vendor-i18n-By0QLF_K.js";import{t as r}from"./Trans-NZtOUP8C.js";import{$ as i,$t as a,Ct as o,Ft as s,It as c,Kt as l,Mt as u,St as d,Xt as f,bt as p,cn as m,en as h,ft as g,ht as _,jt as ee,ln as v,lt as y,mt as te,nt as ne,qt as re,t as b,tn as ie,tt as ae,un as oe,vt as x,xt as se,yt as S,z as ce}from"./vendor-ui-OEpJDW5Y.js";import{S as le,a as C,b as w,d as ue,f as T,o as de,p as fe,s as E}from"./index-BwyMTywJ.js";import{t as pe}from"./AdaptiveTooltip-DKaRmHxe.js";import{t as D}from"./Footer-BMyClx4V.js";var O=e(t(),1),k=e(n(),1),A=({mapName:e,setMapName:t})=>{let{t:n}=le(),{seasons:r,artifactCounts:i,fetchArtifactCounts:a,loadingArtifactCounts:s,serverMatchings:c,loadingMatchings:l,region:u,setRegion:f}=de(),m={trigger:`!bg-character-card hover:!bg-character-card focus:!bg-character-card !transition-none border-crafting-border border-1 shadow-none rounded-sm group-data-[hover=true]:!bg-character-card group-data-[focus=true]:!bg-character-card group-data-[focus-visible=true]:!bg-character-card h-[36px] min-h-[36px]`,innerWrapper:`h-[36px] py-0`,popoverContent:`rounded-none p-0`},h={itemClasses:{base:`rounded-none`}},g=(0,O.useMemo)(()=>{let e=r.filter(e=>e.serverRegion.toLowerCase()===u.toLowerCase());if(e.length===0)return null;let t=Math.max(...e.map(e=>e.number));return e.find(e=>e.number===t)?.id||null},[r,u]);(0,O.useEffect)(()=>{g&&a(g,e)},[g,e,a]);let ee=(0,O.useMemo)(()=>{let e=[...i].sort((e,t)=>t.artifactCount-e.artifactCount||e.serverId-t.serverId),t=[],n=-1,r=0;for(let i=0;i<e.length;i++){let a=e[i];a.artifactCount!==n&&(r=i+1,n=a.artifactCount),t.push({...a,rank:r})}return t},[i]),v=e=>{let t=c.find(t=>t.server1.serverId===e||t.server2.serverId===e);if(t){let r=t.server1.serverId===e?t.server1:t.server2,i=r.raceId===1?n(`common:server.lightAbbr`):n(`common:server.darkAbbr`),a=r.serverId%1e3;return`${r.serverName}（${i}${a}）`}let r=n(e<2e3?`common:server.lightAbbr`:`common:server.darkAbbr`),i=e%1e3;return`${n(`common:server.server`)}（${r}${i}）`};return(0,k.jsxs)(`div`,{className:`flex flex-col gap-5`,children:[(0,k.jsxs)(`div`,{className:`flex flex-col gap-5 w-full`,children:[(0,k.jsx)(`div`,{className:`flex flex-col items-start gap-3 px-5 h-[62px] justify-center artifact-ratio-card-header shadow-[0px_3px_8px_0px_rgba(0,0,0,0.05)] rounded-[8px] border-1 border-solid w-full`,children:(0,k.jsx)(`p`,{className:`text-xl font-normal text-default-900`,children:n(`common:leaderboard.artifactRegionRanking`)})}),(0,k.jsxs)(`div`,{className:`flex gap-2 w-full `,children:[(0,k.jsxs)(te,{size:`sm`,selectedKeys:[u],onSelectionChange:e=>f(Array.from(e)[0]),className:`min-w-[100px] flex-1 sm:flex-none sm:w-[120px]`,disallowEmptySelection:!0,classNames:m,popoverProps:{radius:`none`},listboxProps:h,children:[(0,k.jsx)(_,{children:n(`common:server.tw`)},`tw`),(0,k.jsx)(_,{children:n(`common:server.kr`)},`kr`)]}),(0,k.jsxs)(te,{size:`sm`,selectedKeys:[e],onSelectionChange:e=>t(Array.from(e)[0]),className:`min-w-[150px] flex-[2] sm:flex-none sm:w-[200px]`,disallowEmptySelection:!0,classNames:m,popoverProps:{radius:`none`},listboxProps:h,children:[(0,k.jsx)(_,{children:n(`common:leaderboard.allMaps`,`全部地图`)},`ALL`),(0,k.jsx)(_,{children:n(`maps:${E.ABYSS_A}.description`)},E.ABYSS_A),(0,k.jsx)(_,{children:n(`maps:${E.ABYSS_B}.description`)},E.ABYSS_B)]})]})]}),(0,k.jsx)(`div`,{children:s||l||c.length===0?(0,k.jsx)(`div`,{className:`flex justify-center items-center py-10`,children:(0,k.jsx)(ie,{})}):(0,k.jsxs)(o,{"aria-label":`Artifact Region Ranking`,removeWrapper:!0,className:`min-w-full`,classNames:{table:`border-separate border-spacing-y-[10px] -mt-[10px]`,thead:`[&>tr[aria-hidden=true]]:hidden`,th:`bg-transparent text-default-900 font-normal text-base h-[36px] py-0`,td:`bg-character-equipment h-[44px] text-base font-normal text-default-900 border-y-1 border-crafting-border first:border-l-1 last:border-r-1 first:rounded-l-md last:rounded-r-md`},children:[(0,k.jsxs)(se,{children:[(0,k.jsx)(d,{children:n(`common:leaderboard.rank`)}),(0,k.jsx)(d,{children:n(`common:server.server`)}),(0,k.jsx)(d,{align:`center`,children:n(`common:leaderboard.artifactCount`)})]}),(0,k.jsx)(S,{emptyContent:n(`common:ui.noData`),items:ee,children:e=>(0,k.jsxs)(p,{children:[(0,k.jsx)(x,{children:(0,k.jsx)(`div`,{className:`flex items-center justify-center w-full h-full`,children:(0,k.jsx)(`div`,{className:`w-5 h-5 rounded-sm border-1 border-crafting-border rotate-45 flex items-center justify-center bg-transparent`,children:(0,k.jsx)(`span`,{className:`-rotate-45 text-sm font-normal text-default-900`,children:e.rank})})})}),(0,k.jsx)(x,{children:(0,k.jsx)(`span`,{children:v(e.serverId)})}),(0,k.jsx)(x,{align:`center`,className:`font-bold`,children:(0,k.jsx)(`span`,{children:e.artifactCount})})]},e.serverId)})]})})]})};function me(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;let n=document.implementation.createHTMLDocument(),r=n.createElement(`base`),i=n.createElement(`a`);return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const j=(()=>{let e=0,t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function M(e){let t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}var N=null;function P(e={}){return N||(e.includeStyleProperties?(N=e.includeStyleProperties,N):(N=M(window.getComputedStyle(document.documentElement)),N))}function F(e,t){let n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace(`px`,``)):0}function I(e){let t=F(e,`border-left-width`),n=F(e,`border-right-width`);return e.clientWidth+t+n}function he(e){let t=F(e,`border-top-width`),n=F(e,`border-bottom-width`);return e.clientHeight+t+n}function L(e,t={}){return{width:t.width||I(e),height:t.height||he(e)}}function R(){let e,t;try{t=process}catch{}let n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}var z=16384;function B(e){(e.width>z||e.height>z)&&(e.width>z&&e.height>z?e.width>e.height?(e.height*=z/e.width,e.width=z):(e.width*=z/e.height,e.height=z):e.width>z?(e.height*=z/e.width,e.width=z):(e.width*=z/e.height,e.height=z))}function V(e){return new Promise((t,n)=>{let r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin=`anonymous`,r.decoding=`async`,r.src=e})}async function H(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function U(e,t,n){let r=`http://www.w3.org/2000/svg`,i=document.createElementNS(r,`svg`),a=document.createElementNS(r,`foreignObject`);return i.setAttribute(`width`,`${t}`),i.setAttribute(`height`,`${n}`),i.setAttribute(`viewBox`,`0 0 ${t} ${n}`),a.setAttribute(`width`,`100%`),a.setAttribute(`height`,`100%`),a.setAttribute(`x`,`0`),a.setAttribute(`y`,`0`),a.setAttribute(`externalResourcesRequired`,`true`),i.appendChild(a),a.appendChild(e),H(i)}const W=(e,t)=>{if(e instanceof t)return!0;let n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||W(n,t)};function ge(e){let t=e.getPropertyValue(`content`);return`${e.cssText} content: '${t.replace(/'|"/g,``)}';`}function G(e,t){return P(t).map(t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?` !important`:``};`).join(` `)}function K(e,t,n,r){let i=`.${e}:${t}`,a=n.cssText?ge(n):G(n,r);return document.createTextNode(`${i}{${a}}`)}function q(e,t,n,r){let i=window.getComputedStyle(e,n),a=i.getPropertyValue(`content`);if(a===``||a===`none`)return;let o=j();try{t.className=`${t.className} ${o}`}catch{return}let s=document.createElement(`style`);s.appendChild(K(o,n,i,r)),t.appendChild(s)}function _e(e,t,n){q(e,t,`:before`,n),q(e,t,`:after`,n)}var ve=`application/font-woff`,ye=`image/jpeg`,J={woff:ve,woff2:ve,ttf:`application/font-truetype`,eot:`application/vnd.ms-fontobject`,png:`image/png`,jpg:ye,jpeg:ye,gif:`image/gif`,tiff:`image/tiff`,svg:`image/svg+xml`,webp:`image/webp`};function Y(e){let t=/\.([^./]*?)$/g.exec(e);return t?t[1]:``}function X(e){return J[Y(e).toLowerCase()]||``}function be(e){return e.split(/,/)[1]}function xe(e){return e.search(/^(data:)/)!==-1}function Se(e,t){return`data:${t};base64,${e}`}async function Ce(e,t,n){let r=await fetch(e,t);if(r.status===404)throw Error(`Resource "${r.url}" not found`);let i=await r.blob();return new Promise((e,t)=>{let a=new FileReader;a.onerror=t,a.onloadend=()=>{try{e(n({res:r,result:a.result}))}catch(e){t(e)}},a.readAsDataURL(i)})}var we={};function Te(e,t,n){let r=e.replace(/\?.*/,``);return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,``)),t?`[${t}]${r}`:r}async function Ee(e,t,n){let r=Te(e,t,n.includeQueryParams);if(we[r]!=null)return we[r];n.cacheBust&&(e+=(/\?/.test(e)?`&`:`?`)+new Date().getTime());let i;try{i=Se(await Ce(e,n.fetchRequestInit,({res:e,result:n})=>(t||=e.headers.get(`Content-Type`)||``,be(n))),t)}catch(t){i=n.imagePlaceholder||``;let r=`Failed to fetch resource: ${e}`;t&&(r=typeof t==`string`?t:t.message),r&&console.warn(r)}return we[r]=i,i}async function De(e){let t=e.toDataURL();return t===`data:,`?e.cloneNode(!1):V(t)}async function Oe(e,t){if(e.currentSrc){let t=document.createElement(`canvas`),n=t.getContext(`2d`);return t.width=e.clientWidth,t.height=e.clientHeight,n?.drawImage(e,0,0,t.width,t.height),V(t.toDataURL())}let n=e.poster;return V(await Ee(n,X(n),t))}async function ke(e,t){try{if(e?.contentDocument?.body)return await Z(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Ae(e,t){return W(e,HTMLCanvasElement)?De(e):W(e,HTMLVideoElement)?Oe(e,t):W(e,HTMLIFrameElement)?ke(e,t):e.cloneNode(Me(e))}var je=e=>e.tagName!=null&&e.tagName.toUpperCase()===`SLOT`,Me=e=>e.tagName!=null&&e.tagName.toUpperCase()===`SVG`;async function Ne(e,t,n){if(Me(t))return t;let r=[];return r=je(e)&&e.assignedNodes?M(e.assignedNodes()):W(e,HTMLIFrameElement)&&e.contentDocument?.body?M(e.contentDocument.body.childNodes):M((e.shadowRoot??e).childNodes),r.length===0||W(e,HTMLVideoElement)||await r.reduce((e,r)=>e.then(()=>Z(r,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}function Pe(e,t,n){let r=t.style;if(!r)return;let i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):P(n).forEach(n=>{let a=i.getPropertyValue(n);n===`font-size`&&a.endsWith(`px`)&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),W(e,HTMLIFrameElement)&&n===`display`&&a===`inline`&&(a=`block`),n===`d`&&t.getAttribute(`d`)&&(a=`path(${t.getAttribute(`d`)})`),r.setProperty(n,a,i.getPropertyPriority(n))})}function Fe(e,t){W(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),W(e,HTMLInputElement)&&t.setAttribute(`value`,e.value)}function Ie(e,t){if(W(e,HTMLSelectElement)){let n=t,r=Array.from(n.children).find(t=>e.value===t.getAttribute(`value`));r&&r.setAttribute(`selected`,``)}}function Le(e,t,n){return W(t,Element)&&(Pe(e,t,n),_e(e,t,n),Fe(e,t),Ie(e,t)),t}async function Re(e,t){let n=e.querySelectorAll?e.querySelectorAll(`use`):[];if(n.length===0)return e;let r={};for(let i=0;i<n.length;i++){let a=n[i].getAttribute(`xlink:href`);if(a){let n=e.querySelector(a),i=document.querySelector(a);!n&&i&&!r[a]&&(r[a]=await Z(i,t,!0))}}let i=Object.values(r);if(i.length){let t=`http://www.w3.org/1999/xhtml`,n=document.createElementNS(t,`svg`);n.setAttribute(`xmlns`,t),n.style.position=`absolute`,n.style.width=`0`,n.style.height=`0`,n.style.overflow=`hidden`,n.style.display=`none`;let r=document.createElementNS(t,`defs`);n.appendChild(r);for(let e=0;e<i.length;e++)r.appendChild(i[e]);e.appendChild(n)}return e}async function Z(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(e=>Ae(e,t)).then(n=>Ne(e,n,t)).then(n=>Le(e,n,t)).then(e=>Re(e,t))}var ze=/url\((['"]?)([^'"]+?)\1\)/g,Be=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ve=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function He(e){let t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,`\\$1`);return RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,`g`)}function Ue(e){let t=[];return e.replace(ze,(e,n,r)=>(t.push(r),e)),t.filter(e=>!xe(e))}async function We(e,t,n,r,i){try{let a=n?me(t,n):t,o=X(t),s;return s=i?Se(await i(a),o):await Ee(a,o,r),e.replace(He(t),`$1${s}$3`)}catch{}return e}function Ge(e,{preferredFontFormat:t}){return t?e.replace(Ve,e=>{for(;;){let[n,,r]=Be.exec(e)||[];if(!r)return``;if(r===t)return`src: ${n};`}}):e}function Ke(e){return e.search(ze)!==-1}async function qe(e,t,n){if(!Ke(e))return e;let r=Ge(e,n);return Ue(r).reduce((e,r)=>e.then(e=>We(e,r,t,n)),Promise.resolve(r))}async function Q(e,t,n){let r=t.style?.getPropertyValue(e);if(r){let i=await qe(r,null,n);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function Je(e,t){await Q(`background`,e,t)||await Q(`background-image`,e,t),await Q(`mask`,e,t)||await Q(`-webkit-mask`,e,t)||await Q(`mask-image`,e,t)||await Q(`-webkit-mask-image`,e,t)}async function Ye(e,t){let n=W(e,HTMLImageElement);if(!(n&&!xe(e.src))&&!(W(e,SVGImageElement)&&!xe(e.href.baseVal)))return;let r=n?e.src:e.href.baseVal,i=await Ee(r,X(r),t);await new Promise((r,a)=>{e.onload=r,e.onerror=t.onImageErrorHandler?(...e)=>{try{r(t.onImageErrorHandler(...e))}catch(e){a(e)}}:a;let o=e;o.decode&&=r,o.loading===`lazy`&&(o.loading=`eager`),n?(e.srcset=``,e.src=i):e.href.baseVal=i})}async function Xe(e,t){let n=M(e.childNodes).map(e=>Ze(e,t));await Promise.all(n).then(()=>e)}async function Ze(e,t){W(e,Element)&&(await Je(e,t),await Ye(e,t),await Xe(e,t))}function Qe(e,t){let{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);let r=t.style;return r!=null&&Object.keys(r).forEach(e=>{n[e]=r[e]}),e}var $e={};async function et(e){let t=$e[e];return t??(t={url:e,cssText:await(await fetch(e)).text()},$e[e]=t,t)}async function tt(e,t){let n=e.cssText,r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let a=i.replace(r,`$1`);return a.startsWith(`https://`)||(a=new URL(a,e.url).href),Ce(a,t.fetchRequestInit,({result:e})=>(n=n.replace(i,`url(${e})`),[i,e]))});return Promise.all(i).then(()=>n)}function nt(e){if(e==null)return[];let t=[],n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,``),r=RegExp(`((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})`,`gi`);for(;;){let e=r.exec(n);if(e===null)break;t.push(e[0])}n=n.replace(r,``);let i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a=RegExp(`((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})`,`gi`);for(;;){let e=i.exec(n);if(e===null){if(e=a.exec(n),e===null)break;i.lastIndex=a.lastIndex}else a.lastIndex=i.lastIndex;t.push(e[0])}return t}async function rt(e,t){let n=[],r=[];return e.forEach(n=>{if(`cssRules`in n)try{M(n.cssRules||[]).forEach((e,i)=>{if(e.type===CSSRule.IMPORT_RULE){let a=i+1,o=e.href,s=et(o).then(e=>tt(e,t)).then(e=>nt(e).forEach(e=>{try{n.insertRule(e,e.startsWith(`@import`)?a+=1:n.cssRules.length)}catch(t){console.error(`Error inserting rule from remote css`,{rule:e,error:t})}})).catch(e=>{console.error(`Error loading remote css`,e.toString())});r.push(s)}})}catch(i){let a=e.find(e=>e.href==null)||document.styleSheets[0];n.href!=null&&r.push(et(n.href).then(e=>tt(e,t)).then(e=>nt(e).forEach(e=>{a.insertRule(e,a.cssRules.length)})).catch(e=>{console.error(`Error loading remote stylesheet`,e)})),console.error(`Error inlining remote css file`,i)}}),Promise.all(r).then(()=>(e.forEach(e=>{if(`cssRules`in e)try{M(e.cssRules||[]).forEach(e=>{n.push(e)})}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}}),n))}function it(e){return e.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Ke(e.style.getPropertyValue(`src`)))}async function at(e,t){if(e.ownerDocument==null)throw Error(`Provided element is not within a Document`);return it(await rt(M(e.ownerDocument.styleSheets),t))}function ot(e){return e.trim().replace(/["']/g,``)}function st(e){let t=new Set;function n(e){(e.style.fontFamily||getComputedStyle(e).fontFamily).split(`,`).forEach(e=>{t.add(ot(e))}),Array.from(e.children).forEach(e=>{e instanceof HTMLElement&&n(e)})}return n(e),t}async function ct(e,t){let n=await at(e,t),r=st(e);return(await Promise.all(n.filter(e=>r.has(ot(e.style.fontFamily))).map(e=>{let n=e.parentStyleSheet?e.parentStyleSheet.href:null;return qe(e.cssText,n,t)}))).join(`
`)}async function lt(e,t){let n=t.fontEmbedCSS==null?t.skipFonts?null:await ct(e,t):t.fontEmbedCSS;if(n){let t=document.createElement(`style`),r=document.createTextNode(n);t.appendChild(r),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function ut(e,t={}){let{width:n,height:r}=L(e,t),i=await Z(e,t,!0);return await lt(i,t),await Ze(i,t),Qe(i,t),await U(i,n,r)}async function dt(e,t={}){let{width:n,height:r}=L(e,t),i=await V(await ut(e,t)),a=document.createElement(`canvas`),o=a.getContext(`2d`),s=t.pixelRatio||R(),c=t.canvasWidth||n,l=t.canvasHeight||r;return a.width=c*s,a.height=l*s,t.skipAutoScale||B(a),a.style.width=`${c}`,a.style.height=`${l}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,a.width,a.height)),o.drawImage(i,0,0,a.width,a.height),a}async function ft(e,t={}){return(await dt(e,t)).toDataURL(`image/jpeg`,t.quality||1)}var pt=[2,4,6],mt=13;const ht=e=>{let t=new Date(e),n=1/0,r=e;for(let e of pt){let i=new Date(t);i.setUTCHours(mt,0,0,0);let a=(e-t.getUTCDay()+7)%7;a===0&&t.getTime()>=i.getTime()&&(a=7),i.setUTCDate(t.getUTCDate()+a);let o=i.getTime()-t.getTime();o<n&&(n=o,r=i.getTime())}return r},$=e=>{let t=new Date(e),n=-1/0,r=e;for(let e of pt){let i=new Date(t);i.setUTCHours(mt,0,0,0);let a=(t.getUTCDay()-e+7)%7;a===0&&t.getTime()<i.getTime()&&(a=7),i.setUTCDate(t.getUTCDate()-a);let o=i.getTime();o>n&&(n=o,r=o)}return r};var gt=({matching:e,artifactsA:t,artifactsB:n,mapNames:i,artifactStates:a,artifactStateMap:o,isAutoUpdate:s,selectedDate:c,starredServerIds:l,toggleStar:u,t:d,icons:f,vsImage:p})=>{let m=(e,t)=>{let n=l.includes(e.serverId),r=d(t?`common:server.lightAbbr`:`common:server.darkAbbr`),i=t?`linear-gradient(135deg, #DBEDFF 0%, #F3FBFF 100%)`:`linear-gradient(225deg, #EFE5FF 0%, #F3FBFF 100%)`,a=t?`text-primary`:`text-secondary`;return(0,k.jsxs)(`div`,{className:`flex-1 h-[38px] flex items-center justify-center rounded-md relative`,style:{background:i},children:[(0,k.jsx)(h,{isIconOnly:!0,size:`sm`,variant:`light`,className:`absolute ${t?`left-1`:`right-1`} z-10 text-default-400 hover:text-star data-[starred=true]:text-star`,"data-starred":n,onClick:t=>{t.stopPropagation(),u(e.serverId)},children:(0,k.jsx)(y,{icon:n?ne:b,className:`text-base`})}),(0,k.jsx)(`span`,{className:`text-lg font-bold ${a}`,children:e.serverName}),(0,k.jsxs)(`span`,{className:`text-sm font-normal text-default-800`,children:[`（`,r,e.serverId%1e3,`）`]})]})},g=(t,n)=>(0,k.jsxs)(`div`,{className:`flex-1 flex items-center justify-center gap-2`,children:[(0,k.jsx)(`span`,{className:`text-sm text-foreground max-w-[40px] sm:max-w-none whitespace-normal`,children:d(`maps:${n}.description`)}),(0,k.jsx)(`div`,{className:`flex gap-1`,children:t.map(t=>{let r=d(`markers/${n}:${t.markerId}.name`,t.marker.name),i=o[e.id]?.[t.id],a=i?.state,l=!!(i?.contributors&&i.contributors.length>0),u=!1;i?.recordTime&&l?new Date(i.recordTime).getTime()<$(s?Date.now():c.toDate().getTime())&&(u=!0):u=!0;let p=f.neutral;return u||(a===1?p=f.light:a===2&&(p=f.dark)),(0,k.jsx)(pe,{content:r,children:(0,k.jsx)(`img`,{src:p,alt:r,className:`w-7 h-7 sm:w-12 sm:h-12`})},t.id)})})]}),_=e=>{let t=a.filter(t=>t.mapName===e);return(0,k.jsx)(`div`,{className:`flex-1 flex items-center h-full bg-[rgba(82,82,82,0.04)]`,children:(()=>{let e=t[0],n=!!(e?.contributors&&e.contributors.length>0),i=!1;return e?.recordTime&&n?new Date(e.recordTime).getTime()<$(s?Date.now():c.toDate().getTime())&&(i=!0):i=!0,i?(0,k.jsx)(`div`,{className:`flex justify-center px-2 w-full`,children:(0,k.jsx)(`span`,{className:`text-primary hover:underline text-sm font-bold cursor-pointer`,children:d(`common:leaderboard.submitData`)})}):n?(0,k.jsx)(`div`,{className:`flex items-center justify-start px-2 w-full`,onClick:e=>e.stopPropagation(),children:(0,k.jsx)(`span`,{className:`text-xs text-default-800`,children:(0,k.jsx)(r,{t:d,i18nKey:`common:leaderboard.providedBy`,values:{username:e.contributors[0].user.name},components:{emph:(0,k.jsx)(`span`,{className:`text-primary font-medium`})}})})}):null})()})};return(0,k.jsxs)(`div`,{className:`flex flex-col w-full gap-1`,children:[(0,k.jsxs)(`div`,{className:`h-12 flex items-center justify-between w-full gap-2.5`,children:[m(e.server1,!0),(0,k.jsx)(`div`,{className:`w-12 h-12 flex items-center justify-center shrink-0`,children:(0,k.jsx)(`img`,{src:p,alt:`VS`,className:`w-full h-full object-contain`})}),m(e.server2,!1)]}),(0,k.jsxs)(`div`,{className:`flex items-center justify-between w-full h-[48px] my-[10px]`,children:[g(t,i.A),(0,k.jsx)(`div`,{className:`flex flex-col items-center px-2 h-full justify-center`,children:(0,k.jsx)(`div`,{className:`h-full w-px bg-default-500`})}),g(n,i.B)]}),(0,k.jsxs)(`div`,{className:`flex items-center justify-between w-full h-[28px] gap-1`,children:[_(i.A),_(i.B)]})]})},_t=O.forwardRef(({server:e=`Unknown Server`,matchings:t=[],artifactsA:n=[],artifactsB:r=[],artifactStateMap:i={},isAutoUpdate:a=!0,selectedDate:o,icons:s={neutral:``,light:``,dark:``},isMobile:c=!1},l)=>{let{t:u}=le([`common`,`markers/AbyssA`,`markers/AbyssB`,`maps`]),d=(e,t)=>{let n=i[e.id]?.[t.id],r=n?.state,c=!!(n?.contributors&&n.contributors.length>0),l=!1;if(n?.recordTime&&c?new Date(n.recordTime).getTime()<$(a?Date.now():o?.toDate?.().getTime()||Date.now())&&(l=!0):l=!0,!l){if(r===1)return s.light;if(r===2)return s.dark}return s.neutral},f=(e,t)=>{let n=u(t?`common:server.lightAbbr`:`common:server.darkAbbr`);return(0,k.jsx)(`div`,{className:`w-full ${c?`h-12`:`h-[42px]`} flex items-center justify-center rounded-lg border border-white/20 relative bg-white/10`,children:(0,k.jsxs)(`div`,{className:`flex items-center justify-center w-full px-1`,children:[(0,k.jsx)(`span`,{className:`${c?`text-[28px]`:`text-lg`} font-bold bg-clip-text text-transparent leading-none`,style:{backgroundImage:t?`linear-gradient(90deg, #F9FCFF 0%, #58ACFF 100%)`:`linear-gradient(90deg, #FFFFFF 0%, #A468FF 100%)`},children:e.serverName}),(0,k.jsxs)(`span`,{className:`${c?`text-xl`:`text-sm`} font-normal text-white whitespace-nowrap`,children:[`（`,n,e.serverId%1e3,`）`]})]})})},p=(e,t,n)=>(0,k.jsxs)(`div`,{className:`flex items-center justify-center ${c?`h-12`:`h-9`} gap-1 w-full`,children:[(0,k.jsx)(`span`,{className:`${c?`text-[28px]`:`text-sm`} text-white/80 whitespace-nowrap leading-none`,children:u(`maps:${n}.description`)}),(0,k.jsx)(`div`,{className:`flex gap-0.5`,children:t.map(t=>(0,k.jsx)(`img`,{src:d(e,t),alt:u(`markers/${n}:${t.markerId}.name`,t.marker.name),className:`${c?`w-12 h-12`:`w-9 h-9`} object-contain`},t.id))})]}),m=()=>(0,k.jsxs)(`div`,{className:`${c?`h-12`:`h-9`} flex items-center shrink-0 ${c?`rounded-t-lg`:``}`,children:[(0,k.jsx)(`div`,{className:`flex-1 flex items-center justify-center`,children:(0,k.jsx)(`span`,{className:`${c?`text-[36px]`:`text-base`} font-normal text-white`,children:u(`common:race.light`)})}),(0,k.jsx)(`div`,{className:`flex-1 flex items-center justify-center`,children:(0,k.jsx)(`span`,{className:`${c?`text-[36px]`:`text-base`} font-normal text-white`,children:u(`common:race.dark`)})})]}),h=(e=>`${e.getFullYear()}年${e.getMonth()+1}月${e.getDate()}日${String(e.getHours()).padStart(2,`0`)}:${String(e.getMinutes()).padStart(2,`0`)} GMT+8`)(o?o.toDate():new Date);return(0,k.jsxs)(`div`,{ref:l,className:`relative flex flex-col overflow-hidden ${c?`w-[750px]`:`w-[1680px]`} h-fit bg-[#4C2C7E] ${c?`p-[25px]`:`p-5`} gap-2.5`,children:[(0,k.jsx)(`img`,{src:w(c?`/images/Leaderboards/ExportBackgroundMobile.webp`:`/images/Leaderboards/ExportBackground.webp`),alt:`Background`,className:`absolute inset-x-0 top-0 w-full h-auto object-contain pointer-events-none`}),(0,k.jsx)(`div`,{className:`relative z-10 flex ${c?`flex-col gap-10 h-auto pb-2.5`:`items-center gap-6 h-[110px] px-2.5 pb-1`} shrink-0`,children:c?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(`div`,{className:`flex items-center gap-4 h-[120px]`,children:[(0,k.jsx)(`img`,{src:w(`/images/Logo.webp`),alt:`Logo`,className:`h-[120px] w-auto object-contain`}),(0,k.jsx)(`img`,{src:w(`/images/GroupLogoDark.webp`),alt:`Group Logo`,className:`h-[76px] w-auto object-contain`})]}),(0,k.jsxs)(`div`,{className:`flex flex-col gap-[20px]`,children:[(0,k.jsx)(`div`,{className:`text-[36px] font-bold text-white leading-none`,children:`实时神器占比`}),(0,k.jsxs)(`div`,{className:`text-[28px] text-white/80 leading-tight bg-black/20 rounded-lg px-2 h-[48px] flex items-center w-fit`,children:[e,` | `,h]})]})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(`img`,{src:w(`/images/Logo.webp`),alt:`Logo`,className:`h-full w-auto object-contain`}),(0,k.jsx)(`img`,{src:w(`/images/GroupLogoDark.webp`),alt:`Group Logo`,className:`h-[69px] w-auto object-contain`}),(0,k.jsxs)(`div`,{className:`flex flex-col justify-center gap-1.5`,children:[(0,k.jsx)(`div`,{className:`text-3xl font-bold text-white leading-tight`,children:`实时神器占比`}),(0,k.jsxs)(`div`,{className:`text-sm text-white/80 leading-tight bg-black/20 rounded-lg px-2 py-0.5 w-fit`,children:[e,` | `,h]})]})]})}),(0,k.jsx)(`div`,{className:`relative z-10 w-full h-fit bg-black/40 p-2.5 rounded-2xl`,children:(0,k.jsxs)(`div`,{className:`flex flex-row gap-2.5`,children:[(0,k.jsxs)(`div`,{className:`flex-1 min-h-[56px] bg-white/10 border border-white/20 rounded-lg p-2.5 flex flex-col items-center justify-center gap-2`,children:[(0,k.jsx)(`span`,{className:`${c?`text-[32px]`:`text-lg`} font-bold text-white/90`,children:u(`maps:${E.ABYSS_A}.description`)}),(0,k.jsx)(`div`,{className:`flex ${c?`flex-col gap-0`:`flex-row gap-4 flex-wrap`} justify-center`,children:n.map(e=>(0,k.jsxs)(`div`,{className:`flex items-center gap-2 ${c?`h-12`:``}`,children:[(0,k.jsx)(`img`,{src:s.neutral,alt:``,className:`${c?`w-12 h-12`:`w-9 h-9`} object-contain`}),(0,k.jsx)(`span`,{className:`${c?`text-2xl`:`text-sm`} font-normal text-white/90`,children:u(`markers/AbyssA:${e.markerId}.name`,e.marker.name)})]},e.id))})]}),(0,k.jsxs)(`div`,{className:`flex-1 min-h-[56px] bg-white/10 border border-white/20 rounded-lg p-2.5 flex flex-col items-center justify-center gap-2`,children:[(0,k.jsx)(`span`,{className:`${c?`text-[32px]`:`text-lg`} font-bold text-white/90`,children:u(`maps:${E.ABYSS_B}.description`)}),(0,k.jsx)(`div`,{className:`flex ${c?`flex-col gap-0`:`flex-row gap-4 flex-wrap`} justify-center`,children:r.map(e=>(0,k.jsxs)(`div`,{className:`flex items-center gap-2 ${c?`h-12`:``}`,children:[(0,k.jsx)(`img`,{src:s.neutral,alt:``,className:`${c?`w-12 h-12`:`w-9 h-9`} object-contain`}),(0,k.jsx)(`span`,{className:`${c?`text-2xl`:`text-sm`} font-normal text-white/90`,children:u(`markers/AbyssB:${e.markerId}.name`,e.marker.name)})]},e.id))})]})]})}),(0,k.jsx)(`div`,{className:`relative z-10 w-full h-fit bg-black/40 p-2.5 rounded-2xl`,children:(0,k.jsx)(`div`,{className:`grid ${c?`grid-cols-1`:`grid-cols-3`} gap-2.5`,children:c?(0,k.jsxs)(`div`,{className:`flex flex-col gap-2.5`,children:[(0,k.jsx)(m,{}),t.map(e=>(0,k.jsxs)(`div`,{className:`bg-white/10 border border-white/20 p-2.5 rounded-lg flex flex-col items-stretch h-fit gap-2.5`,children:[(0,k.jsxs)(`div`,{className:`flex items-center justify-between h-12`,children:[(0,k.jsx)(`div`,{className:`flex-1`,children:f(e.server1,!0)}),(0,k.jsx)(`div`,{className:`flex items-center px-2`,children:(0,k.jsx)(`img`,{src:w(`/images/Leaderboards/VS.webp`),alt:`VS`,className:`w-12 h-12 object-contain`})}),(0,k.jsx)(`div`,{className:`flex-1`,children:f(e.server2,!1)})]}),(0,k.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,k.jsx)(`div`,{className:`flex-1`,children:p(e,n,E.ABYSS_A)}),(0,k.jsx)(`div`,{className:`flex flex-col items-center px-2`,children:(0,k.jsx)(`div`,{className:`w-px ${c?`h-12`:`h-5`} bg-white/20`})}),(0,k.jsx)(`div`,{className:`flex-1`,children:p(e,r,E.ABYSS_B)})]})]},e.id))]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(`div`,{className:`flex flex-col gap-2.5`,children:(0,k.jsx)(m,{})}),(0,k.jsx)(`div`,{className:`flex flex-col gap-2.5`,children:(0,k.jsx)(m,{})}),(0,k.jsx)(`div`,{className:`flex flex-col gap-2.5`,children:(0,k.jsx)(m,{})}),t.map(e=>(0,k.jsx)(`div`,{className:`flex flex-col`,children:(0,k.jsxs)(`div`,{className:`bg-white/10 border border-white/20 px-2.5 py-1 rounded-lg flex flex-col items-stretch h-fit`,children:[(0,k.jsxs)(`div`,{className:`flex items-center justify-between h-12`,children:[(0,k.jsx)(`div`,{className:`flex-1`,children:f(e.server1,!0)}),(0,k.jsx)(`div`,{className:`flex items-center px-2`,children:(0,k.jsx)(`img`,{src:w(`/images/Leaderboards/VS.webp`),alt:`VS`,className:`w-12 h-12 object-contain`})}),(0,k.jsx)(`div`,{className:`flex-1`,children:f(e.server2,!1)})]}),(0,k.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,k.jsx)(`div`,{className:`flex-1`,children:p(e,n,E.ABYSS_A)}),(0,k.jsx)(`div`,{className:`flex flex-col items-center px-2`,children:(0,k.jsx)(`div`,{className:`w-px h-5 bg-white/20`})}),(0,k.jsx)(`div`,{className:`flex-1`,children:p(e,r,E.ABYSS_B)})]})]})},e.id))]})})}),c?(0,k.jsxs)(`div`,{className:`relative z-10 mt-2.5 flex flex-col items-center gap-2.5 text-white text-[28px]`,children:[(0,k.jsx)(`span`,{children:`神器交流群：1073046733`}),(0,k.jsxs)(`div`,{className:`flex items-center gap-5`,children:[(0,k.jsx)(`span`,{children:`https://tc-imba.com`}),(0,k.jsx)(`div`,{className:`w-px h-[28px] bg-white`}),(0,k.jsx)(`span`,{children:`© 2025-2026 星狐攻略组`})]})]}):(0,k.jsxs)(`div`,{className:`relative z-10 mt-2.5 flex justify-center items-center gap-5 text-white text-sm`,children:[(0,k.jsx)(`span`,{children:`https://tc-imba.com`}),(0,k.jsx)(`div`,{className:`w-px h-4 bg-white`}),(0,k.jsx)(`span`,{children:`© 2025-2026 星狐攻略组`}),(0,k.jsx)(`div`,{className:`w-px h-4 bg-white`}),(0,k.jsx)(`span`,{children:`神器交流群：1073046733`})]})]})}),vt=O.forwardRef(({children:e,baseWidth:t=1680,baseHeight:n=986,padding:r=40,isMobile:i=!1},a)=>{let o=(0,O.useRef)(null),[s,c]=(0,O.useState)(1);return(0,O.useEffect)(()=>{let e=()=>{if(o.current){let e=o.current.offsetWidth-r*2,a=o.current.offsetHeight-r*2,s=e/t,l=a/n,u;u=i&&e<t?s:Math.min(s,l),c(u)}};return e(),window.addEventListener(`resize`,e),()=>window.removeEventListener(`resize`,e)},[t,n,r,i]),(0,k.jsx)(`div`,{ref:o,className:`w-full h-full overflow-x-auto overflow-y-auto no-scrollbar ${i?`flex flex-col items-center`:`flex items-center justify-center overflow-hidden`}`,children:(0,k.jsx)(`div`,{ref:a,style:{width:`${t}px`,height:`${n}px`,transform:`scale(${s})`,transformOrigin:i?`top center`:`center center`,flexShrink:0,marginTop:i?`${r}px`:void 0,marginBottom:i?`${r}px`:void 0},children:e})})}),yt=()=>{let e=fe(),t=[E.ABYSS_A,E.ABYSS_B],n=`starred_artifact_servers`,{t:r,i18n:o}=le([...t.map(e=>`markers/${e}`),`common`]),{seasons:d,serverMatchings:p,loadingMatchings:ne,artifactsByMap:b,loadingArtifacts:ie,artifactStates:x,fetchServerMatchings:se,fetchArtifactStates:S,region:C,setRegion:ue}=de(),[T,D]=(0,O.useState)(m(v())),[A,me]=(0,O.useState)(!0),[j,M]=(0,O.useState)(!0),[N,P]=(0,O.useState)(()=>{let e=localStorage.getItem(n);return e?JSON.parse(e):[]}),F=(0,O.useCallback)(e=>{P(t=>{let r=t.includes(e)?t.filter(t=>t!==e):[...t,e];return localStorage.setItem(n,JSON.stringify(r)),r})},[]),[I,he]=(0,O.useState)(``);(0,O.useEffect)(()=>{let e=()=>{let e=new Date,t=ht(e.getTime()),n=new Date(t);if(n){let t=n.getTime()-e.getTime(),i=Math.floor(t/(1e3*60*60)),a=Math.floor(t%(1e3*60*60)/(1e3*60)),o=Math.floor(t%(1e3*60)/1e3);he(r(`common:leaderboard.refreshIn`,{time:`${String(i).padStart(2,`0`)}:${String(a).padStart(2,`0`)}:${String(o).padStart(2,`0`)}`}))}};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[r]);let L=(0,O.useMemo)(()=>[...p].sort((e,t)=>{let n=N.includes(e.server1.serverId)||N.includes(e.server2.serverId),r=N.includes(t.server1.serverId)||N.includes(t.server2.serverId);return n&&!r?-1:!n&&r?1:0}),[p,N]);(0,O.useEffect)(()=>{if(!A)return;let e=setInterval(()=>{D(m(v()))},1e3);return()=>clearInterval(e)},[A]);let R=w(`UI/Resource/Texture/Icon/UT_Marker_AbyssArtifact_Neutral.webp`),z=w(`UI/Resource/Texture/Icon/UT_Marker_AbyssArtifact_Light.webp`),B=w(`UI/Resource/Texture/Icon/UT_Marker_AbyssArtifact_Dark.webp`),V=w(`images/Leaderboards/VS.webp`),H=(0,O.useMemo)(()=>{let e=d.filter(e=>e.serverRegion.toLowerCase()===C.toLowerCase());if(e.length===0)return null;let t=Math.max(...e.map(e=>e.number));return e.find(e=>e.number===t)?.id||null},[C,d]),U=(0,O.useMemo)(()=>{let e,t=!0;return n=>{if(e&&clearTimeout(e),t){S(n),t=!1;return}e=setTimeout(()=>{S(n)},5e3)}},[S]);(0,O.useEffect)(()=>{H&&(se(H),A?U(H):S(H,T.toDate()))},[H,A,A?null:T,se,U,S]);let W=(0,O.useMemo)(()=>{let e={};return x.forEach(t=>{e[t.serverMatchingId]||(e[t.serverMatchingId]={}),t.states.forEach(n=>{e[t.serverMatchingId][n.abyssArtifactId]={state:n.state,recordTime:t.recordTime,contributors:t.contributors||[]}})}),e},[x]),ge=(e,t)=>{if(!e||!t)return r(`common:leaderboard.inContention`);let n=new Date(e).getTime(),i=A?Date.now():T.toDate().getTime();if(n<$(i))return r(`common:leaderboard.inContention`);let a=ht(i)-i,o=Math.floor(a/(1e3*60*60)),s=Math.floor(a%(1e3*60*60)/(1e3*60)),c=Math.floor(a%(1e3*60)/1e3);return`${String(o).padStart(2,`0`)}:${String(s).padStart(2,`0`)}:${String(c).padStart(2,`0`)}`},{artifactsA:G,artifactsB:K}=(0,O.useMemo)(()=>({artifactsA:(b[E.ABYSS_A]||[]).sort((e,t)=>e.order-t.order),artifactsB:(b[E.ABYSS_B]||[]).sort((e,t)=>e.order-t.order)}),[b]),{isOpen:q,onOpen:_e,onOpenChange:ve}=ee(),ye=(0,O.useRef)(null),J=(0,O.useRef)(null),[Y,X]=(0,O.useState)(!1),be=(0,O.useCallback)(async()=>{if(J.current!==null){X(!0);try{let e=T.toDate(),t=-e.getTimezoneOffset(),n=Math.floor(Math.abs(t)/60),r=`GMT${t>=0?`+`:`-`}${n}`,i=`${e.getFullYear()}_${String(e.getMonth()+1).padStart(2,`0`)}_${String(e.getDate()).padStart(2,`0`)}_${String(e.getHours()).padStart(2,`0`)}_${String(e.getMinutes()).padStart(2,`0`)}_${String(e.getSeconds()).padStart(2,`0`)}_${r}`,a=await ft(J.current,{cacheBust:!0,pixelRatio:2,quality:.95,filter:e=>!(e.tagName===`LINK`&&e.rel===`stylesheet`&&e.href.includes(`fonts.googleapis.cn`))}),o=document.createElement(`a`);o.download=`artifact-${C}-${i}.jpg`,o.href=a,o.click()}catch(e){console.error(`Failed to download image`,e)}finally{X(!1)}}},[C,T]);return(0,k.jsxs)(`div`,{className:`flex flex-col gap-5`,children:[(0,k.jsxs)(`div`,{className:`flex flex-col gap-5 w-full`,children:[(0,k.jsx)(`div`,{className:`flex flex-col items-start gap-3 px-5 h-[62px] justify-center artifact-ratio-card-header shadow-[0px_3px_8px_0px_rgba(0,0,0,0.05)] rounded-[8px] border-1 border-solid`,children:(0,k.jsxs)(`div`,{className:`flex items-center gap-2 justify-between w-full`,children:[(0,k.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,k.jsx)(`p`,{className:`text-xl font-normal text-default-900`,children:r(`common:leaderboard.realtimeArtifactRatio`)}),I&&(0,k.jsx)(`span`,{className:`text-base font-mono font-normal text-primary`,children:I})]}),(0,k.jsx)(pe,{content:r(`common:leaderboard.share`,`分享`),children:(0,k.jsx)(h,{isIconOnly:!0,size:`lg`,variant:`light`,onPress:_e,className:`text-primary`,children:(0,k.jsx)(y,{icon:ae})})})]})}),(0,k.jsxs)(`div`,{className:`flex gap-2 w-full`,children:[(0,k.jsxs)(te,{size:`sm`,selectedKeys:[C],onSelectionChange:e=>ue(Array.from(e)[0]),className:`min-w-[100px] flex-1 sm:flex-none sm:w-[120px]`,disallowEmptySelection:!0,classNames:{trigger:`!bg-character-card hover:!bg-character-card focus:!bg-character-card !transition-none border-crafting-border border-1 shadow-none rounded-sm group-data-[hover=true]:!bg-character-card group-data-[focus=true]:!bg-character-card group-data-[focus-visible=true]:!bg-character-card h-[36px] min-h-[36px]`,innerWrapper:`h-[36px] py-0`,popoverContent:`rounded-none p-0`},popoverProps:{radius:`none`},listboxProps:{itemClasses:{base:`rounded-none`}},children:[(0,k.jsx)(_,{children:r(`common:server.tw`)},`tw`),(0,k.jsx)(_,{children:r(`common:server.kr`)},`kr`)]}),(0,k.jsx)(oe,{locale:o.language,children:(0,k.jsxs)(`div`,{className:`relative flex-[2] sm:flex-none sm:w-[280px]`,children:[(0,k.jsx)(g,{className:`w-full`,hideTimeZone:!0,showMonthAndYearPickers:!0,value:T,onChange:e=>{e&&(D(e),me(!1))},classNames:{inputWrapper:`!bg-character-card hover:!bg-character-card focus:!bg-character-card !transition-none border-crafting-border border-1 shadow-none rounded-sm group-data-[hover=true]:!bg-character-card group-data-[focus=true]:!bg-character-card group-data-[focus-visible=true]:!bg-character-card h-[36px] min-h-[36px]`,popoverContent:`rounded-none p-0`,segment:`text-foreground`},granularity:`second`}),!A&&(0,k.jsx)(pe,{content:r(`common:leaderboard.resetToNow`,`重置到当前时间`),children:(0,k.jsx)(h,{size:`sm`,variant:`flat`,isIconOnly:!0,className:`absolute right-10 top-1/2 -translate-y-1/2 z-20 h-6 w-6 min-w-0 bg-transparent`,onClick:()=>{me(!0),D(m(v()))},children:(0,k.jsx)(y,{icon:i,className:`text-xs`})})})]})})]})]}),ne||ie?(0,k.jsx)(`p`,{className:`text-center py-4`,children:r(`common:ui.loading`)}):(0,k.jsxs)(`div`,{className:`flex flex-col gap-2.5`,children:[(0,k.jsxs)(`div`,{className:`flex items-center justify-between h-9`,children:[(0,k.jsx)(`div`,{className:`flex-1 flex justify-center`,children:(0,k.jsx)(`span`,{className:`font-normal text-default-900`,children:r(`common:race.light`,`天族`)})}),(0,k.jsx)(`div`,{className:`flex-1 flex justify-center`,children:(0,k.jsx)(`span`,{className:`font-normal text-default-900`,children:r(`common:race.dark`,`魔族`)})})]}),L.map(t=>(0,k.jsx)(f,{isPressable:!0,onClick:()=>e({to:`/leaderboard/artifacts/${t.id}`}),className:`bg-character-equipment shadow-none border-1 ${N.includes(t.server1.serverId)||N.includes(t.server2.serverId)?`border-primary`:`border-crafting-border`} p-2.5 relative group`,children:(0,k.jsx)(a,{className:`p-0`,children:(0,k.jsx)(gt,{matching:t,artifactsA:G,artifactsB:K,mapNames:{A:E.ABYSS_A,B:E.ABYSS_B},artifactStates:x.filter(e=>e.serverMatchingId===t.id),artifactStateMap:W,isAutoUpdate:A,selectedDate:T,starredServerIds:N,toggleStar:F,formatCountdown:ge,t:r,icons:{neutral:R,light:z,dark:B},vsImage:V})})},t.id))]}),(0,k.jsx)(u,{isOpen:q,onOpenChange:ve,size:`full`,scrollBehavior:`inside`,hideCloseButton:!0,isDismissable:!1,children:(0,k.jsx)(s,{className:`bg-transparent shadow-none`,children:e=>(0,k.jsxs)(c,{className:`p-0 flex items-center justify-center relative`,children:[(0,k.jsxs)(`div`,{className:`absolute top-5 right-5 z-50 flex gap-2`,children:[(0,k.jsx)(`div`,{className:`flex items-center bg-black/50 hover:bg-black/70 rounded-full px-4 h-12 transition-colors`,children:(0,k.jsx)(re,{size:`sm`,isSelected:j,onValueChange:M,classNames:{label:`text-white text-sm font-medium ml-2`},children:j?`竖版`:`横版`})}),(0,k.jsxs)(`div`,{className:`relative flex items-center justify-center`,children:[Y&&(0,k.jsx)(l,{size:`lg`,"aria-label":`Downloading...`,classNames:{base:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0`,svg:`w-14 h-14 block`,indicator:`stroke-primary`,track:`stroke-white/10`}}),(0,k.jsx)(h,{isIconOnly:!0,variant:`flat`,className:`bg-black/50 hover:bg-black/70 text-white min-w-0 w-12 h-12 rounded-full z-10`,onPress:()=>{be()},isLoading:Y,children:!Y&&(0,k.jsx)(y,{icon:ce,className:`text-xl`})})]}),(0,k.jsx)(h,{isIconOnly:!0,variant:`flat`,className:`bg-black/50 hover:bg-black/70 text-white min-w-0 w-12 h-12 rounded-full`,onPress:e,children:(0,k.jsx)(`span`,{className:`text-2xl`,children:`×`})})]}),(0,k.jsx)(vt,{ref:ye,baseWidth:j?750:1680,isMobile:j,children:(0,k.jsx)(_t,{ref:J,server:r(`common:server.${C}`),time:T.toDate().toLocaleString(),matchings:L,artifactsA:G,artifactsB:K,artifactStateMap:W,isAutoUpdate:A,selectedDate:T,icons:{neutral:R,light:z,dark:B},isMobile:j})})]})})})]})};function bt(){let[e,t]=(0,O.useState)(`ALL`);return(0,k.jsx)(`div`,{className:`h-full overflow-y-auto flex flex-col bg-leaderboard-page`,children:ue().pathname.includes(`/artifacts/`)?(0,k.jsx)(T,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(`div`,{className:`flex-1 flex flex-col items-center p-4`,children:(0,k.jsx)(`div`,{className:`w-full max-w-[1074px] flex flex-col gap-4`,children:(0,k.jsxs)(`div`,{className:`flex flex-col-reverse lg:flex-row justify-center gap-4 lg:gap-8`,children:[(0,k.jsx)(`div`,{className:`w-full lg:w-[428px] flex flex-col gap-4`,children:(0,k.jsx)(A,{mapName:e,setMapName:t})}),(0,k.jsx)(`div`,{className:`w-full lg:w-[632px] flex flex-col gap-4`,children:(0,k.jsx)(yt,{})})]})})}),(0,k.jsx)(D,{})]})})}export{bt as component};