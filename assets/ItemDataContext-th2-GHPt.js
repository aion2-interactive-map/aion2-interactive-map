import{s as e}from"./rolldown-runtime-Cb2Vi1zU.js";import{a as t,n}from"./vendor-react-Pim_c09P.js";import{t as r}from"./useYamlLoader-BSkQVziK.js";var i=e(t(),1),a=e(n(),1),o=(0,i.createContext)(null);const s=({children:e})=>{let[t,n]=(0,i.useState)([]),[s,c]=(0,i.useState)([]),[l,u]=(0,i.useState)([]),[d,f]=(0,i.useState)([]),[p,m]=(0,i.useState)([]),[h,g]=(0,i.useState)([]),[_,v]=(0,i.useState)([]),[y,b]=(0,i.useState)(!0),x=r();(0,i.useEffect)(()=>{let e=!1;async function t(){try{let[t,r,i,a,o,s,l]=await Promise.all([x(`data/classes.yaml`),x(`data/items/items.yaml`),x(`data/items/types.yaml`),x(`data/items/grades.yaml`),x(`data/items/crafting.yaml`),x(`data/items/slots.yaml`),x(`data/items/tiers.yaml`)]);if(e)return;n(t.classes??[]),c(r.items??[]),u(i.categories??[]),f(a.grades??[]),m(o.crafting??[]),g(s.slots??[]),v(l.tiers??[])}catch(e){console.error(e)}finally{e||b(!1)}}return t(),()=>{e=!0}},[x]);let S=(0,i.useMemo)(()=>{let e=new Map;for(let t of s)e.set(t.id,t);return e},[s]),C=(0,i.useMemo)(()=>{let e=new Map;for(let t of p)e.set(t.id,t);return e},[p]),w=(0,i.useMemo)(()=>{let e=new Map;for(let t of h)e.set(t.key,t);return e},[h]),T=(0,i.useMemo)(()=>{let e=new Map;for(let t of d)e.set(t.name,t);return e},[d]),E=(0,i.useMemo)(()=>{let e=new Map;for(let t of p){let n=S.get(t.id);if(!n)continue;let r=n.subtype;e.has(r)||e.set(r,[]),e.get(r).push(t.id)}for(let t of e.values())t.sort((e,t)=>e-t);return e},[p,S]),D=(0,i.useMemo)(()=>{let e=new Map;for(let t of l)for(let n of t.subtypes??[])e.set(n.name,t.name);return e},[l]),O=(0,i.useMemo)(()=>{let e=new Map;for(let t of _)e.set(t.name,t);return e},[_]),k=(0,i.useMemo)(()=>{let e=new Map;for(let t of _)for(let n of t.items??[])e.has(n)||e.set(n,t.name);return e},[_]);return(0,a.jsx)(o.Provider,{value:{classes:t,items:s,types:l,grades:d,crafting:p,slots:h,tiers:_,itemsById:S,craftingById:C,slotsByKey:w,gradesByName:T,craftingItemIdsByType:E,subtypeToCategory:D,tiersByName:O,tierNameByItemId:k,loading:y},children:e})};function c(){let e=(0,i.useContext)(o);if(!e)throw Error(`useItemData must be used inside <ItemDataProvider>`);return e}export{c as n,s as t};