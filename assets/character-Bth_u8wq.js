import{s as e}from"./rolldown-runtime-Cb2Vi1zU.js";import{a as t,n}from"./vendor-react-Pim_c09P.js";import"./vendor-i18n-DqSCD7qU.js";import{$ as r,At as i,Ct as a,Dt as o,E as s,Et as c,Mt as l,Ot as u,Tt as d,it as f,jt as p,k as m,kt as h,nt as g,rt as _,wt as v}from"./vendor-ui-CcbCQdJ0.js";import{_ as y,c as b,i as x,l as S,m as C,s as w,t as T,u as E}from"./index-PpRX-PeH.js";import{t as D}from"./useYamlLoader-CPFdrbDG.js";import{a as O,t as k}from"./lodash-BxlZbz6J.js";import{n as A,t as j}from"./ItemDataContext-zkc8YriD.js";var M=e(t(),1),N=e(n(),1),P=(0,M.createContext)(null);const F=({children:e})=>{let[t,n]=(0,M.useState)([]),[r,i]=(0,M.useState)(!0),a=D();return(0,M.useEffect)(()=>{let e=!1;async function t(){try{let t=await a(`data/servers.yaml`);if(e)return;n(t.servers??[])}catch(e){console.error(e)}finally{e||i(!1)}}return t(),()=>{e=!0}},[a]),(0,N.jsx)(P.Provider,{value:{servers:t,loading:r},children:e})};function I(){let e=(0,M.useContext)(P);if(!e)throw Error(`useServerData must be used inside <ServerDataProvider>`);return e}var L=(0,M.createContext)(null);async function R(e){let t=S()+`/characters/info?server=${e.serverId}&character=${encodeURIComponent(e.characterId)}`,n=await fetch(t,{method:`GET`});if(!n.ok)throw Error(`Search failed: ${n.status}`);let r=await n.json();if(r?.errorCode&&r.errorCode!==`Success`)throw Error(r.errorMessage||`API Error`);return r?.data}const z=({children:e})=>{let t=w({from:T.fullPath}),n=b({from:T.fullPath}),[r,i]=(0,M.useState)(n.serverId??null),[a,o]=(0,M.useState)(n.characterId??null),[s,c]=(0,M.useState)(null),[l,u]=(0,M.useState)(null),[d,f]=(0,M.useState)(null),[p,m]=(0,M.useState)(null),[h,g]=(0,M.useState)([]),[_,v]=(0,M.useState)(!1),[y,x]=(0,M.useState)(null),S=M.useRef(null),C=D();(0,M.useEffect)(()=>{let e=!1;async function t(){try{let t=await C(`data/stats.yaml`);if(e)return;m(t)}catch{e||x(`Failed to load stats data`)}}return t(),()=>{e=!0}},[C]),(0,M.useEffect)(()=>{let e=!1;async function t(){try{let t=await C(`data/skills.yaml`);if(e)return;g(t.skills??[])}catch{e||x(`Failed to load skills data`)}}return t(),()=>{e=!0}},[C]);let O=(0,M.useMemo)(()=>{let e=new Map;for(let t of h)e.set(t.id,t);return e},[h]);(0,M.useEffect)(()=>{i(n.serverId??null),o(n.characterId??null)},[n.serverId,n.characterId]);let k=(0,M.useCallback)(e=>{i(e.serverId),o(e.characterId),t({replace:!0,search:t=>({...t,serverId:e.serverId,characterId:e.characterId})})},[t]),A=(0,M.useCallback)(()=>{i(null),o(null),c(null),u(null),f(null),x(null),v(!1),t({replace:!0,search:e=>({...e,serverId:void 0,characterId:void 0})})},[t]);(0,M.useEffect)(()=>{let e=!1,t=()=>{S.current&&=(S.current.close(),null)};async function n(){if(!r||!a){c(null),u(null),f(null),v(!1),x(null),t();return}v(!0),x(null);try{let n=await R({serverId:r,characterId:a});if(e)return;s(n);let i=n.status;i!==`cached`&&i!==`failed`?d(r,a):t(),v(!1)}catch(n){if(e)return;x(n instanceof Error?n.message:String(n)),v(!1),t()}}function i(e,t){return e?.profile?{profile:e.profile,stats:e.stats||[],titles:e.titles||[],rankings:e.rankings||[],boards:e.boards||[],updatedAt:t?new Date(t*1e3).toISOString():new Date().toISOString()}:null}function o(e){return{skills:(e?.skills||[]).map(e=>({id:e.id,skillLevel:e.skillLevel,acquired:e.acquired,equip:e.equip})),equipments:(e?.equipments||[]).map(e=>({id:e.id,enchantLevel:e.enchantLevel,exceedLevel:e.exceedLevel,slotPos:e.slotPos}))}}function s(e){let t=e.items||{},n=e.meta||{};if(t.info){let e=i(t.info,n.updatedAt);e&&c(e)}t.equipments&&u(o(t.equipments));let r=Object.entries(t).filter(([e])=>e.startsWith(`equipments:`)).reduce((e,[t,n])=>(e[t]=n,e),{});Object.keys(r).length>0&&f(r)}async function l(t,n){try{let r=await R({serverId:t,characterId:n});if(e)return;s(r);let i=r.status;i!==`cached`&&i!==`failed`&&d(t,n)}catch(e){console.error(`Re-fetch failed`,e)}}function d(n,r){t();let a=E()+`/characters/ws?server=${n}&character=${encodeURIComponent(r)}`,s=new WebSocket(a);S.current=s,s.onmessage=e=>{try{let t=JSON.parse(e.data);if(!t||!t.key)return;let n=t.key,r=t.value;if(n===`info`){let e=i(r,t.updated_at);e&&c(e)}else n===`equipments`?u(o(r)):n.startsWith(`equipments:`)&&f(e=>({...e||{},[n]:r}))}catch(e){console.error(`WS parse error`,e)}},s.onclose=()=>{e||(S.current=null,l(n,r))},s.onerror=e=>{console.error(`WS Error:`,e)}}return n(),()=>{e=!0,t()}},[r,a]);let j=(0,M.useMemo)(()=>({serverId:r,characterId:a,info:s,equipments:l,equipmentDetails:d,stats:p,skills:h,skillsById:O,loading:_,error:y,selectCharacter:k,clearSelection:A}),[r,a,s,l,d,p,O,_,y,k,A]);return(0,N.jsx)(L.Provider,{value:j,children:e})};function B(){let e=(0,M.useContext)(L);if(!e)throw Error(`useCharacter must be used inside <CharacterProvider>`);return e}function V(e,t){let[n,r]=(0,M.useState)(e);return(0,M.useEffect)(()=>{let n=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(n)}},[e,t]),n}function H(){let{servers:e,loading:t}=I(),{selectCharacter:n,characterId:r}=B(),{t:i}=y(),[s,c]=(0,M.useState)(`1`),[l,u]=(0,M.useState)(`all`),[p,m]=(0,M.useState)(``),v=V(p,300),[b,x]=(0,M.useState)(!1),[C,w]=(0,M.useState)([]),T=(0,M.useRef)(0),E=(0,M.useMemo)(()=>{let t=Number(s);return e.filter(e=>e.raceId===t)},[e,s]);(0,M.useEffect)(()=>{l!==`all`&&(E.some(e=>String(e.serverId)===l)||u(`all`))},[E,l]),(0,M.useEffect)(()=>{let e=v.trim(),t=Number(s),n=l===`all`?void 0:Number(l);if(w([]),!e||!t)return;let r=++T.current;(async()=>{try{x(!0);let i=await D({keyword:e,raceId:t,serverId:n});if(T.current!==r)return;w(i)}catch(e){console.error(e),T.current===r&&w([])}finally{T.current===r&&x(!1)}})()},[v,s,l]);async function D(e){let t=S()+`/characters/search?race=${e.raceId}&keyword=${encodeURIComponent(e.keyword)}`,n=e.serverId?`${t}&server=${e.serverId}`:t,r=await fetch(n,{method:`GET`});if(!r.ok)throw Error(`Search failed: ${r.status}`);return(await r.json()).data?.results??[]}let O=(0,M.useCallback)((e,t,n)=>{let r=n%1e3;return`${e} (${t===1?i(`common:server.lightAbbr`,`Light `):i(`common:server.darkAbbr`,`Dark `)}${r})`},[i]),k=(0,M.useMemo)(()=>{let e=[{key:`all`,label:i(`common:server.allServers`,`All servers`)}];for(let t of E)e.push({key:String(t.serverId),label:O(t.serverName,t.raceId,t.serverId)});return e},[E,i,O]),A=`
    !bg-character-input hover:!bg-character-input focus:!bg-character-input !transition-none 
    border-1 border-crafting-border shadow-none
    group-data-[hover=true]:!bg-character-input
    group-data-[focus=true]:!bg-character-input
    group-data-[focus-visible=true]:!bg-character-input
    group-data-[invalid=true]:!bg-character-input
  `,j={inputWrapper:A,innerWrapper:`h-10 py-0`},P={trigger:A+`border-r-0`,innerWrapper:`h-10 py-0`};return r?(0,N.jsxs)(`div`,{className:`flex flex-row gap-0 items-end w-full justify-end`,children:[(0,N.jsxs)(_,{placeholder:i(`common:server.race`,`Race`),isRequired:!0,selectedKeys:new Set([s]),onSelectionChange:e=>{let t=e.currentKey;(t===`1`||t===`2`)&&c(t)},className:`w-[100px] flex-none`,radius:`none`,classNames:P,children:[(0,N.jsx)(f,{children:i(`common:server.light`,`Light`)},`1`),(0,N.jsx)(f,{children:i(`common:server.dark`,`Dark`)},`2`)]}),(0,N.jsx)(_,{placeholder:i(`common:server.server`,`Server`),isRequired:!1,isDisabled:t||E.length===0,items:k,selectedKeys:new Set([l]),onSelectionChange:e=>{let t=e.currentKey;u(t?String(t):`all`)},className:`w-[160px] flex-none`,renderValue:e=>e[0]?.textValue??``,radius:`none`,classNames:P,children:e=>(0,N.jsx)(f,{textValue:e.label,children:e.label},e.key)}),(0,N.jsx)(g,{placeholder:i(`common:server.search`,`Type to search...`),inputValue:p,onInputChange:m,onSelectionChange:e=>{let t=C.find(t=>t.id===e);t&&n({serverId:t.serverId,characterId:t.id})},isDisabled:t,isLoading:b,items:C,className:`w-[180px] flex-none`,radius:`none`,inputProps:{classNames:j},children:e=>(0,N.jsx)(f,{textValue:e.name,children:(0,N.jsxs)(`div`,{className:`flex items-center gap-2 w-full`,children:[(0,N.jsx)(`img`,{src:`https://profileimg.plaync.com${e.profileImageUrl}`,alt:e.name,className:`w-[40px] h-[40px] object-cover rounded-md shrink-0`,draggable:!1}),(0,N.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,N.jsxs)(`div`,{className:`flex justify-between text-sm font-medium`,children:[(0,N.jsx)(`span`,{className:`truncate text-default-800`,children:e.name}),(0,N.jsxs)(`span`,{className:`shrink-0 text-default-600`,children:[`Lv.`,e.level]})]}),(0,N.jsx)(`div`,{className:`truncate text-xs text-default-700`,children:e.serverName})]})]})},e.id)})]}):(0,N.jsxs)(`div`,{className:`flex flex-col w-full space-y-8 pt-10 min-h-[600px]`,children:[(0,N.jsxs)(`div`,{className:`flex flex-col`,children:[(0,N.jsx)(`h1`,{className:`text-[22px] font-bold text-foreground`,children:`搜寻AION2角色`}),(0,N.jsx)(`p`,{className:`text-[14px] text-default-800 mt-2`,children:`查詢角色詳細資訊與評分`})]}),(0,N.jsxs)(`div`,{className:`flex flex-col items-center w-full space-y-4 max-w-2xl mx-auto`,children:[(0,N.jsx)(a,{placeholder:i(`common:server.search`,`Type to search...`),value:p,onValueChange:m,classNames:{inputWrapper:A.replace(`!transition-none`,``)+` h-12`,input:`text-lg`},size:`lg`,radius:`sm`,isClearable:!0}),(0,N.jsxs)(`div`,{className:`flex w-full gap-4`,children:[(0,N.jsxs)(_,{placeholder:i(`common:server.race`,`Race`),isRequired:!0,selectedKeys:new Set([s]),onSelectionChange:e=>{let t=e.currentKey;(t===`1`||t===`2`)&&c(t)},className:`flex-1`,radius:`sm`,classNames:{trigger:A.replace(`!transition-none`,``)+` h-12`},size:`lg`,children:[(0,N.jsx)(f,{children:i(`common:server.light`,`Light`)},`1`),(0,N.jsx)(f,{children:i(`common:server.dark`,`Dark`)},`2`)]}),(0,N.jsx)(_,{placeholder:i(`common:server.server`,`Server`),isRequired:!1,isDisabled:t||E.length===0,items:k,selectedKeys:new Set([l]),onSelectionChange:e=>{let t=e.currentKey;u(t?String(t):`all`)},className:`flex-1`,renderValue:e=>e[0]?.textValue??``,radius:`sm`,classNames:{trigger:A.replace(`!transition-none`,``)+` h-12`},size:`lg`,children:e=>(0,N.jsx)(f,{textValue:e.label,children:e.label},e.key)})]})]}),(0,N.jsxs)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 w-full`,children:[C.map(e=>(0,N.jsx)(d,{isPressable:!0,onPress:()=>n({serverId:e.serverId,characterId:e.id}),className:`bg-character-card border-1 border-crafting-border hover:border-primary transition-colors`,shadow:`sm`,children:(0,N.jsx)(o,{className:`p-3 overflow-hidden`,children:(0,N.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,N.jsx)(`img`,{src:`https://profileimg.plaync.com${e.profileImageUrl}`,alt:e.name,className:`w-[48px] h-[48px] object-cover rounded-md shrink-0`,draggable:!1}),(0,N.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,N.jsx)(`div`,{className:`flex justify-between items-baseline gap-1`,children:(0,N.jsx)(`span`,{className:`truncate text-base font-bold text-foregound`,children:e.name})}),(0,N.jsxs)(`div`,{className:`truncate text-sm text-default-800 mt-0.5`,children:[e.serverName,` | Lv.`,e.level]})]})]})})},e.id)),b&&(0,N.jsx)(`div`,{className:`col-span-full flex justify-center py-10`,children:(0,N.jsx)(h,{color:`primary`,label:`Searching characters...`})}),!b&&p.trim()!==``&&C.length===0&&(0,N.jsx)(`div`,{className:`col-span-full flex justify-center py-10`,children:(0,N.jsxs)(`span`,{className:`text-default-500`,children:[`No characters found for "`,p,`"`]})})]})]})}var U=e(k(),1),W=e(k(),1),G=M.memo(()=>{let{info:e}=B(),{i18n:t}=y();if(!e)return null;let n=(0,W.keyBy)(e.stats,`type`);return console.log(e),(0,N.jsx)(d,{className:`shadow-none border-default-200 bg-character-input border-1 border-crafting-border rounded-lg`,children:(0,N.jsxs)(o,{className:`flex flex-col items-center gap-2`,children:[(0,N.jsx)(`div`,{className:`w-[72px] h-[72px] rounded-full overflow-hidden bg-default-100 flex justify-center items-center`,children:(0,N.jsx)(`img`,{src:e.profile.profileImage,alt:`avatar`,className:`w-full h-full object-cover`,draggable:!1})}),(0,N.jsxs)(`div`,{className:`w-full text-center text-default-800`,children:[(0,N.jsxs)(`div`,{className:`text-[18px]`,children:[e.profile.characterName,` [`,(0,N.jsx)(`span`,{className:`text-grade-${(0,U.lowerCase)(e.profile.titleGrade)}`,children:e.profile.titleName}),`]`]}),(0,N.jsxs)(`div`,{className:`mt-2 text-[14px]`,children:[e.profile.raceName,` | `,e.profile.serverName,` | `,e.profile.className,` |`,` `,e.profile.regionName,` | `,(0,N.jsxs)(`span`,{className:`font-semibold`,children:[`战力值`,n.ItemLevel?.value??`-`]}),` | 更新于 `,x(e.updatedAt).locale(t.language.toLowerCase().split(`-`)[0]).fromNow()]})]})]})})}),K=e(k(),1),q=M.memo(()=>{let{info:e,stats:t}=B(),{t:n}=y(),[i,a]=(0,M.useState)(!0);if(!e||!t)return null;let f=(0,K.keyBy)(e.stats,`type`),p=e=>{let r=t[e];return(0,N.jsx)(`div`,{className:`grid grid-cols-6 gap-3`,children:r?.map((e,t)=>(0,N.jsxs)(`div`,{className:`text-center bg-character-card rounded-md border-1 border-crafting-border p-2`,children:[(0,N.jsx)(`div`,{className:`h-[60px] w-[60px] mx-auto rounded-lg`,children:(0,N.jsx)(`img`,{src:C(e.icon),alt:e.type,className:`w-full h-full object-cover`,draggable:!1})}),(0,N.jsx)(`div`,{className:`text-[18px] text-default-800`,children:n(`stats:${e.type}.name`)}),(0,N.jsx)(`div`,{className:`text-[18px] text-default-800`,children:f[e.type]?.value??`-`})]},t))})};return(0,N.jsxs)(d,{className:`shadow-none border-default-200 bg-character-input border-1 border-crafting-border rounded-lg`,children:[(0,N.jsxs)(o,{className:`space-y-4`,children:[(0,N.jsx)(`div`,{className:`mb-0`,children:p(`mainStats`)}),!i&&(0,N.jsx)(`div`,{className:`mt-3`,children:p(`lordStats`)})]}),(0,N.jsx)(l,{}),(0,N.jsx)(c,{className:`p-0`,children:(0,N.jsxs)(u,{variant:`light`,disableRipple:!0,disableAnimation:!0,onPress:()=>a(!i),className:`
            w-full text-default-700 gap-2 shadow-none bg-transparent
            hover:bg-transparent active:bg-transparent focus:bg-transparent focus-visible:bg-transparent
            data-[hover=true]:bg-transparent data-[pressed=true]:bg-transparent data-[focus-visible=true]:bg-transparent
          `,size:`md`,radius:`none`,children:[i?n(`common:menu.expand`,`Expand`):n(`common:menu.collapse`,`Collapse`),(0,N.jsx)(r,{icon:i?s:m})]})})]})}),J=M.memo(()=>{let{equipments:e,skillsById:t}=B(),{t:n}=y(),r=r=>{let i=(e?.skills??[]).filter(e=>t.get(e.id)?.category===r)??[];return(0,N.jsxs)(`div`,{className:`flex gap-0 border-1 border-crafting-border bg-character-card rounded-lg`,children:[(0,N.jsx)(`div`,{className:`w-[38px] shrink-0 flex items-center justify-center border-r-1 border-crafting-border`,children:(0,N.jsx)(`div`,{className:`w-[18px] text-center text-[18px] font-semibold text-default-700 break-words`,children:n(`common:skills.category.${r.toLowerCase()}`,r)})}),(0,N.jsx)(`div`,{className:`flex flex-wrap gap-3 p-3`,children:i.map(e=>{let n=t.get(e.id),r=n?.icon?C(`UI/Resource/Texture/Skill/${n.icon}`):void 0;return(0,N.jsxs)(`div`,{className:`relative h-[48px] w-[48px] overflow-hidden rounded-md`,children:[r?(0,N.jsx)(`img`,{src:r,alt:String(e.id),className:`h-full w-full object-cover`,draggable:!1}):(0,N.jsx)(`div`,{className:`h-full w-full bg-default-200`}),(0,N.jsxs)(`div`,{className:`absolute bottom-0 right-0 bg-black/60 text-white text-[14px] px-1 rounded-tl-md`,children:[`LV`,e.skillLevel]})]},String(e.id))})})]})};return(0,N.jsxs)(`div`,{className:`space-y-4`,children:[r(`Active`),r(`Passive`),r(`Dp`)]})}),Y=e(k(),1),X=[1,2,3,4,5,17,6,7,8,19],Z=[11,12,10,22,13,14,15,16,23,24],Q=M.memo(()=>{let{equipments:e,equipmentDetails:t}=B(),{itemsById:n}=A(),{t:r}=y(),i=(0,Y.keyBy)(e?.equipments??[],`slotPos`),a=e=>{let a=i[e],o=t?.[`equipments:${e}`],s=(a?n.get(a.id):null)||(o?n.get(o.id):null),c=C(`UI/Resource/Texture/ETC/UT_ItemTooltipGrade_${s?.grade??`Common`}.webp`),l=C(s?.icon||``),u=r(`items/items:${s?.id||a?.id}.name`,String(s?.id||a?.id||``));return console.log(u),console.log(o),(0,N.jsx)(v,{content:o?(0,N.jsxs)(`div`,{className:`space-y-1 w-full text-[14px]`,children:[(0,N.jsx)(`div`,{className:`font-bold text-[18px] text-center pb-1`,children:`装备详情`}),(0,N.jsxs)(`div`,{className:`space-y-2`,children:[o.mainStats&&o.mainStats.length>0&&(0,N.jsx)(`div`,{className:`bg-character-card p-2 rounded space-y-1`,children:o.mainStats.map(e=>(0,N.jsxs)(`div`,{className:`flex justify-between`,children:[(0,N.jsx)(`span`,{className:`text-default-800 font-[400]`,children:r(`stats:${e.id}.name`,e.id)}),(0,N.jsxs)(`span`,{className:`text-foreground font-[700]`,children:[e.value!==`0`&&e.value!==``&&e.value!==`0%`&&(e.minValue&&e.minValue!==``?`${e.minValue} - ${e.value}`:e.value),e.extra!==`0`&&e.extra!==`0%`&&(0,N.jsx)(`span`,{className:`text-success ml-1`,children:e.value!==`0`&&e.value!==``&&e.value!==`0%`?`+${e.extra}`:e.extra})]})]},e.id))}),o.subStats&&o.subStats.length>0&&(0,N.jsx)(`div`,{className:`bg-character-card p-2 rounded space-y-1`,children:o.subStats.map(e=>(0,N.jsxs)(`div`,{className:`flex justify-between`,children:[(0,N.jsx)(`span`,{className:`text-default-800 font-[400]`,children:r(`stats:${e.id}.name`,e.id)}),(0,N.jsx)(`span`,{className:`text-foreground font-[700]`,children:e.value})]},e.id))})]}),o.magicStoneStat?.length>0&&(0,N.jsx)(`div`,{className:`pt-1 space-y-1`,children:(0,N.jsx)(`div`,{className:`bg-character-card p-2 rounded space-y-1`,children:o.magicStoneStat.map((e,t)=>(0,N.jsxs)(`div`,{className:`flex justify-between`,children:[(0,N.jsx)(`span`,{className:`text-default-800 font-[400]`,children:r(`stats:${e.id}.name`,e.id)}),(0,N.jsx)(`span`,{className:`text-foreground font-[700] text-grade-${(0,Y.lowerCase)(e.grade)}`,children:e.value})]},t))})}),o.godStoneStat?.length>0&&(0,N.jsx)(`div`,{className:`pt-1 space-y-1`,children:(0,N.jsx)(`div`,{className:`bg-character-card p-2 rounded space-y-1`,children:o.godStoneStat.map((e,t)=>(0,N.jsxs)(`div`,{className:`flex flex-col`,children:[(0,N.jsx)(`div`,{className:`flex justify-between items-center`,children:(0,N.jsx)(`span`,{className:`text-foreground font-[400]`,children:e.name})}),(0,N.jsx)(`div`,{className:`text-default-800 text-[12px] mt-1`,children:e.desc})]},t))})})]}):(0,N.jsx)(`div`,{className:`flex justify-center items-center py-2`,children:(0,N.jsx)(h,{size:`sm`})}),placement:`left`,classNames:{content:`bg-character-equipment rounded-lg shadow-none px-2 py-4 w-[330px]`},children:(0,N.jsx)(`div`,{className:`relative h-[56px] bg-contain bg-center bg-no-repeat rounded-[4px] shadow-none cursor-help`,style:{backgroundImage:`url(${c})`,backgroundSize:`100% 100%`},children:(0,N.jsxs)(`div`,{className:`flex h-full w-full items-center rounded-[4px] px-2`,children:[a||o?(0,N.jsx)(`img`,{src:l,alt:u,className:`h-12 w-12 shrink-0 object-contain`,draggable:!1}):(0,N.jsx)(`div`,{className:`h-12 w-12 shrink-0`}),(0,N.jsxs)(`div`,{className:`ml-2 flex h-[48px] min-w-0 flex-1 flex-col justify-center`,children:[(0,N.jsx)(`div`,{className:`truncate text-left text-[13px] font-bold leading-[13px] text-white [text-shadow:0px_2px_4px_rgba(0,0,0,0.35)]`,children:(a||o)&&`${u} +${a?.enchantLevel??o?.enchantLevel??0}`}),(0,N.jsxs)(`div`,{className:`mt-2 flex items-center justify-start gap-0`,children:[a?.exceedLevel?Array.from({length:a?.exceedLevel||0}).map((e,t)=>(0,N.jsx)(`div`,{className:`h-[16px] w-[16px] overflow-hidden rounded-sm flex justify-center items-center`,children:(0,N.jsx)(`img`,{src:C(`UI/Resource/Texture/Icon/UT_NP_QuestMonolith_Acquired.webp`),alt:`exceed-level`,className:`h-full w-full object-contain`,style:{objectFit:`contain`,objectPosition:`0% 50%`,transform:`scale(3)`},draggable:!1})},t)):null,!(a?.exceedLevel||o?.maxExceedEnchantLevel)&&(0,N.jsx)(`div`,{className:`h-[16px] w-[16px] shrink-0`})]})]})]})})},e)};return(0,N.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,N.jsx)(`div`,{className:`flex flex-col gap-3`,children:X.map(e=>a(e))}),(0,N.jsx)(`div`,{className:`flex flex-col gap-3`,children:Z.map(e=>a(e))})]})}),$=e(k(),1),ee=M.memo(()=>{let{equipments:e}=B(),{itemsById:t}=A(),{t:n}=y(),r=(0,$.keyBy)(e?.equipments??[],`slotPos`);return(0,N.jsx)(`div`,{className:`flex w-full justify-between gap-4`,children:[41,42,43,44,45].map(e=>{let i=r[e],a=C((i?t.get(i.id):null)?.icon||``),o=n(`items/items:${i?.id}.name`,String(i?.id??``));return(0,N.jsxs)(`div`,{className:`relative flex justify-center items-start`,style:{height:`80px`,width:`80px`},title:o,children:[a?(0,N.jsx)(`img`,{src:a,alt:o,className:`object-contain rounded-lg`,style:{width:`80px`,height:`80px`},draggable:!1}):(0,N.jsx)(`div`,{className:`bg-default-200 rounded-lg w-full h-full`}),(0,N.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 bottom-[4px] text-white bg-black/60 px-2 rounded-lg text-[14px] font-bold pointer-events-none`,children:[`+`,i?.enchantLevel??0]})]},e)})})}),te=M.memo(()=>{let{info:e}=B();if(!e)return null;let t=[`Attack`,`Defense`,`Etc`],n=[`UT_Stat_GrowthSummary_Title_First.webp`,`UT_Stat_GrowthSummary_Title_Second.webp`,`UT_Stat_GrowthSummary_Title_Third.webp`];return(0,N.jsx)(`div`,{className:`grid grid-cols-3 gap-4`,children:t.map((t,r)=>{let i=e.titles?.find(e=>e.equipCategory===t),a=C(`UI/Resource/Texture/ETC/UT_SlotGrade_${i?.grade??`Common`}.webp`),o=C(`UI/Resource/Texture/ETC/${n[r]}`);return(0,N.jsxs)(`div`,{className:`relative overflow-hidden rounded-md border-1 border-crafting-border bg-character-input p-3`,children:[(0,N.jsx)(`div`,{className:`absolute inset-0 bg-center bg-no-repeat bg-contain`,style:{backgroundImage:`url(${a})`,backgroundSize:`100% 100%`}}),(0,N.jsxs)(`div`,{className:`relative flex flex-col items-center gap-2`,children:[(0,N.jsx)(`div`,{className:`h-[80px] w-[80px] overflow-hidden rounded-md`,children:(0,N.jsx)(`img`,{src:o,alt:t,className:`h-full w-full object-cover`,draggable:!1})}),(0,N.jsx)(`div`,{className:`text-sm font-semibold text-white`,children:i?.name??``})]})]},t)})})});function ne(){let{info:e,loading:t,error:n,characterId:r,stats:a}=B();if(!r)return null;if(n)return(0,N.jsx)(`div`,{className:`grid place-items-center py-20 text-default-500`,children:(0,N.jsxs)(`div`,{className:`rounded-lg border border-default-200 bg-content2 px-6 py-3 text-sm`,children:[`Error loading character: `,n]})});if(t||!e)return(0,N.jsx)(`div`,{className:`flex justify-center items-center py-20`,children:(0,N.jsx)(h,{})});if(!a)return null;let o={base:`!bg-transparent !shadow-none !backdrop-filter-none !backdrop-blur-none pb-2 `,trigger:`py-4 min-h-0 px-2`,title:`text-[16px] leading-[16px] font-bold`,content:`py-0`,indicator:`text-default-700`};return(0,N.jsxs)(`div`,{className:`w-full space-y-4`,children:[(0,N.jsx)(G,{}),(0,N.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 w-full`,children:[(0,N.jsx)(`div`,{className:`w-full`,children:(0,N.jsxs)(p,{variant:`light`,selectionMode:`multiple`,defaultExpandedKeys:[`stats`,`skills`],itemClasses:o,showDivider:!1,className:`w-full`,children:[(0,N.jsx)(i,{title:`主要能力值`,className:`w-full`,children:(0,N.jsx)(q,{})},`stats`),(0,N.jsx)(i,{title:`技能`,className:`w-full`,children:(0,N.jsx)(J,{})},`skills`)]})}),(0,N.jsx)(`div`,{className:`w-full`,children:(0,N.jsxs)(p,{variant:`light`,selectionMode:`multiple`,defaultExpandedKeys:[`equipments`,`titles`,`cards`],itemClasses:o,showDivider:!1,className:`w-full`,children:[(0,N.jsx)(i,{title:`装备`,className:`w-full`,children:(0,N.jsx)(Q,{})},`equipments`),(0,N.jsx)(i,{title:`阿尔卡那`,className:`w-full`,children:(0,N.jsx)(ee,{})},`cards`),(0,N.jsx)(i,{title:`称号`,className:`w-full`,children:(0,N.jsx)(te,{})},`titles`)]})})]})]})}function re(){return(0,N.jsx)(`div`,{className:`h-full overflow-y-auto bg-chacracter-page`,children:(0,N.jsxs)(`div`,{className:`max-w-6xl mx-auto px-4 py-6 space-y-4`,children:[(0,N.jsx)(H,{}),(0,N.jsx)(ne,{})]})})}var ie=()=>(0,N.jsx)(j,{children:(0,N.jsx)(z,{children:(0,N.jsx)(F,{children:(0,N.jsx)(re,{})})})});export{ie as component};