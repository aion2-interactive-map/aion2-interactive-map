import{s as e}from"./rolldown-runtime-Cb2Vi1zU.js";import{a as t,n}from"./vendor-react-Pim_c09P.js";import"./vendor-i18n-DqSCD7qU.js";import{$ as r,Dt as i,K as a,L as o,N as s,Ot as c,Tt as l,W as u,X as d,Y as f,at as p,dt as m,et as h,ft as g,ht as _,mt as v,ot as y,pt as b}from"./vendor-ui-CcbCQdJ0.js";import{_ as x,m as S,o as C}from"./index-CnmiErmA.js";import"./useYamlLoader-BAd8zboM.js";import{n as w,t as T}from"./ItemDataContext-DeXVmGwg.js";var E=e(t(),1),D=e(n(),1);function O(...e){for(let t of e)if(t&&t.trim().length>0)return t;return``}function k(e){let t=e?.itemId,n=e?.count;return{itemId:typeof t==`number`||t===null?t:null,count:typeof n==`number`&&Number.isFinite(n)?n:0}}function A(e){return!Number.isFinite(e)||e<0?0:e>99?99:Math.floor(e)}function j(e,t){return!t||e==null?!0:e===t}function M({selectedBySlotKey:e,setSelectedBySlotKey:t,race:n}){let[i,o]=(0,E.useState)(!1),[s,l]=(0,E.useState)(null),[h,C]=(0,E.useState)(``),[T,M]=(0,E.useState)(`thumbnail`),{craftingItemIdsByType:N,craftingById:P,slots:F,items:I,gradesByName:L}=w(),{t:R}=x(),z=(0,E.useMemo)(()=>s?F.find(e=>e.key===s)??null:null,[s,F]),B=(0,E.useMemo)(()=>z?.allowed_types??[],[z]);(0,E.useEffect)(()=>{if(!i)return;let e=B[0]??``;(!h||e&&!B.includes(h))&&C(e)},[i,B,h]);let V=(0,E.useMemo)(()=>h?(N.get(h)??[]).filter(e=>j(P.get(e)?.race??null,n)):[],[h,N,P,n]),H=(0,E.useMemo)(()=>{if(!z||!h)return[];let e=new Set(V);return I.filter(t=>t.subtype===h&&e.has(t.id))},[z,h,I,V]);function U(e){l(e),o(!0)}function W(e,n){t(t=>{let r=k(t[e]),i=r.count>0?r.count:1;return{...t,[e]:{...r,itemId:n,count:i}}}),o(!1)}function G(e){t(t=>{let n=k(t[e]);return{...t,[e]:{...n,itemId:null,count:0}}}),o(!1)}function K(){t(e=>{let t={};for(let n of F){let r=k(e[n.key]);t[n.key]={...r,itemId:null,count:0}}return t})}function q(e,n){t(t=>{let r=k(t[e]);if(!r.itemId)return t;let i=A(r.count+n);return{...t,[e]:{...r,count:i}}})}let J=[];J=T===`thumbnail`?F:T===`weapon_armor`?F.slice(0,10):F.slice(10,20);let Y=T===`thumbnail`?`grid grid-cols-2 gap-2`:`grid grid-cols-1 gap-2`;return(0,D.jsxs)(`div`,{className:`flex h-full w-full flex-col`,children:[(0,D.jsx)(`div`,{className:`my-3 h-[38px] text-center text-[22px] font-bold text-default-900`,children:R(`common:crafting.selectClick`,`Click to select equipment`)}),(0,D.jsx)(`div`,{className:`flex-1 overflow-y-auto no-scrollbar`,children:(0,D.jsx)(`div`,{className:`flex w-full justify-center `,children:(0,D.jsx)(`div`,{className:Y,children:J.map(t=>{let n=k(e[t.key]),i=n.itemId,o=n.count,s=i?I.find(e=>e.id===i):void 0,c=S(O(s?.icon,t.icon)),l=R(`items/types:subtypes.${t.name}.name`,t.name),d=s?R(`items/items:${s.id}.name`,String(s.id)):l,f=L.get(s?.grade||``)?.name||``,p=()=>{t.craftable&&U(t.key)},m=(0,D.jsx)(`div`,{className:`pointer-events-none flex items-center justify-center`,children:(0,D.jsxs)(`div`,{className:`pointer-events-auto flex items-center gap-2 rounded-sm bg-black/40 px-1`,children:[(0,D.jsx)(`button`,{type:`button`,onClick:e=>{e.preventDefault(),e.stopPropagation(),q(t.key,-1)},disabled:!i||o<=0,className:[`flex h-[16px] w-[16px] items-center justify-center rounded-sm`,!i||o<=0?`opacity-40`:`hover:bg-black/30`].join(` `),title:R(`common:crafting.minus`,`Minus`),children:(0,D.jsx)(r,{icon:u,className:`text-[10px] text-white`})}),(0,D.jsx)(`div`,{className:`min-w-[18px] text-center text-[12px] font-bold leading-[12px] text-white`,children:i?String(Math.max(0,o)):`0`}),(0,D.jsx)(`button`,{type:`button`,onClick:e=>{e.preventDefault(),e.stopPropagation(),q(t.key,1)},disabled:!i,className:[`flex h-[16px] w-[16px] items-center justify-center rounded-sm`,i?`hover:bg-black/30`:`opacity-40`].join(` `),title:R(`common:crafting.plus`,`Plus`),children:(0,D.jsx)(r,{icon:a,className:`text-[10px] text-white`})})]})});return T===`thumbnail`?(0,D.jsxs)(`button`,{type:`button`,onClick:p,className:`relative h-12 w-[89px] rounded-sm bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${S(`UI/Resource/Texture/ETC/UT_SlotGrade_${f}.webp`)})`,backgroundSize:`100% 100%`},title:l,children:[(0,D.jsx)(`div`,{className:`flex h-full w-full items-center justify-center rounded-sm ${i?``:`bg-[#0D0E15]`}`,children:(0,D.jsx)(`img`,{src:c,alt:t.name,className:`h-full w-full object-contain`})}),(0,D.jsx)(`div`,{className:`pointer-events-none absolute inset-x-1 top-[2px] z-20`,children:(0,D.jsx)(`div`,{className:`truncate text-center text-[12px] font-bold leading-[12px] text-white [text-shadow:0px_2px_4px_rgba(0,0,0,0.35)]`,children:l})}),s&&(0,D.jsx)(`div`,{className:`pointer-events-none absolute inset-x-0 bottom-[2px] z-20 flex justify-center`,children:m})]},t.key):(0,D.jsx)(`button`,{type:`button`,onClick:p,className:`relative h-[56px] w-[188px] rounded-sm bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${S(`UI/Resource/Texture/ETC/UT_ItemTooltipGrade_${f}.webp`)})`,backgroundSize:`100% 100%`},title:d,children:(0,D.jsxs)(`div`,{className:`flex h-full w-full items-center rounded-sm px-2 ${i?``:`bg-[#0D0E15]`}`,children:[(0,D.jsx)(`img`,{src:c,alt:t.name,className:`h-12 w-12 shrink-0 object-contain`}),(0,D.jsxs)(`div`,{className:`ml-2 flex h-[48px] min-w-0 flex-1 flex-col justify-center`,children:[(0,D.jsx)(`div`,{className:`truncate text-left text-[13px] font-bold leading-[13px] text-white [text-shadow:0px_2px_4px_rgba(0,0,0,0.35)]`,children:d}),s&&(0,D.jsx)(`div`,{className:`mt-1 flex items-center`,children:m})]})]})},t.key)})})})}),(0,D.jsx)(`div`,{className:`mt-2 w-full`,children:(0,D.jsx)(c,{size:`sm`,variant:`flat`,onPress:K,className:`h-[34px] w-full rounded-sm border-1 border-crafting-border bg-crafting-sum`,children:(0,D.jsxs)(`span`,{className:`flex w-full items-center justify-center gap-2 text-[14px] text-default-800`,children:[(0,D.jsx)(r,{icon:d}),R(`common:crafting.clearAll`,`Clear all slots`)]})})}),(0,D.jsx)(`div`,{className:`mt-2`,children:(0,D.jsxs)(y,{selectedKey:T,onSelectionChange:e=>M(e),variant:`light`,className:`w-full rounded-sm border-1 border-crafting-border bg-crafting-sum`,classNames:{tabList:`w-full flex gap-0`,tab:`h-[30px] flex-1 justify-center data-[selected=true]:bg-primary dark:data-[selected=true]:bg-default-800`,tabContent:`flex items-center justify-center text-default-800 group-data-[selected=true]:text-background`},children:[(0,D.jsx)(p,{title:(0,D.jsx)(r,{icon:f})},`thumbnail`),(0,D.jsx)(p,{title:R(`common:crafting.weaponOrArmor`,`Weapon / Armor`)},`weapon_armor`),(0,D.jsx)(p,{title:R(`common:crafting.accessory`,`Accessory`)},`accessory`)]})}),(0,D.jsx)(m,{isOpen:i,onOpenChange:e=>o(e),size:`5xl`,children:(0,D.jsx)(v,{className:`w-fit max-w-none`,children:e=>(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(g,{className:`flex flex-col gap-2`,children:[(0,D.jsx)(`div`,{children:R(`common:crafting.select`,`Select item`)}),z&&B.length>0?(0,D.jsx)(y,{selectedKey:h,onSelectionChange:e=>C(String(e)),variant:`underlined`,classNames:{tabList:`gap-2`,cursor:`bg-default-800`,tab:`h-8`},children:B.map(e=>(0,D.jsx)(p,{title:R(`items/types:subtypes.${e}.name`,e)},e))}):null]}),(0,D.jsx)(_,{children:z?(0,D.jsx)(`div`,{className:`flex flex-col gap-3`,children:(0,D.jsx)(`div`,{className:`max-h-[560px] overflow-y-auto`,children:(0,D.jsxs)(`div`,{className:`grid grid-cols-3 gap-5`,children:[H.map(e=>{let t=R(`items/items:${e.id}.name`,e.subtype);return(0,D.jsxs)(`button`,{type:`button`,onClick:()=>W(z.key,e.id),className:`flex items-center rounded-sm border-2 border-default bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${S(`UI/Resource/Texture/ETC/UT_ItemTooltipGrade_${L.get(e.grade)?.name}.webp`)})`,backgroundSize:`100% 100%`},title:`${e.id} (${e.subtype})`,children:[(0,D.jsx)(`img`,{src:S(e.icon),alt:String(e.id),className:`h-16 w-16 object-contain`}),(0,D.jsx)(`div`,{className:`flex h-16 w-[160px] items-center px-2 text-left text-[14px] font-bold text-white [text-shadow:0px_2px_4px_rgba(0,0,0,0.3)]`,children:t})]},e.id)}),H.length===0&&(0,D.jsx)(`div`,{className:`col-span-3 text-sm text-default-500`,children:`No craftable items match this slot’s allowed types.`})]})})}):(0,D.jsx)(`div`,{className:`text-sm text-default-500`,children:`No slot selected.`})}),(0,D.jsxs)(b,{children:[z?(0,D.jsx)(c,{variant:`flat`,color:`danger`,onPress:()=>G(z.key),children:R(`common:ui.clear`)}):null,(0,D.jsx)(c,{variant:`flat`,onPress:e,children:R(`common:ui.close`)})]})]})})})]})}function N(e){let t=Number(e);return Number.isFinite(t)?t:0}function P(e){return typeof e!=`number`||!Number.isFinite(e)?0:Math.max(0,Math.floor(e))}var F=`aion2.crafting.prices.v1`,I=`aion2.crafting.materialOwned.v1`,L=[`Equipment`,`CraftResource`,`GatherResource`];function R(e){return e===`CraftResource`?`CraftResource`:e===`GatherResource`?`GatherResource`:`Equipment`}function z({selectedBySlotKey:e}){let{craftingById:t,itemsById:n,gradesByName:i}=w(),{t:c}=x(),[l,d]=(0,E.useState)(()=>{try{let e=localStorage.getItem(F);return e?JSON.parse(e):{}}catch{return{}}});(0,E.useEffect)(()=>{localStorage.setItem(F,JSON.stringify(l))},[l]);let[f,p]=(0,E.useState)(()=>{try{let e=localStorage.getItem(I);return e?JSON.parse(e):{}}catch{return{}}});(0,E.useEffect)(()=>{localStorage.setItem(I,JSON.stringify(f))},[f]);let m=(0,E.useMemo)(()=>{let n=new Map;for(let r of Object.values(e)){if(!r)continue;let e=r.itemId??null;if(!e)continue;let i=P(r.count);if(i<=0)continue;let a=t.get(e);if(a)for(let e of a.materials??[]){let t=P(e.count??0);if(t<=0)continue;let r=n.get(e.id)??0;n.set(e.id,r+t*i)}}let r=Array.from(n.entries()).map(([e,t])=>({id:e,count:t}));return r.sort((e,t)=>e.id-t.id),r},[e,t]),g=(0,E.useMemo)(()=>{let e={Equipment:[],CraftResource:[],GatherResource:[]};for(let t of m)e[R(n.get(t.id)?.subtype)].push(t);for(let t of Object.values(e))t.sort((e,t)=>e.id-t.id);return e},[m,n]);function _(e){let t=f[e];if(t==null||t===``)return 0;let n=Number(t);return Number.isFinite(n)?Math.max(0,Math.floor(n)):0}function v(e){let t=_(e.id);return Math.max(0,e.count-t)}let y=(0,E.useMemo)(()=>{let e={Equipment:0,CraftResource:0,GatherResource:0};for(let t of L){let n=0;for(let e of g[t]){let t=v(e),r=N(l[e.id]??``);n+=t*r}e[t]=n}return e},[g,l,f]),b=(0,E.useMemo)(()=>L.reduce((e,t)=>e+y[t],0),[y]);function C(e){p(t=>{let n=_(e.id),r=Math.max(0,n-1);return{...t,[e.id]:String(r)}})}function T(e){p(t=>{let n=_(e.id)+1;return{...t,[e.id]:String(n)}})}return(0,D.jsxs)(`div`,{className:`flex h-full w-full flex-col`,children:[(0,D.jsx)(`div`,{className:`flex-1 overflow-hidden`,children:m.length===0?(0,D.jsx)(`div`,{className:`text-sm text-default-500`}):(0,D.jsx)(`div`,{className:`grid h-full min-h-0 min-w-0 grid-cols-[1fr_auto_1fr_auto_1fr] gap-3`,children:L.map((e,t)=>{let o=g[e];return(0,D.jsxs)(E.Fragment,{children:[(0,D.jsxs)(`div`,{className:`flex h-full min-h-0 flex-col rounded-lg border border-crafting-border bg-transparent`,children:[(0,D.jsx)(`div`,{className:`m-2 flex h-[38px] items-center justify-center border-b border-crafting-border px-3 py-2`,children:(0,D.jsx)(`div`,{className:`text-[16px] font-bold leading-[16px] text-default-900`,children:c(`items/types:subtypes.${e}.name`,e)})}),(0,D.jsx)(`div`,{className:`flex-1 overflow-y-auto no-scrollbar p-3`,children:(0,D.jsx)(`div`,{className:`flex flex-col gap-2`,children:o.length===0?(0,D.jsx)(`div`,{className:`text-xs text-default-500`,children:`No materials`}):o.map(e=>{let t=n.get(e.id),o=c(`items/items:${e.id}.name`,String(e.id)),s=t?.icon?S(t.icon):``,f=l[e.id]??``,m=S(`UI/Resource/Texture/ETC/UT_SlotGrade_${i.get(t?.grade||``)?.name}.webp`),g=_(e.id);return(0,D.jsxs)(`div`,{className:`flex flex-col gap-2 rounded-lg border border-default-200 bg-crafting-item p-2`,children:[(0,D.jsx)(`div`,{className:`truncate text-sm font-semibold text-default-900`,children:o}),(0,D.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,D.jsx)(`div`,{className:`flex h-12 w-12 items-center justify-center rounded-sm bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${m})`},children:s?(0,D.jsx)(`img`,{src:s,alt:o,className:`h-12 w-12 object-contain`}):(0,D.jsx)(`div`,{className:`text-xs text-default-500`,children:e.id})}),(0,D.jsxs)(`div`,{className:`flex min-w-0 flex-1 flex-col gap-2`,children:[(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(`div`,{role:`button`,tabIndex:0,className:`flex h-4 w-4 cursor-pointer items-center justify-center rounded-full bg-primary dark:bg-secondary hover:opacity-80`,onClick:()=>C(e),onKeyDown:t=>{(t.key===`Enter`||t.key===` `)&&C(e)},title:`-`,children:(0,D.jsx)(r,{icon:u,className:`text-[10px] text-white`})}),(0,D.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,D.jsx)(`span`,{className:`inline-flex align-middle -translate-y-[1px]`,style:{width:`${Math.max(3,String(g).length)}ch`},children:(0,D.jsx)(h,{size:`sm`,hideStepper:!0,value:g,onValueChange:t=>{let n=P(t??0);p(t=>({...t,[e.id]:n===0?``:String(n)}))},radius:`none`,classNames:{base:`w-full`,inputWrapper:`w-full bg-transparent border-0 shadow-none px-0 h-[20px] min-h-[20px] group-data-[hover=true]:bg-transparent group-data-[focus=true]:bg-transparent focus-within:shadow-none`,input:`w-full h-[20px] text-[14px] leading-[20px] text-center p-0 text-default-900 bg-transparent`}})}),(0,D.jsxs)(`div`,{className:`text-sm font-semibold text-default-900`,children:[`/ `,e.count]})]}),(0,D.jsx)(`div`,{role:`button`,tabIndex:0,className:`flex h-4 w-4 cursor-pointer items-center justify-center rounded-full bg-primary dark:bg-secondary hover:opacity-80`,onClick:()=>T(e),onKeyDown:t=>{(t.key===`Enter`||t.key===` `)&&T(e)},title:`+`,children:(0,D.jsx)(r,{icon:a,className:`text-[10px] text-white`})})]}),(0,D.jsx)(h,{size:`sm`,hideStepper:!0,placeholder:`输入价格`,value:f?Number(f):void 0,onValueChange:t=>d(n=>({...n,[e.id]:t==null?``:String(t)})),radius:`sm`,classNames:{base:`h-[28px]`,inputWrapper:`bg-search-item hover:!bg-search-item transition-none group-data-[hover=true]:!bg-search-item group-data-[focus=true]:!bg-search-item group-data-[focus-visible=true]:!bg-search-item group-data-[invalid=true]:!bg-search-item h-[28px] min-h-[28px] px-2 border border-crafting-border shadow-none focus-within:shadow-none`,input:`h-[28px] text-[14px] leading-[28px]`}})]})]})]},e.id)})})}),(0,D.jsx)(`div`,{className:`relative m-2 h-[38px] rounded-lg border border-primary dark:border-crafting-border bg-crafting-sum`,children:(0,D.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,D.jsxs)(`div`,{className:`flex items-center gap-2 text-[16px] font-bold text-primary dark:text-default-800`,children:[(0,D.jsx)(r,{icon:s,className:`text-sm`}),c(`common:crafting.sumType`,`Sum: `),y[e].toLocaleString()]})})})]}),t<L.length-1&&(0,D.jsxs)(`div`,{className:`relative flex items-center justify-center`,children:[(0,D.jsx)(`div`,{className:`absolute top-0 bottom-[calc(50%+24px)] w-px bg-crafting-border`}),(0,D.jsx)(`div`,{className:`absolute top-[calc(50%+24px)] bottom-0 w-px bg-crafting-border`}),(0,D.jsx)(`div`,{className:`z-10 flex h-6 w-6 items-center justify-center rounded-full bg-primary dark:bg-secondary`,children:(0,D.jsx)(r,{icon:a,className:`text-[14px] text-white`})})]})]},e)})})}),(0,D.jsxs)(`div`,{className:`flex w-full items-center`,children:[(0,D.jsx)(`div`,{className:`flex-1 h-px bg-crafting-border`}),(0,D.jsx)(`div`,{className:`mx-1 flex h-6 w-6 items-center justify-center rounded-full bg-primary dark:bg-secondary`,children:(0,D.jsx)(r,{icon:o,className:`text-[16px] text-white`})}),(0,D.jsx)(`div`,{className:`flex-1 h-px bg-crafting-border`})]}),(0,D.jsx)(`div`,{className:`relative mt-2 h-[38px] rounded-lg border border-primary dark:border-crafting-border bg-crafting-sum`,children:(0,D.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,D.jsxs)(`div`,{className:`flex items-center gap-2 text-[16px] font-bold text-primary dark:text-default-800`,children:[(0,D.jsx)(r,{icon:s,className:`text-sm`}),c(`common:crafting.sumTotal`,`Total: `),b.toLocaleString()]})})})]})}var B=`aion2.crafting.selectedTier.v1`,V=`aion2.crafting.selectedEquipments.v1.light`,H=`aion2.crafting.selectedEquipments.v1.dark`,U=[`trueDragon`,`whiteDragon`,`wiseDragon`,`nobleDragon`],W=[`starDragon`,`darkDragon`,`ebonyDragon`,`hornedDragon`];function G(e){return e===`light`?U:W}function K(e){return e===`light`?V:H}function q(e){let t=typeof e==`number`?e:Number(e);return Number.isFinite(t)?Math.max(0,Math.floor(t)):0}function J(e){if(!e||typeof e!=`object`)return{};let t=e,n={};for(let[e,r]of Object.entries(t)){if(typeof r==`number`||r===null){n[e]={itemId:r,count:r==null?0:1};continue}if(r&&typeof r==`object`){let t=`itemId`in r&&(typeof r.itemId==`number`||r.itemId===null)?r.itemId:null;if(`count`in r){let i=q(r.count);n[e]={itemId:t,count:t==null?0:i};continue}if(`disabled`in r){let i=typeof r.disabled==`boolean`?r.disabled:!1;n[e]={itemId:t,count:t==null||i?0:1};continue}n[e]={itemId:null,count:0};continue}n[e]={itemId:null,count:0}}return n}function Y(e){try{let t=localStorage.getItem(K(e));return t?J(JSON.parse(t)):{}}catch{return{}}}function X(e){return e?Object.values(e).some(e=>e?.itemId!=null):!1}function Z(e){try{let t=localStorage.getItem(B),n=G(e);return t&&n.includes(t)?t:G(e)[0]}catch{return G(e)[0]}}function Q(){let{loading:e,tiers:t,slots:n,itemsById:r}=w(),{t:a}=x(),{theme:o,setThemeHint:s}=C(),[c,u]=(0,E.useState)(`light`),[d,f]=(0,E.useState)(0),m=(0,E.useMemo)(()=>G(c),[c]),[h,g]=(0,E.useState)(()=>Z(`light`)),[_,v]=(0,E.useState)(()=>Y(`light`));(0,E.useEffect)(()=>{localStorage.setItem(K(c),JSON.stringify(_))},[c,_]),(0,E.useEffect)(()=>{s(c===`light`?`light`:`dark`)},[c,o,s]),(0,E.useEffect)(()=>{v(Y(c));let e=m[Math.min(d,m.length-1)];g(e)},[c,m,d]),(0,E.useEffect)(()=>{localStorage.setItem(B,h)},[h]),(0,E.useEffect)(()=>{if(!t||t.length===0)return;if(!m.includes(h)){let e=m[Math.min(d,m.length-1)];g(e);return}if(t.some(e=>e.name===h))return;let e=m.find(e=>t.some(t=>t.name===e));if(e){let t=m.findIndex(t=>t===e);f(Math.max(0,t)),g(e)}},[t,m,h,d]);let b=(0,E.useRef)(X(Y(`light`)));(0,E.useEffect)(()=>{b.current=X(Y(c))},[c]),(0,E.useEffect)(()=>{if(e||!n.length)return;let i=t.find(e=>e.name===h);!i||i.items.length===0||b.current||v(e=>{let t={...e};for(let a of n){let n=e[a.key],o=a.allowed_types??[];if(o.length===0){t[a.key]={itemId:null,count:n?.count??0};continue}let s=o[0];if(n?.itemId){let e=r.get(n.itemId);e?.subtype&&(s=e.subtype)}let c=null;for(let e of i.items)if(r.get(e)?.subtype===s){c=e;break}let l=n?.count??0;t[a.key]={itemId:c,count:c==null?0:Math.max(1,l)}}return t})},[h,t,n,r,e]);function T(e){e!==c&&u(e)}function O(e){b.current=!1;let t=m.findIndex(t=>t===e);t>=0&&f(t),v({}),g(e)}return(0,D.jsxs)(`div`,{className:`grid h-full w-full bg-crafting-page`,style:{gridTemplateColumns:`1fr 1068px 1fr`},children:[(0,D.jsx)(`div`,{className:`flex items-center justify-center`,children:(0,D.jsx)(`img`,{src:S(`images/CraftAdv.webp`),alt:`Left decoration`,className:`w-[220px]`})}),(0,D.jsxs)(`div`,{className:`mx-auto w-full max-w-[1068px] pt-3`,children:[(0,D.jsxs)(`div`,{className:`mb-4 flex gap-4 pr-1`,children:[(0,D.jsx)(`div`,{className:`w-[220px] shrink-0`,children:(0,D.jsxs)(y,{selectedKey:c,onSelectionChange:e=>T(e),variant:`bordered`,className:`w-full bg-transparent`,classNames:{tabList:`flex w-full rounded-[15px] border-1 border-crafting-border `,tab:`h-[34px] flex-1 justify-center data-[selected=true]:bg-primary dark:data-[selected=true]:bg-default-800`,tabContent:`flex items-center justify-center text-default-800 group-data-[selected=true]:text-background `},children:[(0,D.jsx)(p,{title:a(`common:server.light`,`Light`)},`light`),(0,D.jsx)(p,{title:a(`common:server.dark`,`Dark`)},`dark`)]})}),(0,D.jsx)(`div`,{className:`min-w-0 flex-1`,children:(0,D.jsx)(y,{selectedKey:h,onSelectionChange:e=>O(e),variant:`underlined`,color:c==`light`?`primary`:`default`,className:`w-[832px] border-gray-300 bg-transparent`,classNames:{tabList:`flex w-full`,tab:`h-[34px] flex-1 justify-center`,tabContent:`flex items-center justify-center text-default-700`},children:m.map(e=>(0,D.jsx)(p,{title:a(`items/tiers:${e}.name`)},e))})})]}),(0,D.jsxs)(`div`,{className:`flex gap-4`,children:[(0,D.jsx)(l,{className:`h-[726px] w-[220px] shrink-0 rounded-lg border-x-1 border-primary bg-crafting-equipment-view`,shadow:`none`,children:(0,D.jsx)(i,{className:`h-full overflow-y-auto`,children:e?(0,D.jsx)(`div`,{className:`text-sm text-default-500`,children:`Loading...`}):(0,D.jsx)(M,{selectedBySlotKey:_,setSelectedBySlotKey:v,race:c})})}),(0,D.jsx)(l,{className:`h-[726px] w-[832px] min-w-0 bg-transparent`,shadow:`none`,children:(0,D.jsx)(i,{className:`h-full min-h-0 px-1 py-0`,children:(0,D.jsx)(z,{selectedBySlotKey:_})})})]})]})]})}var $=()=>(0,D.jsx)(T,{children:(0,D.jsx)(Q,{})});export{$ as component};