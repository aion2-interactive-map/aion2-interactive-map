import{s as e}from"./rolldown-runtime-Cb2Vi1zU.js";import{a as t,n}from"./vendor-react-Pim_c09P.js";import"./vendor-i18n-Bd-OtXbg.js";import{Ft as r,G as i,P as a,Pt as o,Q as s,R as c,Z as l,_t as u,bt as d,ct as f,gt as p,jt as m,nt as h,q as g,st as _,tt as v,vt as y,yt as b}from"./vendor-ui-Cb272ve3.js";import{_ as x,a as S,m as C}from"./index-DnnPxX7F.js";import"./useYamlLoader-B4LgbKZF.js";import{n as w,t as T}from"./ItemDataContext-rh5Z-M8g.js";import{t as E}from"./Footer-B_kQuCur.js";var D=e(t(),1),O=e(n(),1);function k(...e){for(let t of e)if(t&&t.trim().length>0)return t;return``}function A(e){let t=e?.itemId,n=e?.count;return{itemId:typeof t==`number`||t===null?t:null,count:typeof n==`number`&&Number.isFinite(n)?n:0}}function j(e){return!Number.isFinite(e)||e<0?0:e>99?99:Math.floor(e)}function M(e,t){return!t||e==null?!0:e===t}function N({selectedBySlotKey:e,setSelectedBySlotKey:t,race:n}){let[a,o]=(0,D.useState)(!1),[c,m]=(0,D.useState)(null),[h,S]=(0,D.useState)(``),[T,E]=(0,D.useState)(`thumbnail`),{craftingItemIdsByType:N,craftingById:P,slots:F,items:I,gradesByName:L}=w(),{t:R}=x(),z=(0,D.useMemo)(()=>c?F.find(e=>e.key===c)??null:null,[c,F]),B=(0,D.useMemo)(()=>z?.allowed_types??[],[z]);(0,D.useEffect)(()=>{if(!a)return;let e=B[0]??``;(!h||e&&!B.includes(h))&&S(e)},[a,B,h]);let V=(0,D.useMemo)(()=>h?(N.get(h)??[]).filter(e=>M(P.get(e)?.race??null,n)):[],[h,N,P,n]),H=(0,D.useMemo)(()=>{if(!z||!h)return[];let e=new Set(V);return I.filter(t=>t.subtype===h&&e.has(t.id))},[z,h,I,V]);function U(e){m(e),o(!0)}function W(e,n){t(t=>{let r=A(t[e]),i=r.count>0?r.count:1;return{...t,[e]:{...r,itemId:n,count:i}}}),o(!1)}function G(e){t(t=>{let n=A(t[e]);return{...t,[e]:{...n,itemId:null,count:0}}}),o(!1)}function K(){t(e=>{let t={};for(let n of F){let r=A(e[n.key]);t[n.key]={...r,itemId:null,count:0}}return t})}function q(e,n){t(t=>{let r=A(t[e]);if(!r.itemId)return t;let i=j(r.count+n);return{...t,[e]:{...r,count:i}}})}let J=[];J=T===`thumbnail`?F:T===`weapon_armor`?F.slice(0,10):F.slice(10,20);let Y=T===`thumbnail`?`grid grid-cols-2 gap-2`:`grid grid-cols-1 gap-2`;return(0,O.jsxs)(`div`,{className:`flex h-full w-full flex-col`,children:[(0,O.jsx)(`div`,{className:`my-3 h-[38px] text-center text-[22px] font-bold text-default-900`,children:R(`common:crafting.selectClick`,`Click to select equipment`)}),(0,O.jsx)(`div`,{className:`flex-1 overflow-y-auto no-scrollbar`,children:(0,O.jsx)(`div`,{className:`flex w-full justify-center `,children:(0,O.jsx)(`div`,{className:Y,children:J.map(t=>{let n=A(e[t.key]),r=n.itemId,a=n.count,o=r?I.find(e=>e.id===r):void 0,s=C(k(o?.icon,t.icon)),c=R(`items/types:subtypes.${t.name}.name`,t.name),l=o?R(`items/items:${o.id}.name`,String(o.id)):c,u=L.get(o?.grade||``)?.name||``,d=()=>{t.craftable&&U(t.key)},f=(0,O.jsx)(`div`,{className:`pointer-events-none flex items-center justify-center`,children:(0,O.jsxs)(`div`,{className:`pointer-events-auto flex items-center gap-2 rounded-sm bg-black/40 px-1`,children:[(0,O.jsx)(`button`,{type:`button`,onClick:e=>{e.preventDefault(),e.stopPropagation(),q(t.key,-1)},disabled:!r||a<=0,className:[`flex h-[16px] w-[16px] items-center justify-center rounded-sm`,!r||a<=0?`opacity-40`:`hover:bg-black/30`].join(` `),title:R(`common:crafting.minus`,`Minus`),children:(0,O.jsx)(v,{icon:i,className:`text-[10px] text-white`})}),(0,O.jsx)(`div`,{className:`min-w-[18px] text-center text-[12px] font-bold leading-[12px] text-white`,children:r?String(Math.max(0,a)):`0`}),(0,O.jsx)(`button`,{type:`button`,onClick:e=>{e.preventDefault(),e.stopPropagation(),q(t.key,1)},disabled:!r,className:[`flex h-[16px] w-[16px] items-center justify-center rounded-sm`,r?`hover:bg-black/30`:`opacity-40`].join(` `),title:R(`common:crafting.plus`,`Plus`),children:(0,O.jsx)(v,{icon:g,className:`text-[10px] text-white`})})]})});return T===`thumbnail`?(0,O.jsxs)(`button`,{type:`button`,onClick:d,className:`relative h-12 w-[89px] rounded-sm bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${C(`UI/Resource/Texture/ETC/UT_SlotGrade_${u}.webp`)})`,backgroundSize:`100% 100%`},title:c,children:[(0,O.jsx)(`div`,{className:`flex h-full w-full items-center justify-center rounded-sm ${r?``:`bg-[#0D0E15]`}`,children:(0,O.jsx)(`img`,{src:s,alt:t.name,className:`h-full w-full object-contain`})}),(0,O.jsx)(`div`,{className:`pointer-events-none absolute inset-x-1 top-[2px] z-20`,children:(0,O.jsx)(`div`,{className:`truncate text-center text-[12px] font-bold leading-[12px] text-white [text-shadow:0px_2px_4px_rgba(0,0,0,0.35)]`,children:c})}),o&&(0,O.jsx)(`div`,{className:`pointer-events-none absolute inset-x-0 bottom-[2px] z-20 flex justify-center`,children:f})]},t.key):(0,O.jsx)(`button`,{type:`button`,onClick:d,className:`relative h-[56px] w-[188px] rounded-sm bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${C(`UI/Resource/Texture/ETC/UT_ItemTooltipGrade_${u}.webp`)})`,backgroundSize:`100% 100%`},title:l,children:(0,O.jsxs)(`div`,{className:`flex h-full w-full items-center rounded-sm px-2 ${r?``:`bg-[#0D0E15]`}`,children:[(0,O.jsx)(`img`,{src:s,alt:t.name,className:`h-12 w-12 shrink-0 object-contain`}),(0,O.jsxs)(`div`,{className:`ml-2 flex h-[48px] min-w-0 flex-1 flex-col justify-center`,children:[(0,O.jsx)(`div`,{className:`truncate text-left text-[13px] font-bold leading-[13px] text-white [text-shadow:0px_2px_4px_rgba(0,0,0,0.35)]`,children:l}),o&&(0,O.jsx)(`div`,{className:`mt-1 flex items-center`,children:f})]})]})},t.key)})})})}),(0,O.jsx)(`div`,{className:`mt-2 w-full`,children:(0,O.jsx)(r,{size:`sm`,variant:`flat`,onPress:K,className:`h-[34px] w-full rounded-sm border-1 border-crafting-border bg-crafting-sum`,children:(0,O.jsxs)(`span`,{className:`flex w-full items-center justify-center gap-2 text-[14px] text-default-800`,children:[(0,O.jsx)(v,{icon:s}),R(`common:crafting.clearAll`,`Clear all slots`)]})})}),(0,O.jsx)(`div`,{className:`mt-2`,children:(0,O.jsxs)(f,{selectedKey:T,onSelectionChange:e=>E(e),variant:`light`,className:`w-full rounded-sm border-1 border-crafting-border bg-crafting-sum`,classNames:{tabList:`w-full flex gap-0`,tab:`h-[30px] flex-1 justify-center data-[selected=true]:bg-primary dark:data-[selected=true]:bg-default-800`,tabContent:`flex items-center justify-center text-default-800 group-data-[selected=true]:text-background`},children:[(0,O.jsx)(_,{title:(0,O.jsx)(v,{icon:l})},`thumbnail`),(0,O.jsx)(_,{title:R(`common:crafting.weaponOrArmor`,`Weapon / Armor`)},`weapon_armor`),(0,O.jsx)(_,{title:R(`common:crafting.accessory`,`Accessory`)},`accessory`)]})}),(0,O.jsx)(p,{isOpen:a,onOpenChange:e=>o(e),size:`5xl`,children:(0,O.jsx)(b,{className:`w-fit max-w-none`,children:e=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(u,{className:`flex flex-col gap-2`,children:[(0,O.jsx)(`div`,{children:R(`common:crafting.select`,`Select item`)}),z&&B.length>0?(0,O.jsx)(f,{selectedKey:h,onSelectionChange:e=>S(String(e)),variant:`underlined`,classNames:{tabList:`gap-2`,cursor:`bg-default-800`,tab:`h-8`},children:B.map(e=>(0,O.jsx)(_,{title:R(`items/types:subtypes.${e}.name`,e)},e))}):null]}),(0,O.jsx)(d,{children:z?(0,O.jsx)(`div`,{className:`flex flex-col gap-3`,children:(0,O.jsx)(`div`,{className:`max-h-[560px] overflow-y-auto`,children:(0,O.jsxs)(`div`,{className:`grid grid-cols-3 gap-5`,children:[H.map(e=>{let t=R(`items/items:${e.id}.name`,e.subtype);return(0,O.jsxs)(`button`,{type:`button`,onClick:()=>W(z.key,e.id),className:`flex items-center rounded-sm border-2 border-default bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${C(`UI/Resource/Texture/ETC/UT_ItemTooltipGrade_${L.get(e.grade)?.name}.webp`)})`,backgroundSize:`100% 100%`},title:`${e.id} (${e.subtype})`,children:[(0,O.jsx)(`img`,{src:C(e.icon),alt:String(e.id),className:`h-16 w-16 object-contain`}),(0,O.jsx)(`div`,{className:`flex h-16 w-[160px] items-center px-2 text-left text-[14px] font-bold text-white [text-shadow:0px_2px_4px_rgba(0,0,0,0.3)]`,children:t})]},e.id)}),H.length===0&&(0,O.jsx)(`div`,{className:`col-span-3 text-sm text-default-500`,children:`No craftable items match this slot’s allowed types.`})]})})}):(0,O.jsx)(`div`,{className:`text-sm text-default-500`,children:`No slot selected.`})}),(0,O.jsxs)(y,{children:[z?(0,O.jsx)(r,{variant:`flat`,color:`danger`,onPress:()=>G(z.key),children:R(`common:ui.clear`)}):null,(0,O.jsx)(r,{variant:`flat`,onPress:e,children:R(`common:ui.close`)})]})]})})})]})}function P(e){let t=Number(e);return Number.isFinite(t)?t:0}function F(e){return typeof e!=`number`||!Number.isFinite(e)?0:Math.max(0,Math.floor(e))}var I=`aion2.crafting.prices.v1`,L=`aion2.crafting.materialOwned.v1`,R=[`Equipment`,`CraftResource`,`GatherResource`];function z(e){return e===`CraftResource`?`CraftResource`:e===`GatherResource`?`GatherResource`:`Equipment`}function B({selectedBySlotKey:e}){let{craftingById:t,itemsById:n,gradesByName:r}=w(),{t:o}=x(),[s,l]=(0,D.useState)(()=>{try{let e=localStorage.getItem(I);return e?JSON.parse(e):{}}catch{return{}}});(0,D.useEffect)(()=>{localStorage.setItem(I,JSON.stringify(s))},[s]);let[u,d]=(0,D.useState)(()=>{try{let e=localStorage.getItem(L);return e?JSON.parse(e):{}}catch{return{}}});(0,D.useEffect)(()=>{localStorage.setItem(L,JSON.stringify(u))},[u]);let f=(0,D.useMemo)(()=>{let n=new Map;for(let r of Object.values(e)){if(!r)continue;let e=r.itemId??null;if(!e)continue;let i=F(r.count);if(i<=0)continue;let a=t.get(e);if(a)for(let e of a.materials??[]){let t=F(e.count??0);if(t<=0)continue;let r=n.get(e.id)??0;n.set(e.id,r+t*i)}}let r=Array.from(n.entries()).map(([e,t])=>({id:e,count:t}));return r.sort((e,t)=>e.id-t.id),r},[e,t]),p=(0,D.useMemo)(()=>{let e={Equipment:[],CraftResource:[],GatherResource:[]};for(let t of f)e[z(n.get(t.id)?.subtype)].push(t);for(let t of Object.values(e))t.sort((e,t)=>e.id-t.id);return e},[f,n]);function m(e){let t=u[e];if(t==null||t===``)return 0;let n=Number(t);return Number.isFinite(n)?Math.max(0,Math.floor(n)):0}function _(e){let t=m(e.id);return Math.max(0,e.count-t)}let y=(0,D.useMemo)(()=>{let e={Equipment:0,CraftResource:0,GatherResource:0};for(let t of R){let n=0;for(let e of p[t]){let t=_(e),r=P(s[e.id]??``);n+=t*r}e[t]=n}return e},[p,s,u]),b=(0,D.useMemo)(()=>R.reduce((e,t)=>e+y[t],0),[y]);function S(e){d(t=>{let n=m(e.id),r=Math.max(0,n-1);return{...t,[e.id]:String(r)}})}function T(e){d(t=>{let n=m(e.id)+1;return{...t,[e.id]:String(n)}})}return(0,O.jsxs)(`div`,{className:`flex h-full w-full flex-col`,children:[(0,O.jsx)(`div`,{className:`flex-1 overflow-hidden`,children:f.length===0?(0,O.jsx)(`div`,{className:`text-sm text-default-500`}):(0,O.jsx)(`div`,{className:`grid h-full min-h-0 min-w-0 grid-cols-[1fr_auto_1fr_auto_1fr] gap-3`,children:R.map((e,t)=>{let c=p[e];return(0,O.jsxs)(D.Fragment,{children:[(0,O.jsxs)(`div`,{className:`flex h-full min-h-0 flex-col rounded-lg border border-crafting-border bg-transparent`,children:[(0,O.jsx)(`div`,{className:`m-2 flex h-[38px] items-center justify-center border-b border-crafting-border px-3 py-2`,children:(0,O.jsx)(`div`,{className:`text-[16px] font-bold leading-[16px] text-default-900`,children:o(`items/types:subtypes.${e}.name`,e)})}),(0,O.jsx)(`div`,{className:`flex-1 overflow-y-auto no-scrollbar p-3`,children:(0,O.jsx)(`div`,{className:`flex flex-col gap-2`,children:c.length===0?(0,O.jsx)(`div`,{className:`text-xs text-default-500`,children:`No materials`}):c.map(e=>{let t=n.get(e.id),a=o(`items/items:${e.id}.name`,String(e.id)),c=t?.icon?C(t.icon):``,u=s[e.id]??``,f=C(`UI/Resource/Texture/ETC/UT_SlotGrade_${r.get(t?.grade||``)?.name}.webp`),p=m(e.id);return(0,O.jsxs)(`div`,{className:`flex flex-col gap-2 rounded-lg border border-default-200 bg-crafting-item p-2`,children:[(0,O.jsx)(`div`,{className:`truncate text-sm font-semibold text-default-900`,children:a}),(0,O.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,O.jsx)(`div`,{className:`flex h-12 w-12 items-center justify-center rounded-sm bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${f})`},children:c?(0,O.jsx)(`img`,{src:c,alt:a,className:`h-12 w-12 object-contain`}):(0,O.jsx)(`div`,{className:`text-xs text-default-500`,children:e.id})}),(0,O.jsxs)(`div`,{className:`flex min-w-0 flex-1 flex-col gap-2`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsx)(`div`,{role:`button`,tabIndex:0,className:`flex h-4 w-4 cursor-pointer items-center justify-center rounded-full bg-primary dark:bg-secondary hover:opacity-80`,onClick:()=>S(e),onKeyDown:t=>{(t.key===`Enter`||t.key===` `)&&S(e)},title:`-`,children:(0,O.jsx)(v,{icon:i,className:`text-[10px] text-white`})}),(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsx)(`span`,{className:`inline-flex align-middle -translate-y-[1px]`,style:{width:`${Math.max(3,String(p).length)}ch`},children:(0,O.jsx)(h,{size:`sm`,hideStepper:!0,value:p,onValueChange:t=>{let n=F(t??0);d(t=>({...t,[e.id]:n===0?``:String(n)}))},radius:`none`,classNames:{base:`w-full`,inputWrapper:`w-full bg-transparent border-0 shadow-none px-0 h-[20px] min-h-[20px] group-data-[hover=true]:bg-transparent group-data-[focus=true]:bg-transparent focus-within:shadow-none`,input:`w-full h-[20px] text-[14px] leading-[20px] text-center p-0 text-default-900 bg-transparent`}})}),(0,O.jsxs)(`div`,{className:`text-sm font-semibold text-default-900`,children:[`/ `,e.count]})]}),(0,O.jsx)(`div`,{role:`button`,tabIndex:0,className:`flex h-4 w-4 cursor-pointer items-center justify-center rounded-full bg-primary dark:bg-secondary hover:opacity-80`,onClick:()=>T(e),onKeyDown:t=>{(t.key===`Enter`||t.key===` `)&&T(e)},title:`+`,children:(0,O.jsx)(v,{icon:g,className:`text-[10px] text-white`})})]}),(0,O.jsx)(h,{size:`sm`,hideStepper:!0,placeholder:`输入价格`,value:u?Number(u):void 0,onValueChange:t=>l(n=>({...n,[e.id]:t==null?``:String(t)})),radius:`sm`,classNames:{base:`h-[28px]`,inputWrapper:`bg-search-item hover:!bg-search-item transition-none group-data-[hover=true]:!bg-search-item group-data-[focus=true]:!bg-search-item group-data-[focus-visible=true]:!bg-search-item group-data-[invalid=true]:!bg-search-item h-[28px] min-h-[28px] px-2 border border-crafting-border shadow-none focus-within:shadow-none`,input:`h-[28px] text-[14px] leading-[28px]`}})]})]})]},e.id)})})}),(0,O.jsx)(`div`,{className:`relative m-2 h-[38px] rounded-lg border border-primary dark:border-crafting-border bg-crafting-sum`,children:(0,O.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,O.jsxs)(`div`,{className:`flex items-center gap-2 text-[16px] font-bold text-primary dark:text-default-800`,children:[(0,O.jsx)(v,{icon:a,className:`text-sm`}),o(`common:crafting.sumType`,`Sum: `),y[e].toLocaleString()]})})})]}),t<R.length-1&&(0,O.jsxs)(`div`,{className:`relative flex items-center justify-center`,children:[(0,O.jsx)(`div`,{className:`absolute top-0 bottom-[calc(50%+24px)] w-px bg-crafting-border`}),(0,O.jsx)(`div`,{className:`absolute top-[calc(50%+24px)] bottom-0 w-px bg-crafting-border`}),(0,O.jsx)(`div`,{className:`z-10 flex h-6 w-6 items-center justify-center rounded-full bg-primary dark:bg-secondary`,children:(0,O.jsx)(v,{icon:g,className:`text-[14px] text-white`})})]})]},e)})})}),(0,O.jsxs)(`div`,{className:`flex w-full items-center`,children:[(0,O.jsx)(`div`,{className:`flex-1 h-px bg-crafting-border`}),(0,O.jsx)(`div`,{className:`mx-1 flex h-6 w-6 items-center justify-center rounded-full bg-primary dark:bg-secondary`,children:(0,O.jsx)(v,{icon:c,className:`text-[16px] text-white`})}),(0,O.jsx)(`div`,{className:`flex-1 h-px bg-crafting-border`})]}),(0,O.jsx)(`div`,{className:`relative mt-2 h-[38px] rounded-lg border border-primary dark:border-crafting-border bg-crafting-sum`,children:(0,O.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,O.jsxs)(`div`,{className:`flex items-center gap-2 text-[16px] font-bold text-primary dark:text-default-800`,children:[(0,O.jsx)(v,{icon:a,className:`text-sm`}),o(`common:crafting.sumTotal`,`Total: `),b.toLocaleString()]})})})]})}var V=`aion2.crafting.selectedTier.v1`,H=`aion2.crafting.selectedEquipments.v1.light`,U=`aion2.crafting.selectedEquipments.v1.dark`,W=[`trueDragon`,`whiteDragon`,`wiseDragon`,`nobleDragon`],G=[`starDragon`,`darkDragon`,`ebonyDragon`,`hornedDragon`];function K(e){return e===`light`?W:G}function q(e){return e===`light`?H:U}function J(e){let t=typeof e==`number`?e:Number(e);return Number.isFinite(t)?Math.max(0,Math.floor(t)):0}function Y(e){if(!e||typeof e!=`object`)return{};let t=e,n={};for(let[e,r]of Object.entries(t)){if(typeof r==`number`||r===null){n[e]={itemId:r,count:r==null?0:1};continue}if(r&&typeof r==`object`){let t=`itemId`in r&&(typeof r.itemId==`number`||r.itemId===null)?r.itemId:null;if(`count`in r){let i=J(r.count);n[e]={itemId:t,count:t==null?0:i};continue}if(`disabled`in r){let i=typeof r.disabled==`boolean`?r.disabled:!1;n[e]={itemId:t,count:t==null||i?0:1};continue}n[e]={itemId:null,count:0};continue}n[e]={itemId:null,count:0}}return n}function X(e){try{let t=localStorage.getItem(q(e));return t?Y(JSON.parse(t)):{}}catch{return{}}}function Z(e){return e?Object.values(e).some(e=>e?.itemId!=null):!1}function Q(e){try{let t=localStorage.getItem(V),n=K(e);return t&&n.includes(t)?t:K(e)[0]}catch{return K(e)[0]}}function $(){let{loading:e,tiers:t,slots:n,itemsById:r}=w(),{t:i}=x(),{theme:a,setThemeHint:s}=S(),[c,l]=(0,D.useState)(`light`),[u,d]=(0,D.useState)(0),p=(0,D.useMemo)(()=>K(c),[c]),[h,g]=(0,D.useState)(()=>Q(`light`)),[v,y]=(0,D.useState)(()=>X(`light`));(0,D.useEffect)(()=>{localStorage.setItem(q(c),JSON.stringify(v))},[c,v]),(0,D.useEffect)(()=>{s(c===`light`?`light`:`dark`)},[c,a,s]),(0,D.useEffect)(()=>{y(X(c));let e=p[Math.min(u,p.length-1)];g(e)},[c,p,u]),(0,D.useEffect)(()=>{localStorage.setItem(V,h)},[h]),(0,D.useEffect)(()=>{if(!t||t.length===0)return;if(!p.includes(h)){let e=p[Math.min(u,p.length-1)];g(e);return}if(t.some(e=>e.name===h))return;let e=p.find(e=>t.some(t=>t.name===e));if(e){let t=p.findIndex(t=>t===e);d(Math.max(0,t)),g(e)}},[t,p,h,u]);let b=(0,D.useRef)(Z(X(`light`)));(0,D.useEffect)(()=>{b.current=Z(X(c))},[c]),(0,D.useEffect)(()=>{if(e||!n.length)return;let i=t.find(e=>e.name===h);!i||i.items.length===0||b.current||y(e=>{let t={...e};for(let a of n){let n=e[a.key],o=a.allowed_types??[];if(o.length===0){t[a.key]={itemId:null,count:n?.count??0};continue}let s=o[0];if(n?.itemId){let e=r.get(n.itemId);e?.subtype&&(s=e.subtype)}let c=null;for(let e of i.items)if(r.get(e)?.subtype===s){c=e;break}let l=n?.count??0;t[a.key]={itemId:c,count:c==null?0:Math.max(1,l)}}return t})},[h,t,n,r,e]);function T(e){e!==c&&l(e)}function k(e){b.current=!1;let t=p.findIndex(t=>t===e);t>=0&&d(t),y({}),g(e)}return(0,O.jsxs)(`div`,{className:`flex h-full w-full flex-col bg-crafting-page overflow-y-auto`,children:[(0,O.jsxs)(`div`,{className:`grid w-full flex-1`,style:{gridTemplateColumns:`1fr 1068px 1fr`},children:[(0,O.jsx)(`div`,{className:`hidden lg:flex items-center justify-center`,children:(0,O.jsx)(`img`,{src:C(`images/CraftAdv.webp`),alt:`Left decoration`,className:`w-[220px]`})}),(0,O.jsxs)(`div`,{className:`mx-auto w-full max-w-[1068px] pt-3 px-4 sm:px-0`,children:[(0,O.jsxs)(`div`,{className:`mb-4 flex flex-col md:flex-row gap-4 md:pr-1`,children:[(0,O.jsx)(`div`,{className:`w-full md:w-[220px] shrink-0`,children:(0,O.jsxs)(f,{selectedKey:c,onSelectionChange:e=>T(e),variant:`bordered`,className:`w-full bg-transparent`,classNames:{tabList:`flex w-full rounded-[15px] border-1 border-crafting-border `,tab:`h-[34px] flex-1 justify-center data-[selected=true]:bg-primary dark:data-[selected=true]:bg-default-800`,tabContent:`flex items-center justify-center text-default-800 group-data-[selected=true]:text-background `},children:[(0,O.jsx)(_,{title:i(`common:server.light`,`Light`)},`light`),(0,O.jsx)(_,{title:i(`common:server.dark`,`Dark`)},`dark`)]})}),(0,O.jsx)(`div`,{className:`min-w-0 flex-1`,children:(0,O.jsx)(f,{selectedKey:h,onSelectionChange:e=>k(e),variant:`underlined`,color:c==`light`?`primary`:`default`,className:`w-full md:w-[832px] border-gray-300 bg-transparent`,classNames:{tabList:`flex w-full overflow-x-auto no-scrollbar`,tab:`h-[34px] flex-1 min-w-[100px] justify-center`,tabContent:`flex items-center justify-center text-default-700`},children:p.map(e=>(0,O.jsx)(_,{title:i(`items/tiers:${e}.name`)},e))})})]}),(0,O.jsxs)(`div`,{className:`flex flex-col md:flex-row gap-4 mb-8`,children:[(0,O.jsx)(m,{className:`h-auto md:h-[726px] w-full md:w-[220px] shrink-0 rounded-lg border-x-1 border-primary bg-crafting-equipment-view`,shadow:`none`,children:(0,O.jsx)(o,{className:`h-full overflow-y-auto py-4 md:py-2`,children:e?(0,O.jsx)(`div`,{className:`text-sm text-default-500`,children:`Loading...`}):(0,O.jsx)(N,{selectedBySlotKey:v,setSelectedBySlotKey:y,race:c})})}),(0,O.jsx)(m,{className:`h-auto md:h-[726px] w-full md:w-[832px] min-w-0 bg-transparent`,shadow:`none`,children:(0,O.jsx)(o,{className:`h-full min-h-0 px-1 py-0`,children:(0,O.jsx)(B,{selectedBySlotKey:v})})})]})]})]}),(0,O.jsx)(E,{})]})}var ee=()=>(0,O.jsx)(T,{children:(0,O.jsx)($,{})});export{ee as component};