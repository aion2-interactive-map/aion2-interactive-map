import{s as e}from"./rolldown-runtime-Cb2Vi1zU.js";import{a as t,n}from"./vendor-react-Pim_c09P.js";import"./vendor-i18n-6EkUXbUY.js";import{At as r,Bt as i,Dt as a,Et as o,Ft as s,Gt as c,Ht as l,It as u,Jt as d,Kt as f,Lt as p,O as m,Rt as h,Tt as g,Ut as _,W as v,Wt as y,Xt as b,Yt as x,Z as S,ct as C,j as w,kt as T,lt as E,qt as D,rt as O,st as k,zt as A}from"./vendor-ui-D9UFAGky.js";import{d as j,f as M,g as N,m as P,p as ee,r as te,t as ne,u as re,v as F}from"./index-C41YiAZj.js";import{n as ie,r as ae,s as I,t as L}from"./lodash-BZbUDrl7.js";import{n as R,t as z}from"./ItemDataContext-BBi9_caD.js";import{n as oe,t as se}from"./ClassDataContext-OfKUdeIr.js";import{t as B}from"./AdaptiveTooltip-5ggeRGfx.js";import{t as ce}from"./Footer-Bg_T7QZF.js";var V=e(t(),1),H=e(n(),1),le=(0,V.createContext)(null);const ue=({children:e})=>{let[t,n]=(0,V.useState)([]),[r,i]=(0,V.useState)(!0),a=te();return(0,V.useEffect)(()=>{let e=!1;async function t(){try{let t=await a(`data/servers.yaml`);if(e)return;n(t.servers??[])}catch(e){console.error(e)}finally{e||i(!1)}}return t(),()=>{e=!0}},[a]),(0,H.jsx)(le.Provider,{value:{servers:t,loading:r},children:e})};function de(){let e=(0,V.useContext)(le);if(!e)throw Error(`useServerData must be used inside <ServerDataProvider>`);return e}var fe=(0,V.createContext)(null);async function pe(e){let t=ee()+`/characters/info?server=${e.serverId}&character=${encodeURIComponent(e.characterId)}&region=${e.region}`,n=await fetch(t,{method:`GET`});if(!n.ok)throw Error(`Search failed: ${n.status}`);let r=await n.json();if(r?.errorCode&&r.errorCode!==`Success`)throw Error(r.errorMessage||`API Error`);return r?.data}const me=({children:e})=>{let t=re({from:ne.fullPath}),n=j({from:ne.fullPath}),[r,i]=(0,V.useState)(n.serverId??null),[a,o]=(0,V.useState)(n.characterId??null),[s,c]=(0,V.useState)(n.region??null),[l,u]=(0,V.useState)(null),[d,f]=(0,V.useState)(null),[p,m]=(0,V.useState)(null),[h,g]=(0,V.useState)(null),[_,v]=(0,V.useState)(null),[y,b]=(0,V.useState)([]),[x,S]=(0,V.useState)(!1),[C,w]=(0,V.useState)(!1),[T,E]=(0,V.useState)(null),D=V.useRef(null),O=te();(0,V.useEffect)(()=>{let e=!1;async function t(){try{let t=await O(`data/stats.yaml`);if(e)return;v(t)}catch{e||E(`Failed to load stats data`)}}return t(),()=>{e=!0}},[O]),(0,V.useEffect)(()=>{let e=!1;async function t(){try{let t=await O(`data/skills.yaml`);if(e)return;b(t.skills??[])}catch{e||E(`Failed to load skills data`)}}return t(),()=>{e=!0}},[O]);let k=(0,V.useMemo)(()=>{let e=new Map;for(let t of y)e.set(t.id,t);return e},[y]);(0,V.useEffect)(()=>{i(n.serverId??null),o(n.characterId??null),c(n.region??null)},[n.serverId,n.characterId,n.region]);let A=(0,V.useCallback)(e=>{i(e.serverId),o(e.characterId),c(e.region),u(null),f(null),m(null),g(null),E(null);try{let t=localStorage.getItem(ie),n=t?JSON.parse(t):[];n=n.filter(t=>{let n=t.serverId??t.item?.serverId??(t.id?t.serverId:void 0),r=t.id??t.characterId??t.item?.id;return!(n===e.serverId&&r===e.characterId)}),e.item?n.unshift(e.item):n.unshift(e),n.length>20&&(n=n.slice(0,20)),localStorage.setItem(ie,JSON.stringify(n))}catch(e){console.error(`Failed to update character history`,e)}t({replace:!1,search:t=>({...t,serverId:e.serverId,characterId:e.characterId,region:e.region})})},[t]),M=(0,V.useCallback)(()=>{i(null),o(null),c(null),u(null),f(null),m(null),g(null),E(null),S(!1),t({replace:!1,search:e=>({...e,serverId:void 0,characterId:void 0,region:void 0})})},[t]);(0,V.useEffect)(()=>{let e=!1,t=()=>{D.current&&=(D.current.close(),null),w(!1)};async function n(){if(!r||!a||!s){u(null),f(null),m(null),g(null),S(!1),E(null),t();return}S(!0),E(null);try{let n=await pe({serverId:r,characterId:a,region:s});if(e)return;c(n);let i=n.status;i!==`cached`&&i!==`failed`?d(r,a,s):t(),S(!1)}catch(n){if(e)return;E(n instanceof Error?n.message:String(n)),S(!1),t()}}function i(e,t){return e?.profile?{profile:e.profile,stats:e.stats||[],titles:e.titles||[],rankings:e.rankings||[],boards:e.boards||[],updatedAt:t?new Date(t*1e3).toISOString():new Date().toISOString()}:null}function o(e){return{skills:(e?.skills||[]).map(e=>({id:e.id,skillLevel:e.skillLevel,acquired:e.acquired,equip:e.equip})),equipments:(e?.equipments||[]).map(e=>({id:e.id,enchantLevel:e.enchantLevel,exceedLevel:e.exceedLevel,slotPos:e.slotPos,slotPosName:e.slotPosName})),skins:(e?.skins||[]).map(e=>({id:e.id,name:e.name,slotPos:e.slotPos,slotPosName:e.slotPosName?.includes(`Main`)?`MainHand`:e.slotPosName,icon:e.icon})),pet:e?.pet?{id:e.pet.id,name:e.pet.name,level:e.pet.level,icon:e.pet.icon}:null,wing:e?.wing?{id:e.wing.id,name:e.wing.name,grade:e.wing.grade,icon:e.wing.icon}:null}}function c(e){let t=e.items||{},n=e.meta||{};if(t.info){let e=i(t.info,n.updatedAt);e&&u(e)}t.equipments&&f(o(t.equipments));let r=Object.entries(t).filter(([e])=>e.startsWith(`equipments:`)).reduce((e,[t,n])=>(e[t]=n,e),{});Object.keys(r).length>0&&m(r);let a=Object.entries(t).filter(([e])=>e.startsWith(`boards:`)).reduce((e,[t,n])=>(e[t]=n,e),{});Object.keys(a).length>0&&g(a)}async function l(t,n,r){w(!0);try{let i=await pe({serverId:t,characterId:n,region:r});if(e)return;c(i);let a=i.status;a!==`cached`&&a!==`failed`?d(t,n,r):w(!1)}catch(e){console.error(`Re-fetch failed`,e),w(!1)}}function d(n,r,a){t(),w(!0);let s=P()+`/characters/ws?server=${n}&character=${encodeURIComponent(r)}&region=${a}`,c=new WebSocket(s);D.current=c,c.onmessage=e=>{try{let t=JSON.parse(e.data);if(!t||!t.key)return;let n=t.key,r=t.value;if(n===`info`){let e=i(r,t.updated_at);e&&u(e)}else n===`equipments`?f(o(r)):n.startsWith(`equipments:`)?m(e=>({...e||{},[n]:r})):n.startsWith(`boards:`)&&g(e=>({...e||{},[n]:r}))}catch(e){console.error(`WS parse error`,e)}},c.onclose=()=>{e||(D.current=null,setTimeout(()=>{e||l(n,r,a)},1e3))},c.onerror=e=>{console.error(`WS Error:`,e)}}return n(),()=>{e=!0,t()}},[r,a,s]);let N=(0,V.useMemo)(()=>({serverId:r,characterId:a,region:s,info:l,equipments:d,equipmentDetails:p,boardDetails:h,stats:_,skills:y,skillsById:k,loading:x,isUpdating:C,error:T,selectCharacter:A,clearSelection:M}),[r,a,s,l,d,p,h,_,k,x,C,T,A,M]);return(0,H.jsx)(fe.Provider,{value:N,children:e})};function U(){let e=(0,V.useContext)(fe);if(!e)throw Error(`useCharacter must be used inside <CharacterProvider>`);return e}var he=(0,V.createContext)(null);const ge=({children:e})=>{let[t,n]=(0,V.useState)([]),[r,i]=(0,V.useState)(!1),[a,o]=(0,V.useState)(null),s=te(),c=(0,V.useCallback)(async e=>{if(e){i(!0),o(null);try{n((await s(`data/boards/${e}.yaml`)).boards??[])}catch(t){console.error(`Failed to load boards for class ${e}:`,t),o(`Failed to load boards for class ${e}`),n([])}finally{i(!1)}}},[s]);return(0,H.jsx)(he.Provider,{value:{boards:t,loading:r,error:a,loadBoardsForClass:c},children:e})};function _e(){let e=(0,V.useContext)(he);if(!e)throw Error(`useBoardData must be used inside <BoardDataProvider>`);return e}function ve(e,t){let[n,r]=(0,V.useState)(e);return(0,V.useEffect)(()=>{let n=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(n)}},[e,t]),n}function ye(){let{servers:e,loading:t}=de(),{selectCharacter:n,characterId:r,region:i}=U(),{t:a}=F(),[o,s]=(0,V.useState)(i||`tw`),[u,d]=(0,V.useState)(`1`),[p,m]=(0,V.useState)(`all`),[g,_]=(0,V.useState)(``),v=ve(g,300),[y,b]=(0,V.useState)(!1),[x,w]=(0,V.useState)([]),[T,A]=(0,V.useState)([]),[j,M]=(0,V.useState)([]),N=(0,V.useRef)(0);(0,V.useEffect)(()=>{let e=localStorage.getItem(ie);if(e)try{A(JSON.parse(e).filter(e=>e.name).map(e=>({...e,region:e.region||`tw`})).filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id&&t.serverId===e.serverId)))}catch(e){console.error(`Failed to parse character history`,e)}let t=localStorage.getItem(ae);if(t)try{M(JSON.parse(t).map(e=>({...e,region:e.region||`tw`})))}catch(e){console.error(`Failed to parse starred characters`,e)}},[r]),(0,V.useEffect)(()=>{i&&s(i)},[i]);let P=(0,V.useMemo)(()=>{let t=Number(u);return e.filter(e=>e.raceId===t)},[e,u]);(0,V.useEffect)(()=>{p!==`all`&&(P.some(e=>String(e.serverId)===p)||m(`all`))},[P,p]),(0,V.useEffect)(()=>{let t=v.trim(),n=Number(u),r=p===`all`?void 0:Number(p),i=t.match(/^(.+)\[(.+)]$/);if(i){let[,a,o]=i,s=e.find(e=>e.serverShortName===o||e.serverName===o);s&&(t=a,n=s.raceId,r=s.serverId)}if(w([]),!t||!n)return;let a=++N.current;(async()=>{try{b(!0);let e=await te({keyword:t,raceId:n,serverId:r,region:o});if(N.current!==a)return;w(e)}catch(e){console.error(e),N.current===a&&w([])}finally{N.current===a&&b(!1)}})()},[v,u,p,o,e]);async function te(e){let t=ee()+`/characters/search?race=${e.raceId}&keyword=${encodeURIComponent(e.keyword)}&region=${e.region}`,n=e.serverId?`${t}&server=${e.serverId}`:t,r=await fetch(n,{method:`GET`});if(!r.ok)throw Error(`Search failed: ${r.status}`);return((await r.json()).data?.results??[]).map(t=>({...t,region:e.region}))}let ne=(0,V.useCallback)((e,t,n)=>{let r=n%1e3;return`${e} (${t===1?a(`common:server.lightAbbr`,`Light `):a(`common:server.darkAbbr`,`Dark `)}${r})`},[a]),re=(0,V.useMemo)(()=>{let e=[{key:`all`,label:a(`common:server.allServers`,`All servers`)}];for(let t of P)e.push({key:String(t.serverId),label:ne(t.serverName,t.raceId,t.serverId)});return e},[P,a,ne]),I=`
    !bg-character-card hover:!bg-character-card focus:!bg-character-card !transition-none 
    border-crafting-border border-1 sm:border-r-0
    shadow-none rounded-sm sm:rounded-none
    group-data-[hover=true]:!bg-character-card
    group-data-[focus=true]:!bg-character-card
    group-data-[focus-visible=true]:!bg-character-card
    group-data-[invalid=true]:!bg-character-card
  `,L={inputWrapper:I,innerWrapper:`h-10 py-0`,popoverContent:`rounded-none p-0`},R={trigger:I,innerWrapper:`h-10 py-0`,popoverContent:`rounded-none p-0`},z={itemClasses:{base:`rounded-none`}},oe=(0,V.useCallback)((e,t)=>{e.stopPropagation(),M(e=>{let n=e.some(e=>e.id===t.id),r;return r=n?e.filter(e=>e.id!==t.id):[t,...e],localStorage.setItem(ae,JSON.stringify(r)),r})},[]),se=(e,t)=>(0,H.jsx)(l,{isPressable:!0,onPress:()=>n({serverId:e.serverId,characterId:e.id,region:e.region,item:e}),className:`bg-character-card border-1 border-crafting-border hover:border-primary transition-colors`,shadow:`sm`,children:(0,H.jsxs)(c,{className:`p-3 overflow-hidden relative`,children:[(0,H.jsx)(f,{isIconOnly:!0,variant:`light`,size:`sm`,className:`absolute top-1 right-1 z-10 min-w-0 w-8 h-8`,onClick:t=>oe(t,e),children:(0,H.jsx)(O,{icon:S,className:j.some(t=>t.id===e.id)?`text-star`:`text-default-300`})}),(0,H.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,H.jsx)(`img`,{src:`https://profileimg.plaync.com${e.profileImageUrl}`,alt:e.name,className:`w-[48px] h-[48px] object-cover rounded-md shrink-0`,draggable:!1}),(0,H.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,H.jsx)(`div`,{className:`flex justify-between items-baseline gap-1`,children:(0,H.jsx)(`span`,{className:`truncate text-base font-bold text-foregound`,children:e.name})}),(0,H.jsxs)(`div`,{className:`truncate text-sm text-default-800 mt-0.5`,children:[e.serverName,` | Lv.`,e.level]})]})]})]})},`${t}-${e.id}`);return r?(0,H.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-2 sm:gap-0 items-stretch sm:items-end w-full justify-end`,children:[(0,H.jsxs)(`div`,{className:`flex flex-row gap-2 sm:gap-0 flex-none sm:flex-none`,children:[(0,H.jsxs)(C,{placeholder:a(`common:server.region`,`Region`),isRequired:!0,selectedKeys:new Set([o]),onSelectionChange:e=>{let t=e.currentKey;t&&s(String(t))},className:`flex-1 sm:w-[100px] sm:flex-none`,radius:`none`,popoverProps:{radius:`none`},listboxProps:z,classNames:R,children:[(0,H.jsx)(E,{children:a(`common:server.tw`,`台服`)},`tw`),(0,H.jsx)(E,{children:a(`common:server.kr`,`韩服`)},`kr`)]}),(0,H.jsxs)(C,{placeholder:a(`common:server.race`,`Race`),isRequired:!0,selectedKeys:new Set([u]),onSelectionChange:e=>{let t=e.currentKey;(t===`1`||t===`2`)&&d(t)},className:`flex-1 sm:w-[100px] sm:flex-none`,radius:`none`,popoverProps:{radius:`none`},listboxProps:z,classNames:R,children:[(0,H.jsx)(E,{children:a(`common:server.light`,`Light`)},`1`),(0,H.jsx)(E,{children:a(`common:server.dark`,`Dark`)},`2`)]}),(0,H.jsx)(C,{placeholder:a(`common:server.server`,`Server`),isRequired:!1,isDisabled:t||P.length===0,items:re,selectedKeys:new Set([p]),onSelectionChange:e=>{let t=e.currentKey;m(t?String(t):`all`)},className:`flex-[2] sm:w-[160px] sm:flex-none`,renderValue:e=>e[0]?.textValue??``,radius:`none`,popoverProps:{radius:`none`},listboxProps:z,classNames:R,children:e=>(0,H.jsx)(E,{textValue:e.label,children:e.label},e.key)})]}),(0,H.jsx)(k,{placeholder:a(`common:server.search`,`Type to search...`),inputValue:g,onInputChange:_,onSelectionChange:e=>{let t=x.find(t=>t.id===e);t&&n({serverId:t.serverId,characterId:t.id,region:t.region,item:t})},isDisabled:t,isLoading:y,items:x,className:`flex-[2] w-full sm:w-[180px] sm:flex-none`,radius:`none`,popoverProps:{radius:`none`},listboxProps:z,inputProps:{classNames:{...L,inputWrapper:L.inputWrapper+`!border-r-1`}},children:e=>(0,H.jsx)(E,{textValue:e.name,children:(0,H.jsxs)(`div`,{className:`flex items-center gap-2 w-full`,children:[(0,H.jsx)(`img`,{src:`https://profileimg.plaync.com${e.profileImageUrl}`,alt:e.name,className:`w-[40px] h-[40px] object-cover rounded-md shrink-0`,draggable:!1}),(0,H.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,H.jsxs)(`div`,{className:`flex justify-between text-sm font-medium`,children:[(0,H.jsx)(`span`,{className:`truncate text-default-800`,children:e.name}),(0,H.jsxs)(`span`,{className:`shrink-0 text-default-600`,children:[`Lv.`,e.level]})]}),(0,H.jsx)(`div`,{className:`truncate text-xs text-default-700`,children:e.serverName})]})]})},e.id)})]}):(0,H.jsxs)(`div`,{className:`flex flex-col w-full space-y-8 pt-10 min-h-[600px]`,children:[(0,H.jsxs)(`div`,{className:`flex flex-col`,children:[(0,H.jsx)(`h1`,{className:`text-[22px] font-bold text-foreground`,children:`搜寻AION2角色`}),(0,H.jsx)(`p`,{className:`text-[14px] text-default-800 mt-2`,children:`查詢角色詳細資訊`})]}),(0,H.jsxs)(`div`,{className:`flex flex-col items-center w-full space-y-4 max-w-2xl mx-auto`,children:[(0,H.jsx)(h,{placeholder:a(`common:server.search`,`Type to search...`),value:g,onValueChange:_,classNames:{inputWrapper:I+`!border-r-1`,input:`text-lg`},size:`lg`,radius:`sm`,isClearable:!0}),(0,H.jsxs)(`div`,{className:`flex flex-row w-full gap-2 sm:gap-4`,children:[(0,H.jsxs)(C,{placeholder:a(`common:server.region`,`Publisher`),isRequired:!0,selectedKeys:new Set([o]),onSelectionChange:e=>{let t=e.currentKey;t&&s(String(t))},className:`flex-1`,radius:`sm`,classNames:{trigger:I+`!border-r-1`,popoverContent:`rounded-none p-0`},popoverProps:{radius:`none`},listboxProps:z,size:`lg`,children:[(0,H.jsx)(E,{children:a(`common:server.tw`,`台服`)},`tw`),(0,H.jsx)(E,{children:a(`common:server.kr`,`韩服`)},`kr`)]}),(0,H.jsxs)(C,{placeholder:a(`common:server.race`,`Race`),isRequired:!0,selectedKeys:new Set([u]),onSelectionChange:e=>{let t=e.currentKey;(t===`1`||t===`2`)&&d(t)},className:`flex-1`,radius:`sm`,classNames:{trigger:I+`!border-r-1`,popoverContent:`rounded-none p-0`},popoverProps:{radius:`none`},listboxProps:z,size:`lg`,children:[(0,H.jsx)(E,{children:a(`common:server.light`,`Light`)},`1`),(0,H.jsx)(E,{children:a(`common:server.dark`,`Dark`)},`2`)]}),(0,H.jsx)(C,{placeholder:a(`common:server.server`,`Server`),isRequired:!1,isDisabled:t||P.length===0,items:re,selectedKeys:new Set([p]),onSelectionChange:e=>{let t=e.currentKey;m(t?String(t):`all`)},className:`flex-[2]`,renderValue:e=>e[0]?.textValue??``,radius:`sm`,classNames:{trigger:I+`!border-r-1`,popoverContent:`rounded-none p-0`},popoverProps:{radius:`none`},listboxProps:z,size:`lg`,children:e=>(0,H.jsx)(E,{textValue:e.label,children:e.label},e.key)})]})]}),(0,H.jsxs)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 w-full`,children:[x.map(e=>se(e,`search`)),y&&(0,H.jsx)(`div`,{className:`col-span-full flex justify-center py-10`,children:(0,H.jsx)(D,{color:`primary`,label:a(`common:server.searching`,`Searching characters...`)})}),!y&&g.trim()!==``&&x.length===0&&(0,H.jsx)(`div`,{className:`col-span-full flex justify-center py-10`,children:(0,H.jsx)(`span`,{className:`text-default-800`,children:a(`common:server.noResults`,{keyword:g})})})]}),j.length>0&&(0,H.jsxs)(`div`,{className:`flex flex-col space-y-4`,children:[(0,H.jsx)(`h2`,{className:`text-[18px] font-bold text-foreground`,children:a(`common:server.starred`,`Favorites`)}),(0,H.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 w-full`,children:j.map(e=>se(e,`starred`))})]}),T.length>0&&(0,H.jsxs)(`div`,{className:`flex flex-col space-y-4`,children:[(0,H.jsx)(`h2`,{className:`text-[18px] font-bold text-foreground`,children:a(`common:server.history`,`Search History`)}),(0,H.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 w-full`,children:T.map(e=>se(e,`history`))})]})]})}function be(){let{info:e}=U(),{classes:t}=oe();return(0,V.useMemo)(()=>{if(!e?.boards||e.boards.length===0)return null;let n=e.boards[0].id,r=Math.floor(n/10);return t.find(e=>e.order===r)?.name||null},[e?.boards,t])}var xe=e(L(),1),Se=e(L(),1),Ce=V.memo(()=>{let{info:e,isUpdating:t}=U();if(!e)return null;let n=(0,Se.keyBy)(e.stats,`type`);return(0,H.jsx)(l,{className:`shadow-none bg-character-input border-1 border-crafting-border rounded-lg`,children:(0,H.jsxs)(c,{className:`flex flex-col items-center gap-2`,children:[(0,H.jsx)(`div`,{className:`w-[72px] h-[72px] rounded-full overflow-hidden bg-default-100 flex justify-center items-center`,children:(0,H.jsx)(`img`,{src:e.profile.profileImage,alt:`avatar`,className:`w-full h-full object-cover`,draggable:!1})}),(0,H.jsxs)(`div`,{className:`w-full text-center text-default-800`,children:[(0,H.jsxs)(`div`,{className:`text-[18px]`,children:[e.profile.characterName,e.profile.titleName?(0,H.jsxs)(`span`,{className:`text-grade-${(0,xe.lowerCase)(e.profile.titleGrade)}`,children:[` [`,e.profile.titleName,`]`]}):null]}),(0,H.jsxs)(`div`,{className:`mt-2 text-[14px] flex flex-wrap justify-center items-center gap-x-2 gap-y-1 text-default-800`,children:[(0,H.jsx)(`span`,{children:e.profile.raceName}),(0,H.jsx)(`span`,{children:`|`}),(0,H.jsx)(`span`,{children:e.profile.serverName}),(0,H.jsx)(`span`,{children:`|`}),(0,H.jsx)(`span`,{children:e.profile.className}),(0,H.jsx)(`span`,{children:`|`}),e.profile.regionName?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`span`,{children:e.profile.regionName}),(0,H.jsx)(`span`,{children:`|`})]}):null,(0,H.jsxs)(`span`,{className:`font-semibold`,children:[`战力值`,n.ItemLevel?.value??`-`]}),(0,H.jsx)(`span`,{children:`|`}),t?(0,H.jsxs)(`span`,{className:`flex items-center gap-1`,children:[(0,H.jsx)(`span`,{children:`更新中`}),(0,H.jsx)(D,{size:`sm`,className:`scale-75 origin-left`})]}):(0,H.jsxs)(`span`,{children:[`更新于 `,M(e.updatedAt).fromNow()]})]})]})]})})}),we=e(L(),1),Te=V.memo(()=>{let{info:e,stats:t}=U(),{t:n}=F(),[r,i]=(0,V.useState)(!0);if(!e||!t)return null;let a=(0,we.keyBy)(e.stats,`type`),o=e=>{let r=t[e];return(0,H.jsx)(`div`,{className:`grid grid-cols-6 gap-1 sm:gap-3`,children:r?.map((t,r)=>{let i=((a[t.type]?.value??0)*(e===`mainStats`?.1:.2)).toFixed(1),o=n(`stats:${t.type}.name`),s=n(`stats:${t.type}.description`,``);return(0,H.jsx)(B,{content:(0,H.jsxs)(`div`,{className:`px-1 py-1`,children:[(0,H.jsxs)(`div`,{className:`flex justify-between items-center mb-1 gap-4`,children:[(0,H.jsxs)(`span`,{className:`font-bold text-default-800`,children:[o,s&&`[${s}]`]}),(0,H.jsx)(`span`,{className:`font-bold text-foreground`,children:a[t.type]?.value??`-`})]}),t.secondStats?.map((e,t)=>(0,H.jsxs)(`div`,{className:`flex justify-between gap-4`,children:[(0,H.jsx)(`span`,{className:`text-default-800`,children:n(`stats:${e.type}.name`)}),(0,H.jsxs)(`span`,{className:`font-bold`,children:[e.type===`CooldownDecrease`||e.type===`MPCostDecrease`?`-`:`+`,i,`%`]})]},t))]}),placement:`top`,radius:`sm`,delay:0,closeDelay:0,children:(0,H.jsxs)(`div`,{className:`text-center bg-character-card rounded-md border-1 border-crafting-border p-1 sm:p-2 cursor-help outline-none focus-visible:ring-2 focus-visible:ring-primary`,tabIndex:0,children:[(0,H.jsx)(`div`,{className:`w-full max-w-[60px] aspect-square mx-auto rounded-lg overflow-hidden`,children:(0,H.jsx)(`img`,{src:N(t.icon),alt:t.type,className:`w-full h-full object-cover`,draggable:!1})}),(0,H.jsx)(`div`,{className:`text-[12px] sm:text-[18px] text-default-800 truncate`,children:n(`stats:${t.type}.name`)}),(0,H.jsx)(`div`,{className:`text-[12px] sm:text-[18px] text-default-800 font-semibold`,children:a[t.type]?.value??`-`})]})},r)})})};return(0,H.jsxs)(l,{className:`shadow-none bg-character-input border-1 border-crafting-border rounded-lg`,children:[(0,H.jsxs)(c,{className:`space-y-4`,children:[(0,H.jsx)(`div`,{className:`mb-0`,children:o(`mainStats`)}),!r&&(0,H.jsx)(`div`,{className:`mt-3`,children:o(`lordStats`)})]}),(0,H.jsx)(b,{}),(0,H.jsx)(y,{className:`p-0`,children:(0,H.jsxs)(f,{variant:`light`,disableRipple:!0,disableAnimation:!0,onPress:()=>i(!r),className:`
            w-full text-default-700 gap-2 shadow-none bg-transparent
            hover:bg-transparent active:bg-transparent focus:bg-transparent focus-visible:bg-transparent
            data-[hover=true]:bg-transparent data-[pressed=true]:bg-transparent data-[focus-visible=true]:bg-transparent
          `,size:`md`,radius:`none`,children:[r?n(`common:menu.expand`,`Expand`):n(`common:menu.collapse`,`Collapse`),(0,H.jsx)(O,{icon:r?m:w})]})})]})}),Ee=V.memo(()=>{let{equipments:e,skillsById:t}=U(),{t:n}=F(),r=r=>{let i=(e?.skills??[]).filter(e=>t.get(e.id)?.category===r)??[];return(0,H.jsxs)(`div`,{className:`flex gap-0 border-1 border-crafting-border bg-character-card rounded-lg`,children:[(0,H.jsx)(`div`,{className:`w-[38px] shrink-0 flex items-center justify-center border-r-1 border-crafting-border`,children:(0,H.jsx)(`div`,{className:`w-[18px] text-center text-[18px] font-semibold text-default-700 break-words`,children:n(`common:skills.category.${r.toLowerCase()}`,r)})}),(0,H.jsx)(`div`,{className:`flex flex-wrap gap-3 p-3`,children:i.map(e=>{let r=t.get(e.id),i=r?.icon?N(`UI/Resource/Texture/Skill/${r.icon}`):void 0;return(0,H.jsx)(B,{content:(0,H.jsxs)(`div`,{className:`px-1 py-1`,children:[(0,H.jsx)(`div`,{className:`text-small font-bold`,children:n(`skills:${e.id}.name`,String(e.id))}),(0,H.jsx)(`div`,{className:`text-tiny`,children:e.skillLevel===0?`未解锁`:`Lv.${e.skillLevel}`})]}),placement:`top`,radius:`sm`,delay:0,closeDelay:0,children:(0,H.jsxs)(`div`,{className:`relative h-[48px] w-[48px] overflow-hidden rounded-md cursor-help outline-none focus-visible:ring-2 focus-visible:ring-primary`,tabIndex:0,children:[i?(0,H.jsx)(`img`,{src:i,alt:String(e.id),className:`h-full w-full object-cover ${e.skillLevel===0?`grayscale brightness-50`:``}`,draggable:!1}):(0,H.jsx)(`div`,{className:`h-full w-full bg-default-200`}),e.skillLevel===0?(0,H.jsx)(`div`,{className:`absolute inset-0 bg-black/20 flex items-center justify-center text-white/80`,children:(0,H.jsx)(O,{icon:v})}):(0,H.jsxs)(`div`,{className:`absolute bottom-0 right-0 bg-black/60 text-white text-[14px] px-1 rounded-tl-md`,children:[`LV`,e.skillLevel]})]})},String(e.id))})})]})};return(0,H.jsxs)(`div`,{className:`space-y-4`,children:[r(`Active`),r(`Passive`),r(`Dp`)]})}),De=V.memo(()=>{let{info:e}=U();return!e||!e.rankings||e.rankings.length===0?(0,H.jsx)(`div`,{className:`flex justify-center items-center py-4 w-full`,children:(0,H.jsx)(D,{size:`sm`})}):(0,H.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 gap-3 w-full`,children:e.rankings.map((e,t)=>(0,H.jsx)(l,{className:`shadow-none bg-character-card border-1 border-crafting-border rounded-lg`,children:(0,H.jsxs)(c,{className:`p-2 flex flex-row items-center gap-3`,children:[(0,H.jsxs)(`div`,{className:`flex flex-col flex-1 min-w-0 justify-between h-full`,children:[(0,H.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,H.jsxs)(`span`,{className:`text-[18px] text-primary`,children:[`第 `,e.rank??`-`,` 名`]}),e.rankChange!==null&&e.rankChange!==0&&!isNaN(e.rankChange)&&(0,H.jsx)(`span`,{className:`text-[14px] ${e.rankChange>0?`text-danger`:`text-success`}`,children:e.rankChange>0?`↓ ${e.rankChange}`:`↑ ${Math.abs(e.rankChange)}`})]}),(0,H.jsx)(`div`,{className:`text-[14px] text-default-800`,children:e.rankingContentsName})]}),(0,H.jsxs)(`div`,{className:`flex flex-col items-center shrink-0 justify-between h-full`,children:[e.gradeIcon&&(0,H.jsx)(`img`,{src:e.gradeIcon,alt:e.gradeName||`grade`,className:`w-10 h-10 object-contain`}),e.point!==null&&(0,H.jsx)(`div`,{className:`text-[12px] text-default-800 font-medium`,children:e.point})]})]})},t))})});function Oe(){let[e,t]=(0,V.useState)(!1);return(0,V.useEffect)(()=>{let e=window.matchMedia(`(max-width: 767px)`);t(e.matches);let n=e=>t(e.matches);return e.addEventListener(`change`,n),()=>e.removeEventListener(`change`,n)},[]),e}var W=e(L(),1),ke=[`MainHand`,`SubHand`,`Helmet`,`Shoulder`,`Torso`,`Belt`,`Pants`,`Gloves`,`Boots`,`Cape`],Ae=[`Earring1`,`Earring2`,`Necklace`,`Amulet`,`Ring1`,`Ring2`,`Bracelet1`,`Bracelet2`,`Rune1`,`Rune2`],je=V.memo(()=>{let{equipments:e,equipmentDetails:t}=U(),{itemsById:n}=R(),{t:r}=F(),i=Oe(),a=(0,W.keyBy)(e?.equipments??[],`slotPosName`),o=(0,W.keyBy)(e?.skins??[],`slotPosName`),s=e=>e===0?(0,H.jsx)(`div`,{className:`h-[16px] w-[16px] shrink-0`}):(0,H.jsx)(`div`,{className:`mt-2 flex items-center justify-start gap-0`,children:Array.from({length:5}).map((t,n)=>(0,H.jsx)(`div`,{className:`h-[16px] w-[16px] overflow-hidden rounded-sm flex justify-center items-center`,children:n<e&&(0,H.jsx)(`img`,{src:N(`UI/Resource/Texture/Icon/UT_NP_QuestMonolith_Acquired.webp`),alt:`exceed-level`,className:`h-full w-full object-contain`,style:{objectFit:`contain`,objectPosition:`0% 50%`,transform:`scale(3)`},draggable:!1})},n))}),c=e=>{let c=a[e],l=o[e],u=c?.slotPos||l?.slotPos,d=u?t?.[`equipments:${u}`]:null,f=(c?n.get(c.id):null)||(d?n.get(d.id):null),p=N(`UI/Resource/Texture/ETC/UT_ItemTooltipGrade_${f?.grade??`Common`}.webp`),m=N(f?.icon||``),h=r(`items/items:${f?.id||c?.id}.name`,String(f?.id||c?.id||``));return(0,H.jsx)(B,{content:d?(0,H.jsxs)(`div`,{className:`space-y-2 w-full text-[14px]`,children:[(0,H.jsx)(`div`,{className:`font-bold text-[18px] text-center pb-1`,children:`装备详情`}),(0,H.jsxs)(`div`,{className:`p-2 rounded flex justify-between items-center bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${p})`,backgroundSize:`100% 100%`},children:[(0,H.jsxs)(`div`,{className:`flex flex-col justify-between h-full`,children:[(0,H.jsxs)(`div`,{className:`mb-1 text-[18px] font-bold text-stroke text-grade-${(0,W.lowerCase)(f?.grade||`Common`)}`,children:[c?.enchantLevel?`+${c.enchantLevel} `:``,h]}),(0,H.jsxs)(`div`,{className:`text-[14px]`,children:[(0,H.jsx)(`span`,{className:`font-bold text-stroke text-grade-${(0,W.lowerCase)(f?.grade||`Common`)}`,children:r(`items/grades:${f?.grade}.name`)}),(0,H.jsx)(`span`,{className:`font-bold text-background`,children:r(`items/types:subtypes.${f?.subtype}.name`)})]}),(0,H.jsx)(`div`,{className:`text-[14px] font-bold text-background`,children:`道具等级`}),(0,H.jsxs)(`div`,{className:`text-[14px] font-bold text-background`,children:[d.level,` (+`,d.levelValue,`)`]})]}),(0,H.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,H.jsx)(`div`,{className:`relative`,children:(0,H.jsx)(`img`,{src:m,alt:h,className:`w-16 h-16 object-contain`})}),s(c?.exceedLevel||0)]})]}),d.mainStats&&d.mainStats.length>0&&(0,H.jsx)(`div`,{className:`bg-character-card p-2 rounded space-y-1`,children:d.mainStats.map((e,t)=>(0,H.jsxs)(`div`,{className:`flex justify-between`,children:[(0,H.jsx)(`span`,{className:`${e.exceed?`text-grade-epic`:`text-default-800`} font-[700]`,children:r(`stats:${e.id}.name`,e.id)}),(0,H.jsxs)(`span`,{className:`text-foreground font-[700]`,children:[!e.exceed&&(e.minValue&&e.minValue!==``?`${e.minValue} - ${e.value}`:e.value),e.extra!==`0`&&e.extra!==`0%`&&(e.exceed?(0,H.jsx)(`span`,{className:`text-grade-epic ml-1`,children:e.extra}):(0,H.jsxs)(`span`,{className:`text-grade-rare ml-1`,children:[`(+`,e.extra,`)`]}))]})]},`${e.id}-${t}`))}),(d.subStats&&d.subStats.length>0||d.subSkills&&d.subSkills.length>0)&&(0,H.jsxs)(`div`,{className:`bg-character-card p-2 rounded space-y-1`,children:[(0,H.jsx)(A,{"aria-label":`Loading...`,color:`primary`,value:Number(d.soulBindRate),label:`灵魂刻印率`,valueLabel:`${d.soulBindRate}%`,showValueLabel:!0,classNames:{label:`text-[14px] text-default-800 font-[700]`,value:`text-[14px] text-foreground font-[700]`,base:`gap-0.5`},size:`sm`}),d.subStats&&d.subStats.map((e,t)=>(0,H.jsxs)(`div`,{className:`flex justify-between`,children:[(0,H.jsx)(`span`,{className:`text-default-800 font-[700]`,children:r(`stats:${e.id}.name`,e.id)}),(0,H.jsx)(`span`,{className:`text-foreground font-[700]`,children:e.value})]},`${e.id}-${t}`)),d.subSkills&&d.subSkills.map((e,t)=>(0,H.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,H.jsx)(`span`,{className:`text-default-800 font-[700]`,children:r(`skills:${e.id}.name`,String(e.id))}),(0,H.jsxs)(`span`,{className:`text-foreground font-[700]`,children:[`Lv.+`,e.level]})]},`${e.id}-${t}`))]}),d.magicStoneStat?.length>0&&(0,H.jsx)(`div`,{className:`pt-1`,children:(0,H.jsx)(`div`,{className:`bg-character-card p-2 rounded grid grid-cols-2 gap-x-4 gap-y-1`,children:d.magicStoneStat.map((e,t)=>(0,H.jsxs)(`div`,{className:`flex justify-between text-grade-${(0,W.lowerCase)(e.grade)}`,children:[(0,H.jsx)(`span`,{className:`font-[700] whitespace-nowrap`,children:r(`stats:${e.id}.name`,e.id)}),(0,H.jsx)(`span`,{className:`font-[700]`,children:e.value})]},t))})}),d.godStoneStat?.length>0&&(0,H.jsx)(`div`,{className:`pt-1 space-y-1`,children:(0,H.jsx)(`div`,{className:`bg-character-card p-2 rounded space-y-1`,children:d.godStoneStat.map((e,t)=>(0,H.jsxs)(`div`,{className:`flex flex-col`,children:[(0,H.jsx)(`div`,{className:`flex justify-between items-center`,children:(0,H.jsx)(`span`,{className:`text-grade-${(0,W.lowerCase)(e.grade)} font-[700]`,children:e.name})}),(0,H.jsx)(`div`,{className:`text-default-800 text-[12px] mt-1`,children:e.desc})]},t))})})]}):(0,H.jsx)(`div`,{className:`flex justify-center items-center py-2`,children:(0,H.jsx)(D,{size:`sm`})}),classNames:{content:`bg-character-equipment shadow-none px-2 py-4 w-[330px] max-w-[calc(100vw-32px)]`},placement:i?`bottom`:`left`,radius:`lg`,isDisabled:!c,delay:0,closeDelay:0,children:(0,H.jsx)(`div`,{className:`relative h-14 bg-contain bg-center bg-no-repeat rounded-sm shadow-none cursor-help outline-none focus-visible:ring-2 focus-visible:ring-primary`,style:{backgroundImage:`url(${p})`,backgroundSize:`100% 100%`},tabIndex:0,children:(0,H.jsxs)(`div`,{className:`flex h-full w-full items-center rounded-[4px] px-2`,children:[(0,H.jsx)(`div`,{className:`relative shrink-0`,children:c||d?(0,H.jsx)(`img`,{src:m,alt:h,className:`h-12 w-12 object-contain`,draggable:!1}):(0,H.jsx)(`div`,{className:`h-12 w-12`})}),(0,H.jsxs)(`div`,{className:`ml-2 flex h-[48px] min-w-0 flex-1 flex-col justify-center`,children:[(0,H.jsx)(`div`,{className:`truncate text-left text-[13px] font-bold leading-[13px] text-white [text-shadow:0px_2px_4px_rgba(0,0,0,0.35)]`,children:c||d?`${h} +${c?.enchantLevel??d?.enchantLevel??0}`:``}),s(c?.exceedLevel||0)]}),l&&(0,H.jsx)(B,{content:l.name,placement:`top`,radius:`sm`,children:(0,H.jsx)(`div`,{className:`ml-2 shrink-0`,children:(0,H.jsx)(`img`,{src:l.icon,alt:l.name,className:`w-10 h-10 object-contain border-1 bg-transparent border-primary`,draggable:!1})})})]})})},e)};return(0,H.jsxs)(`div`,{className:`space-y-3`,children:[(0,H.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,H.jsx)(`div`,{className:`flex flex-col gap-3`,children:ke.map(e=>c(e))}),(0,H.jsx)(`div`,{className:`flex flex-col gap-3`,children:Ae.map(e=>c(e))})]}),(0,H.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[e?.pet?.id&&(0,H.jsxs)(`div`,{className:`relative h-[56px] bg-character-card border-1 border-crafting-border rounded-md flex items-center px-2`,children:[(0,H.jsx)(`img`,{src:e.pet.icon,alt:e.pet.name,className:`h-12 w-12 shrink-0 object-contain rounded-md`,draggable:!1}),(0,H.jsxs)(`div`,{className:`ml-2 flex flex-col justify-center min-w-0`,children:[(0,H.jsx)(`div`,{className:`truncate text-[14px] font-bold text-default-800`,children:e.pet.name}),(0,H.jsxs)(`div`,{className:`text-[12px] text-default-600`,children:[`Lv.`,e.pet.level]})]})]}),e?.wing?.id&&(0,H.jsxs)(`div`,{className:`relative h-[56px] bg-character-card border-1 border-crafting-border rounded-md flex items-center px-2`,children:[(0,H.jsx)(`img`,{src:e.wing.icon,alt:e.wing.name,className:`h-12 w-12 shrink-0 object-contain rounded-md`,draggable:!1}),(0,H.jsxs)(`div`,{className:`ml-2 flex flex-col justify-center min-w-0`,children:[(0,H.jsx)(`div`,{className:`truncate text-[14px] font-bold text-grade-${(0,W.lowerCase)(e.wing.grade)}`,children:e.wing.name}),(0,H.jsx)(`div`,{className:`text-[12px] text-default-600`,children:r(`items/grades:${e.wing.grade}.name`,e.wing.grade)})]})]})]})]})}),Me=e(L(),1),Ne=V.memo(()=>{let{equipments:e,equipmentDetails:t}=U(),{itemsById:n}=R(),{t:r}=F(),i=(0,Me.keyBy)(e?.equipments??[],`slotPos`);return(0,H.jsx)(`div`,{className:`grid grid-cols-5 w-full gap-2 sm:gap-4 justify-items-center`,children:[41,42,43,44,45].map(e=>{let a=i[e],o=t?.[`equipments:${e}`],s=(a?n.get(a.id):null)||(o?n.get(o.id):null),c=N(s?.icon||``),l=r(`items/items:${s?.id||a?.id}.name`,String(s?.id||a?.id||``)),u=N(`UI/Resource/Texture/ETC/UT_ItemTooltipGrade_${s?.grade??`Common`}.webp`);return(0,H.jsx)(B,{content:o?(0,H.jsxs)(`div`,{className:`space-y-2 w-full text-[14px]`,children:[(0,H.jsx)(`div`,{className:`font-bold text-[18px] text-center pb-1`,children:`装备详情`}),(0,H.jsxs)(`div`,{className:`p-2 rounded flex justify-between items-center bg-contain bg-center bg-no-repeat`,style:{backgroundImage:`url(${u})`,backgroundSize:`100% 100%`},children:[(0,H.jsxs)(`div`,{className:`flex flex-col justify-between h-full`,children:[(0,H.jsxs)(`div`,{className:`mb-1 text-[18px] font-bold text-stroke text-grade-${(0,Me.lowerCase)(s?.grade||`Common`)}`,children:[a?.enchantLevel?`+${a.enchantLevel} `:``,l]}),(0,H.jsx)(`div`,{className:`text-[14px]`,children:(0,H.jsx)(`span`,{className:`font-bold text-stroke text-grade-${(0,Me.lowerCase)(s?.grade||`Common`)}`,children:r(`items/grades:${s?.grade}.name`)})}),(0,H.jsx)(`div`,{className:`text-[14px] font-bold text-background`,children:`道具等级`}),(0,H.jsxs)(`div`,{className:`text-[14px] font-bold text-background`,children:[o.level,` (+`,o.levelValue,`)`]})]}),(0,H.jsx)(`div`,{className:`flex flex-col items-center`,children:(0,H.jsx)(`div`,{className:`relative`,children:(0,H.jsx)(`img`,{src:c,alt:l,className:`w-16 h-16 object-contain`})})})]}),(0,H.jsxs)(`div`,{className:`bg-character-card p-2 rounded space-y-1`,children:[o.mainStats&&o.mainStats.length>0&&o.mainStats.map((e,t)=>(0,H.jsxs)(`div`,{className:`flex justify-between`,children:[(0,H.jsx)(`span`,{className:`${e.exceed?`text-grade-epic`:`text-default-800`} font-[700]`,children:r(`stats:${e.id}.name`,e.id)}),(0,H.jsxs)(`span`,{className:`text-foreground font-[700]`,children:[!e.exceed&&(e.minValue&&e.minValue!==``?`${e.minValue} - ${e.value}`:e.value),e.extra!==`0`&&e.extra!==`0%`&&(e.exceed?(0,H.jsx)(`span`,{className:`text-grade-epic ml-1`,children:e.extra}):(0,H.jsxs)(`span`,{className:`text-grade-rare ml-1`,children:[`(+`,e.extra,`)`]}))]})]},`${e.id}-${t}`)),o.subSkills&&o.subSkills.length>0&&o.subSkills.map((e,t)=>(0,H.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,H.jsx)(`span`,{className:`text-default-800 font-[700]`,children:r(`skills:${e.id}.name`,String(e.id))}),(0,H.jsxs)(`span`,{className:`text-foreground font-[700]`,children:[`Lv.+`,e.level]})]},`${e.id}-${t}`))]})]}):(0,H.jsx)(`div`,{className:`flex justify-center items-center py-2`,children:(0,H.jsx)(D,{size:`sm`})}),isDisabled:!a,placement:`top`,classNames:{content:`bg-character-equipment rounded-lg shadow-none px-2 py-4 w-[330px] max-w-[calc(100vw-32px)]`},delay:0,closeDelay:0,children:(0,H.jsx)(`div`,{className:`relative flex justify-center items-start cursor-help outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-lg w-full max-w-24 aspect-square`,tabIndex:0,children:a?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`img`,{src:c,alt:l,className:`object-contain rounded-lg w-full h-full`,draggable:!1}),(0,H.jsxs)(`div`,{className:`absolute left-1/2 -translate-x-1/2 bottom-[4px] text-white bg-black/60 px-2 rounded-lg text-[14px] font-bold pointer-events-none`,children:[`+`,a?.enchantLevel??0]})]}):(0,H.jsx)(`div`,{className:`bg-default-800 rounded-lg w-full h-full relative`,children:(0,H.jsx)(`div`,{className:`absolute inset-0 bg-black/20 flex items-center justify-center text-white/80 rounded-lg`,children:(0,H.jsx)(O,{icon:v,size:`xl`})})})})},e)})})}),Pe=e(L(),1),Fe=V.memo(()=>{let{info:e}=U(),{t}=F();if(!e)return null;let n=[`Attack`,`Defense`,`Etc`],r=[`UT_Stat_GrowthSummary_Title_First.webp`,`UT_Stat_GrowthSummary_Title_Second.webp`,`UT_Stat_GrowthSummary_Title_Third.webp`];return(0,H.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-3 gap-4`,children:n.map((n,i)=>{let a=e.titles?.find(e=>e.equipCategory===n);return(0,H.jsxs)(l,{className:`shadow-none bg-character-card border-1 border-crafting-border rounded-lg overflow-hidden`,children:[(0,H.jsxs)(_,{className:`flex gap-3 p-3 bg-character-input border-b-1 border-crafting-border`,children:[(0,H.jsx)(`div`,{className:`h-10 w-10 shrink-0 overflow-hidden rounded-full bg-foreground p-1 flex items-center justify-center`,children:(0,H.jsx)(`img`,{src:N(`UI/Resource/Texture/ETC/${r[i]}`),alt:n,draggable:!1,className:`h-full w-full object-contain scale-125`})}),(0,H.jsxs)(`div`,{className:`flex flex-col gap-0.5 text-[14px]`,children:[(0,H.jsx)(`p`,{className:`text-default-800`,children:t(`common:titles.${n}`,n)}),(0,H.jsxs)(`p`,{className:`text-default-700`,children:[(0,H.jsx)(`span`,{className:`text-foreground font-bold`,children:a?.ownedCount??0}),` / `,a?.totalCount??0]})]})]}),(0,H.jsxs)(c,{className:`p-3`,children:[(0,H.jsx)(`div`,{className:`text-[15px] font-bold mb-1 text-grade-${(0,Pe.lowerCase)(a?.grade||`Common`)}`,children:a?.name||`尚未装备`}),(0,H.jsx)(`div`,{className:`space-y-0.5`,children:a?.equipStats&&a?.equipStats.map((e,t)=>(0,H.jsx)(`div`,{className:`text-[13px] text-default-800`,children:e},t))})]})]},n)})})}),G=function(e,t){return Number(e.toFixed(t))},Ie=function(e,t){return typeof e==`number`?e:t},K=function(e,t,n){n&&typeof n==`function`&&n(e,t)},Le={easeOut:function(e){return-Math.cos(e*Math.PI)/2+.5},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},Re=function(e){typeof e==`number`&&cancelAnimationFrame(e)},q=function(e){e.mounted&&(Re(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function ze(e,t,n,r){if(e.mounted){var i=new Date().getTime(),a=1;q(e),e.animation=function(){if(!e.mounted)return Re(e.animation);var o=new Date().getTime()-i,s=o/n,c=Le[t],l=c(s);o>=n?(r(a),e.animation=null):e.animation&&(r(l),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function Be(e){var t=e.scale,n=e.positionX,r=e.positionY;return!(Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(r))}function J(e,t,n,r){var i=Be(t);if(!(!e.mounted||!i)){var a=e.setTransformState,o=e.transformState,s=o.scale,c=o.positionX,l=o.positionY,u=t.scale-s,d=t.positionX-c,f=t.positionY-l;n===0?a(t.scale,t.positionX,t.positionY):ze(e,r,n,function(e){a(s+u*e,c+d*e,l+f*e)})}}function Ve(e,t,n){var r=e.offsetWidth,i=e.offsetHeight,a=t.offsetWidth,o=t.offsetHeight,s=a*n,c=o*n;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:s,newDiffWidth:r-s,newContentHeight:c,newDiffHeight:i-c}}var He=function(e,t,n,r,i,a,o){var s=e>t?n*(o?1:.5):0,c=r>i?a*(o?1:.5):0;return{minPositionX:e-t-s,maxPositionX:s,minPositionY:r-i-c,maxPositionY:c}},Ue=function(e,t){var n=e.wrapperComponent,r=e.contentComponent,i=e.setup.centerZoomedOut;if(!n||!r)throw Error(`Components are not mounted`);var a=Ve(n,r,t),o=a.wrapperWidth,s=a.wrapperHeight,c=a.newContentWidth,l=a.newDiffWidth,u=a.newContentHeight,d=a.newDiffHeight;return He(o,c,l,s,u,d,!!i)},We=function(e,t,n,r){return G(r?e<t?t:e>n?n:e:e,2)},Y=function(e,t){var n=Ue(e,t);return e.bounds=n,n};function X(e,t,n,r,i,a,o){var s=n.minPositionX,c=n.minPositionY,l=n.maxPositionX,u=n.maxPositionY,d=0,f=0;return o&&(d=i,f=a),{x:We(e,s-d,l+d,r),y:We(t,c-f,u+f,r)}}function Ge(e,t,n,r,i,a){var o=e.transformState,s=o.scale,c=o.positionX,l=o.positionY,u=r-s;return typeof t!=`number`||typeof n!=`number`?(console.error(`Mouse X and Y position were not provided!`),{x:c,y:l}):X(c-t*u,l-n*u,i,a,0,0,null)}function Ke(e,t,n,r,i){var a=t-(i?r:0);return!Number.isNaN(n)&&e>=n?n:!Number.isNaN(t)&&e<=a?a:e}var qe=function(e,t){var n=e.setup.panning.excluded,r=e.isInitialized,i=e.wrapperComponent,a=t.target,o=`shadowRoot`in a&&`composedPath`in t?t.composedPath().some(function(e){return e instanceof Element?i?.contains(e):!1}):i?.contains(a);return!(!(r&&a&&o)||Ft(a,n))},Je=function(e){var t=e.isInitialized,n=e.isPanning,r=e.setup.panning.disabled;return!!(t&&n&&!r)},Ye=function(e,t){var n=e.transformState,r=n.positionX,i=n.positionY;e.isPanning=!0;var a=t.clientX,o=t.clientY;e.startCoords={x:a-r,y:o-i}},Xe=function(e,t){var n=t.touches,r=e.transformState,i=r.positionX,a=r.positionY;if(e.isPanning=!0,n.length===1){var o=n[0].clientX,s=n[0].clientY;e.startCoords={x:o-i,y:s-a}}};function Ze(e){var t=e.transformState,n=t.positionX,r=t.positionY,i=t.scale,a=e.setup,o=a.disabled,s=a.limitToBounds,c=a.centerZoomedOut,l=e.wrapperComponent;if(!(o||!l||!e.bounds)){var u=e.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,m=u.minPositionY,h=n>d||n<f,g=r>p||r<m,_=Ge(e,n>d?l.offsetWidth:e.setup.minPositionX||0,r>p?l.offsetHeight:e.setup.minPositionY||0,i,e.bounds,s||c),v=_.x,y=_.y;return{scale:i,positionX:h?v:n,positionY:g?y:r}}}function Qe(e,t,n,r,i){var a=e.setup.limitToBounds,o=e.wrapperComponent,s=e.bounds,c=e.transformState,l=c.scale,u=c.positionX,d=c.positionY;if(!(o===null||s===null||t===u&&n===d)){var f=X(t,n,s,a,r,i,o),p=f.x,m=f.y;e.setTransformState(l,p,m)}}var $e=function(e,t,n){var r=e.startCoords,i=e.transformState,a=e.setup.panning,o=a.lockAxisX,s=a.lockAxisY,c=i.positionX,l=i.positionY;if(!r)return{x:c,y:l};var u=t-r.x,d=n-r.y;return{x:o?c:u,y:s?l:d}},Z=function(e,t){var n=e.setup,r=e.transformState.scale,i=n.minScale,a=n.disablePadding;return t>0&&r>=i&&!a?t:0},et=function(e){var t=e.mounted,n=e.setup,r=n.disabled,i=n.velocityAnimation,a=e.transformState.scale;return!!(!i.disabled||a>1||!r||t)},tt=function(e){var t=e.mounted,n=e.velocity,r=e.bounds,i=e.setup,a=i.disabled,o=i.velocityAnimation,s=e.transformState.scale;return!(!(!o.disabled||s>1||!a||t)||!n||!r)};function nt(e,t){var n=e.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,a=n.sensitivity;return r?i*t*a:i}function rt(e,t,n,r,i,a,o,s,c,l){if(i){if(t>o&&n>o){var u=o+(e-o)*l;return u>c?c:u<o?o:u}if(t<a&&n<a){var u=a+(e-a)*l;return u<s?s:u>a?a:u}}return r?t:We(e,a,o,i)}function it(e,t){var n=1;return t?Math.min(n,e.offsetWidth/window.innerWidth):n}function at(e,t){if(et(e)){var n=e.lastMousePosition,r=e.velocityTime,i=e.setup,a=e.wrapperComponent,o=i.velocityAnimation.equalToMove,s=Date.now();if(n&&r&&a){var c=it(a,o),l=t.x-n.x,u=t.y-n.y,d=l/c,f=u/c,p=s-r,m=l*l+u*u;e.velocity={velocityX:d,velocityY:f,total:Math.sqrt(m)/p}}e.lastMousePosition=t,e.velocityTime=s}}function ot(e){var t=e.velocity,n=e.bounds,r=e.setup,i=e.wrapperComponent;if(!(!tt(e)||!t||!n||!i)){var a=t.velocityX,o=t.velocityY,s=t.total,c=n.maxPositionX,l=n.minPositionX,u=n.maxPositionY,d=n.minPositionY,f=r.limitToBounds,p=r.alignmentAnimation,m=r.zoomAnimation,h=r.panning,g=h.lockAxisY,_=h.lockAxisX,v=m.animationType,y=p.sizeX,b=p.sizeY,x=p.velocityAlignmentTime,S=nt(e,s),C=Math.max(S,x),w=Z(e,y),T=Z(e,b),E=w*i.offsetWidth/100,D=T*i.offsetHeight/100,O=c+E,k=l-E,A=u+D,j=d-D,M=e.transformState,N=new Date().getTime();ze(e,v,C,function(t){var n=e.transformState,r=n.scale,i=n.positionX,s=n.positionY,m=(new Date().getTime()-N)/x,h=Le[p.animationType],v=1-h(Math.min(1,m)),y=1-t,b=i+a*y,S=s+o*y,C=rt(b,M.positionX,i,_,f,l,c,k,O,v),w=rt(S,M.positionY,s,g,f,d,u,j,A,v);(i!==b||s!==S)&&e.setTransformState(r,C,w)})}}function st(e,t){var n=e.transformState.scale;q(e),Y(e,n),window.TouchEvent!==void 0&&t instanceof TouchEvent?Xe(e,t):Ye(e,t)}function ct(e,t){var n=e.transformState.scale,r=e.setup,i=r.minScale,a=r.alignmentAnimation,o=a.disabled,s=a.sizeX,c=a.sizeY,l=a.animationTime,u=a.animationType;if(!(o||n<i||!s&&!c)){var d=Ze(e);d&&J(e,d,t??l,u)}}function lt(e,t,n){var r=e.startCoords,i=e.setup.alignmentAnimation,a=i.sizeX,o=i.sizeY;if(r){var s=$e(e,t,n),c=s.x,l=s.y,u=Z(e,a),d=Z(e,o);at(e,{x:c,y:l}),Qe(e,c,l,u,d)}}function ut(e){if(e.isPanning){var t=e.setup.panning.velocityDisabled,n=e.velocity,r=e.wrapperComponent,i=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var a=r?.getBoundingClientRect(),o=i?.getBoundingClientRect(),s=a?.width||0,c=a?.height||0,l=o?.width||0,u=o?.height||0,d=s<l||c<u;!t&&n&&n?.total>.1&&d?ot(e):ct(e)}}function dt(e,t,n,r){var i=e.setup,a=i.minScale,o=i.maxScale,s=i.limitToBounds,c=Ke(G(t,2),a,o,0,!1),l=Ge(e,n,r,c,Y(e,c),s);return{scale:c,positionX:l.x,positionY:l.y}}function ft(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,a=e.setup,o=a.minScale,s=a.limitToBounds,c=a.zoomAnimation,l=c.disabled,u=c.animationTime,d=c.animationType,f=l||r>=o;if((r>=1||s)&&ct(e),!(f||!i||!e.mounted)){var p=dt(e,o,t||i.offsetWidth/2,n||i.offsetHeight/2);p&&J(e,p,u,d)}}var Q=function(){return Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Q.apply(this,arguments)};function pt(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var mt={previousScale:1,scale:1,positionX:0,positionY:0},ht={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:`zoomIn`,animationType:`easeOut`,animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:`easeOut`},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:`easeOut`},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:`easeOut`,equalToMove:!0}},gt={wrapperClass:`react-transform-wrapper`,contentClass:`react-transform-component`},_t=function(e){return{previousScale:e.initialScale??mt.scale,scale:e.initialScale??mt.scale,positionX:e.initialPositionX??mt.positionX,positionY:e.initialPositionY??mt.positionY}},vt=function(e){var t=Q({},ht);return Object.keys(e).forEach(function(n){var r=e[n]!==void 0;if(ht[n]!==void 0&&r){var i=Object.prototype.toString.call(ht[n]);i===`[object Object]`?t[n]=Q(Q({},ht[n]),e[n]):i===`[object Array]`?t[n]=pt(pt([],ht[n],!0),e[n],!0):t[n]=e[n]}}),t},yt=function(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,a=e.setup,o=a.maxScale,s=a.minScale,c=a.zoomAnimation,l=a.smooth,u=c.size;if(!i)throw Error(`Wrapper is not mounted`);return Ke(G(l?r*Math.exp(t*n):r+t*n,3),s,o,u,!1)};function bt(e,t,n,r,i){var a=e.wrapperComponent,o=e.transformState,s=o.scale,c=o.positionX,l=o.positionY;if(!a)return console.error(`No WrapperComponent found`);var u=a.offsetWidth,d=a.offsetHeight,f=(u/2-c)/s,p=(d/2-l)/s,m=dt(e,yt(e,t,n),f,p);if(!m)return console.error(`Error during zoom event. New transformation state was not calculated.`);J(e,m,r,i)}function xt(e,t,n,r){var i=e.setup,a=e.wrapperComponent,o=i.limitToBounds,s=_t(e.props),c=e.transformState,l=c.scale,u=c.positionX,d=c.positionY;if(a){var f=Ue(e,s.scale),p=X(s.positionX,s.positionY,f,o,0,0,a),m={scale:s.scale,positionX:p.x,positionY:p.y};l===s.scale&&u===s.positionX&&d===s.positionY||(r?.(),J(e,m,t,n))}}function St(e,t,n,r){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=n.getBoundingClientRect(),s=a.x*r.scale,c=a.y*r.scale;return{x:(i.x-o.x+s)/r.scale,y:(i.y-o.y+c)/r.scale}}function Ct(e,t,n){var r=e.wrapperComponent,i=e.contentComponent,a=e.transformState,o=e.setup,s=o.limitToBounds,c=o.minScale,l=o.maxScale;if(!r||!i)return a;var u=r.getBoundingClientRect(),d=t.getBoundingClientRect(),f=St(t,r,i,a),p=f.x,m=f.y,h=d.width/a.scale,g=d.height/a.scale,_=r.offsetWidth/h,v=r.offsetHeight/g,y=Ke(n||Math.min(_,v),c,l,0,!1),b=(u.width-h*y)/2,x=(u.height-g*y)/2,S=X((u.left-p)*y+b,(u.top-m)*y+x,Ue(e,y),s,0,0,r);return{positionX:S.x,positionY:S.y,scale:y}}var wt=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r=`easeOut`),bt(e,1,t,n,r)}},Tt=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r=`easeOut`),bt(e,-1,t,n,r)}},Et=function(e){return function(t,n,r,i,a){i===void 0&&(i=300),a===void 0&&(a=`easeOut`);var o=e.transformState,s=o.positionX,c=o.positionY,l=o.scale,u=e.wrapperComponent,d=e.contentComponent;e.setup.disabled||!u||!d||J(e,{positionX:Number.isNaN(t)?s:t,positionY:Number.isNaN(n)?c:n,scale:Number.isNaN(r)?l:r},i,a)}},Dt=function(e){return function(t,n){t===void 0&&(t=200),n===void 0&&(n=`easeOut`),xt(e,t,n)}},Ot=function(e){return function(t,n,r){n===void 0&&(n=200),r===void 0&&(r=`easeOut`);var i=e.transformState,a=e.wrapperComponent,o=e.contentComponent;a&&o&&J(e,Rt(t||i.scale,a,o),n,r)}},kt=function(e){return function(t,n,r,i){r===void 0&&(r=600),i===void 0&&(i=`easeOut`),q(e);var a=e.wrapperComponent,o=typeof t==`string`?document.getElementById(t):t;a&&o&&a.contains(o)&&J(e,Ct(e,o,n),r,i)}},At=function(e){return{instance:e,zoomIn:wt(e),zoomOut:Tt(e),setTransform:Et(e),resetTransform:Dt(e),centerView:Ot(e),zoomToElement:kt(e)}},jt=function(e){return{instance:e,state:e.transformState}},$=function(e){var t={};return Object.assign(t,jt(e)),Object.assign(t,At(e)),t},Mt=!1;function Nt(){try{return{get passive(){return Mt=!0,!1}}}catch{return Mt=!1,Mt}}var Pt=`.${gt.wrapperClass}`,Ft=function(e,t){return t.some(function(t){return e.matches(`${Pt} ${t}, ${Pt} .${t}, ${Pt} ${t} *, ${Pt} .${t} *`)})},It=function(e){e&&clearTimeout(e)},Lt=function(e,t,n){return`translate(${e}px, ${t}px) scale(${n})`},Rt=function(e,t,n){var r=n.offsetWidth*e,i=n.offsetHeight*e;return{scale:e,positionX:(t.offsetWidth-r)/2,positionY:(t.offsetHeight-i)/2}};function zt(e){return function(t){e.forEach(function(e){typeof e==`function`?e(t):e!=null&&(e.current=t)})}}var Bt=function(e,t){var n=e.setup.wheel,r=n.disabled,i=n.wheelDisabled,a=n.touchPadDisabled,o=n.excluded,s=e.isInitialized,c=e.isPanning,l=t.target;return!(!(s&&!c&&!r&&l)||i&&!t.ctrlKey||a&&t.ctrlKey||Ft(l,o))},Vt=function(e){return e?e.deltaY<0?1:-1:0};function Ht(e,t){return Ie(t,Vt(e))}function Ut(e,t,n){var r=t.getBoundingClientRect(),i=0,a=0;if(`clientX`in e)i=(e.clientX-r.left)/n,a=(e.clientY-r.top)/n;else{var o=e.touches[0];i=(o.clientX-r.left)/n,a=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(a))&&console.error(`No mouse or touch offset found`),{x:i,y:a}}var Wt=function(e,t,n,r,i){var a=e.transformState.scale,o=e.wrapperComponent,s=e.setup,c=s.maxScale,l=s.minScale,u=s.zoomAnimation,d=s.disablePadding,f=u.size,p=u.disabled;if(!o)throw Error(`Wrapper is not mounted`);var m=a+t*n;if(i)return m;var h=r?!1:!p;return Ke(G(m,3),l,c,f,h&&!d)},Gt=function(e,t){var n=e.previousWheelEvent,r=e.transformState.scale,i=e.setup,a=i.maxScale,o=i.minScale;return n?r<a||r>o||Math.sign(n.deltaY)!==Math.sign(t.deltaY)||n.deltaY>0&&n.deltaY<t.deltaY||n.deltaY<0&&n.deltaY>t.deltaY||Math.sign(n.deltaY)!==Math.sign(t.deltaY):!1},Kt=function(e,t){var n=e.setup.pinch,r=n.disabled,i=n.excluded,a=e.isInitialized,o=t.target;return!(!(a&&!r&&o)||Ft(o,i))},qt=function(e){var t=e.setup.pinch.disabled,n=e.isInitialized,r=e.pinchStartDistance;return!!(n&&!t&&r)},Jt=function(e,t,n){var r=n.getBoundingClientRect(),i=e.touches,a=G(i[0].clientX-r.left,5),o=G(i[0].clientY-r.top,5),s=G(i[1].clientX-r.left,5),c=G(i[1].clientY-r.top,5);return{x:(a+s)/2/t,y:(o+c)/2/t}},Yt=function(e){return Math.sqrt((e.touches[0].pageX-e.touches[1].pageX)**2+(e.touches[0].pageY-e.touches[1].pageY)**2)},Xt=function(e,t){var n=e.pinchStartScale,r=e.pinchStartDistance,i=e.setup,a=i.maxScale,o=i.minScale,s=i.zoomAnimation,c=i.disablePadding,l=s.size,u=s.disabled;if(!n||r===null||!t)throw Error(`Pinch touches distance was not provided`);return t<0?e.transformState.scale:Ke(G(t/r*n,2),o,a,l,!u&&!c)},Zt=160,Qt=100,$t=function(e,t){var n=e.props,r=n.onWheelStart,i=n.onZoomStart;e.wheelStopEventTimer||(q(e),K($(e),t,r),K($(e),t,i))},en=function(e,t){var n=e.props,r=n.onWheel,i=n.onZoom,a=e.contentComponent,o=e.setup,s=e.transformState.scale,c=o.limitToBounds,l=o.centerZoomedOut,u=o.zoomAnimation,d=o.wheel,f=o.disablePadding,p=o.smooth,m=u.size,h=u.disabled,g=d.step,_=d.smoothStep;if(!a)throw Error(`Component not mounted`);t.preventDefault(),t.stopPropagation();var v=Wt(e,Ht(t,null),p?_*Math.abs(t.deltaY):g,!t.ctrlKey);if(s!==v){var y=Y(e,v),b=Ut(t,a,s),x=c&&(h||m===0||l||f),S=Ge(e,b.x,b.y,v,y,x),C=S.x,w=S.y;e.previousWheelEvent=t,e.setTransformState(v,C,w),K($(e),t,r),K($(e),t,i)}},tn=function(e,t){var n=e.props,r=n.onWheelStop,i=n.onZoomStop;It(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(ft(e,t.x,t.y),e.wheelAnimationTimer=null)},Qt),Gt(e,t)&&(It(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,K($(e),t,r),K($(e),t,i))},Zt))},nn=function(e){for(var t=0,n=0,r=0;r<2;r+=1)t+=e.touches[r].clientX,n+=e.touches[r].clientY;return{x:t/2,y:n/2}},rn=function(e,t){var n=Yt(t);e.pinchStartDistance=n,e.lastDistance=n,e.pinchStartScale=e.transformState.scale,e.isPanning=!1;var r=nn(t);e.pinchLastCenterX=r.x,e.pinchLastCenterY=r.y,q(e)},an=function(e,t){var n=e.contentComponent,r=e.pinchStartDistance,i=e.wrapperComponent,a=e.transformState.scale,o=e.setup,s=o.limitToBounds,c=o.centerZoomedOut,l=o.zoomAnimation,u=o.alignmentAnimation,d=l.disabled,f=l.size;if(!(r===null||!n)){var p=Jt(t,a,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var m=Yt(t),h=Xt(e,m),g=nn(t),_=g.x-(e.pinchLastCenterX||0),v=g.y-(e.pinchLastCenterY||0);if(!(h===a&&_===0&&v===0)){e.pinchLastCenterX=g.x,e.pinchLastCenterY=g.y;var y=Y(e,h),b=s&&(d||f===0||c),x=Ge(e,p.x,p.y,h,y,b),S=x.x,C=x.y;e.pinchMidpoint=p,e.lastDistance=m;var w=u.sizeX,T=u.sizeY,E=Z(e,w),D=Z(e,T),O=X(S+_,C+v,y,s,E,D,i),k=O.x,A=O.y;e.setTransformState(h,k,A)}}}},on=function(e){var t=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,ft(e,t?.x,t?.y)},sn=function(e,t){var n=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;It(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,K($(e),t,n)},r)},cn=function(e,t){var n=e.props,r=n.onZoomStart,i=n.onZoom,a=e.setup.doubleClick,o=a.animationTime,s=a.animationType;K($(e),t,r),xt(e,o,s,function(){return K($(e),t,i)}),sn(e,t)};function ln(e,t){return e===`toggle`?t===1?1:-1:e===`zoomOut`?-1:1}function un(e,t){var n=e.setup,r=e.doubleClickStopEventTimer,i=e.transformState,a=e.contentComponent,o=i.scale,s=e.props,c=s.onZoomStart,l=s.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,m=u.animationTime,h=u.animationType;if(!d&&!r){if(f===`reset`)return cn(e,t);if(!a)return console.error(`No ContentComponent found`);var g=yt(e,ln(f,e.transformState.scale),p);if(o!==g){K($(e),t,c);var _=Ut(t,a,o),v=dt(e,g,_.x,_.y);if(!v)return console.error(`Error during zoom event. New transformation state was not calculated.`);K($(e),t,l),J(e,v,m,h),sn(e,t)}}}var dn=function(e,t){var n=e.isInitialized,r=e.setup,i=e.wrapperComponent,a=r.doubleClick,o=a.disabled,s=a.excluded,c=t.target,l=i?.contains(c);return!(!(n&&c&&l&&!o)||Ft(c,s))},fn=function(){function e(e){var t=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){t.initializeWindowEvents()},this.unmount=function(){t.cleanupWindowEvents()},this.update=function(e){t.props=e,Y(t,t.transformState.scale),t.setup=vt(e)},this.initializeWindowEvents=function(){var e,n=Nt(),r=t.wrapperComponent?.ownerDocument,i=r?.defaultView;(e=t.wrapperComponent)==null||e.addEventListener(`wheel`,t.onWheelPanning,n),i?.addEventListener(`mousedown`,t.onPanningStart,n),i?.addEventListener(`mousemove`,t.onPanning,n),i?.addEventListener(`mouseup`,t.onPanningStop,n),r?.addEventListener(`mouseleave`,t.clearPanning,n),i?.addEventListener(`keyup`,t.setKeyUnPressed,n),i?.addEventListener(`keydown`,t.setKeyPressed,n)},this.cleanupWindowEvents=function(){var e,n=Nt(),r=t.wrapperComponent?.ownerDocument,i=r?.defaultView;i?.removeEventListener(`mousedown`,t.onPanningStart,n),i?.removeEventListener(`mousemove`,t.onPanning,n),i?.removeEventListener(`mouseup`,t.onPanningStop,n),r?.removeEventListener(`mouseleave`,t.clearPanning,n),i?.removeEventListener(`keyup`,t.setKeyUnPressed,n),i?.removeEventListener(`keydown`,t.setKeyPressed,n),document.removeEventListener(`mouseleave`,t.clearPanning,n),q(t),(e=t.observer)==null||e.disconnect()},this.handleInitializeWrapperEvents=function(e){var n=Nt();e.addEventListener(`wheel`,t.onWheelZoom,n),e.addEventListener(`dblclick`,t.onDoubleClick,n),e.addEventListener(`touchstart`,t.onTouchPanningStart,n),e.addEventListener(`touchmove`,t.onTouchPanning,n),e.addEventListener(`touchend`,t.onTouchPanningStop,n)},this.handleInitialize=function(e,n){var r=!1,i=t.setup.centerOnInit,a=function(e,t){for(var n=0,r=e;n<r.length;n++)if(r[n].target===t)return!0;return!1};t.applyTransformation(),t.onInitCallbacks.forEach(function(e){e($(t))}),t.observer=new ResizeObserver(function(o){if(a(o,e)||a(o,n))if(i&&!r){var s=n.offsetWidth,c=n.offsetHeight;(s>0||c>0)&&(r=!0,t.setCenter())}else q(t),Y(t,t.transformState.scale),ct(t,0)}),t.observer.observe(e),t.observer.observe(n)},this.onWheelZoom=function(e){t.setup.disabled||Bt(t,e)&&t.isPressingKeys(t.setup.wheel.activationKeys)&&($t(t,e),en(t,e),tn(t,e))},this.onWheelPanning=function(e){var n=t.setup,r=n.disabled,i=n.wheel,a=n.panning;if(!(!t.wrapperComponent||!t.contentComponent||r||!i.wheelDisabled||a.disabled||!a.wheelPanning||e.ctrlKey)){e.preventDefault(),e.stopPropagation();var o=t.transformState,s=o.positionX,c=o.positionY,l=s-e.deltaX,u=c-e.deltaY,d=a.lockAxisX?s:l,f=a.lockAxisY?c:u,p=t.setup.alignmentAnimation,m=p.sizeX,h=p.sizeY,g=Z(t,m),_=Z(t,h);d===s&&f===c||Qe(t,d,f,g,_)}},this.onPanningStart=function(e){var n=t.setup.disabled,r=t.props.onPanningStart;n||qe(t,e)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(e.button===0&&!t.setup.panning.allowLeftClickPan||e.button===1&&!t.setup.panning.allowMiddleClickPan||e.button===2&&!t.setup.panning.allowRightClickPan||(e.preventDefault(),e.stopPropagation(),q(t),st(t,e),K($(t),e,r)))},this.onPanning=function(e){var n=t.setup.disabled,r=t.props.onPanning;n||Je(t)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(e.preventDefault(),e.stopPropagation(),lt(t,e.clientX,e.clientY),K($(t),e,r))},this.onPanningStop=function(e){var n=t.props.onPanningStop;t.isPanning&&(ut(t),K($(t),e,n))},this.onPinchStart=function(e){var n=t.setup.disabled,r=t.props,i=r.onPinchingStart,a=r.onZoomStart;n||Kt(t,e)&&(rn(t,e),q(t),K($(t),e,i),K($(t),e,a))},this.onPinch=function(e){var n=t.setup.disabled,r=t.props,i=r.onPinching,a=r.onZoom;n||qt(t)&&(e.preventDefault(),e.stopPropagation(),an(t,e),K($(t),e,i),K($(t),e,a))},this.onPinchStop=function(e){var n=t.props,r=n.onPinchingStop,i=n.onZoomStop;t.pinchStartScale&&(on(t),K($(t),e,r),K($(t),e,i))},this.onTouchPanningStart=function(e){var n=t.setup.disabled,r=t.props.onPanningStart;if(!n&&qe(t,e)&&!(t.lastTouch&&+new Date-t.lastTouch<200&&e.touches.length===1)){t.lastTouch=+new Date,q(t);var i=e.touches,a=i.length===1,o=i.length===2;a&&(q(t),st(t,e),K($(t),e,r)),o&&t.onPinchStart(e)}},this.onTouchPanning=function(e){var n=t.setup.disabled,r=t.props.onPanning;if(t.isPanning&&e.touches.length===1){if(n||!Je(t))return;e.preventDefault(),e.stopPropagation();var i=e.touches[0];lt(t,i.clientX,i.clientY),K($(t),e,r)}else e.touches.length>1&&t.onPinch(e)},this.onTouchPanningStop=function(e){t.onPanningStop(e),t.onPinchStop(e)},this.onDoubleClick=function(e){t.setup.disabled||dn(t,e)&&un(t,e)},this.clearPanning=function(e){t.isPanning&&t.onPanningStop(e)},this.setKeyPressed=function(e){t.pressedKeys[e.key]=!0},this.setKeyUnPressed=function(e){t.pressedKeys[e.key]=!1},this.isPressingKeys=function(e){return e.length?!!e.find(function(e){return t.pressedKeys[e]}):!0},this.setTransformState=function(e,n,r){var i=t.props.onTransformed;if(!Number.isNaN(e)&&!Number.isNaN(n)&&!Number.isNaN(r)){e!==t.transformState.scale&&(t.transformState.previousScale=t.transformState.scale,t.transformState.scale=e),t.transformState.positionX=n,t.transformState.positionY=r,t.applyTransformation();var a=$(t);t.onChangeCallbacks.forEach(function(e){return e(a)}),K(a,{scale:e,positionX:n,positionY:r},i)}else console.error(`Detected NaN set state values`)},this.setCenter=function(){if(t.wrapperComponent&&t.contentComponent){var e=Rt(t.transformState.scale,t.wrapperComponent,t.contentComponent);t.setTransformState(e.scale,e.positionX,e.positionY)}},this.handleTransformStyles=function(e,n,r){return t.props.customTransform?t.props.customTransform(e,n,r):Lt(e,n,r)},this.applyTransformation=function(){if(!(!t.mounted||!t.contentComponent)){var e=t.transformState,n=e.scale,r=e.positionX,i=e.positionY,a=t.handleTransformStyles(r,i,n);t.contentComponent.style.transform=a}},this.getContext=function(){return $(t)},this.onChange=function(e){return t.onChangeCallbacks.has(e)||t.onChangeCallbacks.add(e),function(){t.onChangeCallbacks.delete(e)}},this.onInit=function(e){return t.onInitCallbacks.has(e)||t.onInitCallbacks.add(e),function(){t.onInitCallbacks.delete(e)}},this.init=function(e,n){t.cleanupWindowEvents(),t.wrapperComponent=e,t.contentComponent=n,Y(t,t.transformState.scale),t.handleInitializeWrapperEvents(e),t.handleInitialize(e,n),t.initializeWindowEvents(),t.isInitialized=!0,K($(t),void 0,t.props.onInit)},this.props=e,this.setup=vt(this.props),this.transformState=_t(this.props)}return e}(),pn=V.createContext(null),mn=function(e,t){return typeof e==`function`?e(t):e},hn=V.forwardRef(function(e,t){var n=(0,V.useRef)(new fn(e)).current,r=mn(e.children,At(n));return(0,V.useImperativeHandle)(t,function(){return At(n)},[n]),(0,V.useEffect)(function(){n.update(e)},[n,e]),V.createElement(pn.Provider,{value:n},r)});V.forwardRef(function(e,t){var n=(0,V.useRef)(null),r=(0,V.useContext)(pn);return(0,V.useEffect)(function(){return r.onChange(function(e){if(n.current){var t=0,i=0;n.current.style.transform=r.handleTransformStyles(t,i,1/e.instance.transformState.scale)}})},[r]),V.createElement(`div`,Q({},e,{ref:zt([n,t])}))});function gn(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>`u`)){var r=document.head||document.getElementsByTagName(`head`)[0],i=document.createElement(`style`);i.type=`text/css`,n===`top`&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var _n=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,vn={wrapper:`transform-component-module_wrapper__SPB86`,content:`transform-component-module_content__FBWxo`};gn(_n);var yn=function(e){var t=e.children,n=e.wrapperClass,r=n===void 0?``:n,i=e.contentClass,a=i===void 0?``:i,o=e.wrapperStyle,s=e.contentStyle,c=e.wrapperProps,l=c===void 0?{}:c,u=e.contentProps,d=u===void 0?{}:u,f=(0,V.useContext)(pn),p=f.init,m=f.cleanupWindowEvents,h=(0,V.useRef)(null),g=(0,V.useRef)(null);return(0,V.useEffect)(function(){var e=h.current,t=g.current;return e!==null&&t!==null&&p&&p?.(e,t),function(){m?.()}},[]),V.createElement(`div`,Q({},l,{ref:h,className:`${gt.wrapperClass} ${vn.wrapper} ${r}`,style:o}),V.createElement(`div`,Q({},d,{ref:g,className:`${gt.contentClass} ${vn.content} ${a}`,style:s}),t))},bn=[`images/Board/Nezekan.webp`,`images/Board/Zikel.webp`,`images/Board/Vaizel.webp`,`images/Board/Triniel.webp`,null,null],xn=V.memo(()=>{let{info:e,boardDetails:t,stats:n}=U(),{boards:c,loadBoardsForClass:l,loading:d}=_e(),m=be(),{isOpen:h,onOpen:_,onOpenChange:v}=g(),[y,b]=(0,V.useState)(null),{t:x}=F(),S=(0,V.useMemo)(()=>n?.boardStats?Object.fromEntries(n.boardStats.map(e=>[e.type,e.value])):{},[n]);(0,V.useEffect)(()=>{m&&l(m)},[m,l]);let C=e=>{b(e),_()},w=(0,V.useMemo)(()=>c.find(e=>e.id===y),[c,y]),E=(0,V.useMemo)(()=>!y||!t?null:t[`boards:${y}`],[t,y]),{currentStats:D,currentSkills:O}=(0,V.useMemo)(()=>{let e={},t={};return E&&w&&E.openNodes.forEach(n=>{let r=w.nodes.find(e=>e.id===n);r&&(r.stats&&r.stats.forEach(t=>{let n=S[t]||`0`,r=parseFloat(n);isNaN(r)||(e[t]=(e[t]||0)+r)}),r.skillId&&(t[r.skillId]=(t[r.skillId]||0)+1))}),{currentStats:Object.entries(e).map(([e,t])=>({type:e,value:(S[e]||``).includes(`%`)?`${t.toFixed(1).replace(/\.0$/,``)}%`:Math.round(t).toString(),name:x(`stats:${e}.name`,e)})).sort((e,t)=>e.name.localeCompare(t.name)),currentSkills:Object.entries(t).map(([e,t])=>{let n=parseInt(e);return{id:n,level:t,name:x(`skills:${n}.name`,n.toString())}}).sort((e,t)=>e.name.localeCompare(t.name))}},[E,w,S,x]);if(!e||!e.boards)return null;let k=(e,t)=>e.grade===`None`?`images/Board/board_icon_start_${m?.toLowerCase()}.webp`:`images/Board/board_icon_${e.grade?.toLowerCase()||`common`}${t?`_open`:``}.webp`,A=()=>{if(d||!t)return(0,H.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-20 gap-4`,children:[(0,H.jsx)(i,{"aria-label":`Loading...`,size:`md`}),(0,H.jsx)(`div`,{className:`text-default-500 text-sm`,children:x(`character:board.loading`,`正在加载星盘数据...`)})]});if(!w)return(0,H.jsx)(`div`,{className:`py-20 text-center text-default-500`,children:`未能加载守护力配置`});let e=Array.from({length:15},()=>Array(15).fill(null)),n=15,r=-1,a=15,o=-1;w.nodes.forEach(t=>{let i=t.id%1e3,s=Math.floor((i-1)/15),c=(i-1)%15;s>=0&&s<15&&c>=0&&c<15&&(e[s][c]=t,s<n&&(n=s),s>r&&(r=s),c<a&&(a=c),c>o&&(o=c))});let s=r>=0?o-a+1:15,c=r>=0?r-n+1:15,l=Math.max(s,c,1);return(0,H.jsx)(`div`,{className:`flex flex-col gap-3`,children:(0,H.jsx)(`div`,{className:`w-full max-w-[75vh] aspect-square mx-auto relative overflow-hidden rounded-lg`,children:(0,H.jsx)(hn,{initialScale:Math.min(3,15/l),minScale:1,maxScale:3,centerOnInit:!0,panning:{excluded:[`img`,`node-trigger`]},children:()=>(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(yn,{wrapperClass:`w-full h-full`,contentClass:`w-full h-full`,children:(0,H.jsx)(`div`,{className:`grid gap-1 mx-auto aspect-square w-full p-4 bg-no-repeat bg-center bg-cover shrink-0`,style:{gridTemplateColumns:`repeat(15, minmax(0, 1fr))`,backgroundImage:`url(${N(`UI/Resource/Texture/BG/UT_BG_FWindow_Daevanion.webp`)})`},children:e.map((e,t)=>e.map((e,n)=>{if(!e)return(0,H.jsx)(`div`,{className:`aspect-square`},`empty-${t}-${n}`);let r=E?.openNodes.includes(e.id),i=k(e,!!r);return(0,H.jsx)(`div`,{className:`aspect-square flex items-center justify-center relative`,children:(0,H.jsx)(B,{isDisabled:e.grade===`None`,placement:`top`,delay:100,closeDelay:0,disableAnimation:!0,content:(0,H.jsxs)(`div`,{className:`px-2 py-1`,children:[e.skillId&&(0,H.jsxs)(`div`,{className:`text-xs text-foreground flex justify-between gap-1`,children:[(0,H.jsx)(`span`,{children:x(`skills:${e.skillId}.name`,String(e.skillId))}),(0,H.jsx)(`span`,{className:`font-bold`,children:`+Lv.1`})]}),e.stats?.map((e,t)=>(0,H.jsxs)(`div`,{className:`text-xs text-foreground flex justify-between gap-1`,children:[(0,H.jsx)(`span`,{children:x(`stats:${e}.name`,e)}),(0,H.jsxs)(`span`,{className:`font-bold`,children:[`+`,S[e]||``]})]},t))]}),children:(0,H.jsx)(`div`,{className:`w-full h-full flex items-center justify-center cursor-help node-trigger`,children:(0,H.jsx)(`img`,{src:N(i),alt:e.grade,className:`w-full h-full object-contain transition-transform hover:scale-110 hover:z-50 active:scale-95 ${!r&&e.grade!==`None`?`opacity-60 grayscale-[0.5]`:``}`,draggable:!1})})})},e.id)}))})})})})})},`${y}-${h}`)};return(0,H.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,H.jsx)(`div`,{className:`grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3`,children:e.boards.map((e,t)=>(0,H.jsx)(B,{content:(0,H.jsxs)(`div`,{className:`px-1 py-1`,children:[(0,H.jsx)(`div`,{className:`font-bold text-foreground text-center`,children:e.name}),(0,H.jsxs)(`div`,{className:`text-xs text-default-800 text-center`,children:[e.openNodeCount,` / `,e.totalNodeCount]})]}),placement:`top`,radius:`sm`,delay:0,closeDelay:0,children:(0,H.jsxs)(`div`,{className:`text-center cursor-pointer outline-none focus-visible:ring-2 focus-visible:ring-primary`,tabIndex:0,onClick:()=>C(e.id),children:[(0,H.jsxs)(`div`,{className:`w-full max-w-[80px] aspect-square mx-auto rounded-lg overflow-hidden relative flex items-center justify-center`,children:[(0,H.jsx)(`img`,{src:N(`images/Board/Background.webp`),alt:``,className:`w-full h-full object-cover ${e.open===0?`grayscale opacity-50`:``}`,draggable:!1}),bn[t]&&(0,H.jsx)(`img`,{src:N(bn[t]),alt:e.name,className:`absolute inset-0 w-full h-full object-contain p-2 ${e.open===0?`grayscale opacity-50`:``}`,draggable:!1}),(0,H.jsx)(i,{"aria-label":e.name,size:`sm`,value:e.openNodeCount/e.totalNodeCount*100,color:`primary`,disableAnimation:!0,className:`absolute inset-0 z-10 p-1.5`,classNames:{svg:`w-full h-full`,indicator:`stroke-primary`,track:`stroke-transparent`}})]}),(0,H.jsxs)(`div`,{className:`text-[14px] text-default-800 truncate mt-1`,children:[Math.round(e.openNodeCount/e.totalNodeCount*100),`%`]})]})},e.id))}),(0,H.jsx)(o,{isOpen:h,onOpenChange:v,size:`3xl`,classNames:{base:`max-h-[90vh] bg-character-equipment`,body:`p-2 sm:p-6 overflow-x-hidden`},hideCloseButton:!0,children:(0,H.jsx)(T,{children:()=>(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(a,{className:`flex flex-row justify-between items-center pb-0`,children:[(0,H.jsx)(`span`,{children:e.boards.find(e=>e.id===y)?.name||`守护力`}),w&&!d&&(0,H.jsxs)(s,{placement:`bottom-end`,children:[(0,H.jsx)(u,{children:(0,H.jsx)(f,{size:`sm`,variant:`flat`,color:`primary`,className:`h-8 bg-primary/10 hover:bg-primary/20 text-primary border-none shadow-none`,children:x(`character:board.stats`,`能力值详情`)})}),(0,H.jsx)(p,{className:`bg-character-equipment border-1 border-crafting-border shadow-xl p-0`,children:(0,H.jsx)(`div`,{className:`p-3 min-w-[240px] max-w-[320px]`,children:(0,H.jsxs)(`div`,{className:`space-y-4 max-h-[75vh] overflow-y-auto no-scrollbar`,children:[D.length>0&&(0,H.jsx)(`div`,{children:(0,H.jsx)(`div`,{className:`grid grid-cols-1 gap-1`,children:D.map(e=>(0,H.jsxs)(`div`,{className:`flex justify-between text-xs border-b border-white/5 pb-1`,children:[(0,H.jsx)(`span`,{className:`text-default-700`,children:e.name}),(0,H.jsxs)(`span`,{className:`font-bold text-foreground`,children:[`+`,e.value]})]},e.type))})}),O.length>0&&(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`text-xs font-bold mb-2 text-primary`,children:`技能合计`}),(0,H.jsx)(`div`,{className:`grid grid-cols-1 gap-1`,children:O.map(e=>(0,H.jsxs)(`div`,{className:`flex justify-between text-xs border-b border-white/5 pb-1`,children:[(0,H.jsx)(`span`,{className:`text-default-700`,children:e.name}),(0,H.jsxs)(`span`,{className:`font-bold text-foreground`,children:[`+Lv.`,e.level]})]},e.id))})]}),D.length===0&&O.length===0&&(0,H.jsx)(`div`,{className:`text-center text-xs text-default-500 py-4`,children:`暂无已激活的属性`})]})})})]})]}),(0,H.jsx)(r,{children:A()})]})})})]})});function Sn(){let{info:e,loading:t,error:n,characterId:r,stats:i}=U(),{loadBoardsForClass:a}=_e(),o=be(),s=Oe();if((0,V.useEffect)(()=>{o&&a(o)},[o,a]),!r)return null;if(n)return(0,H.jsx)(`div`,{className:`grid place-items-center py-20 text-default-500`,children:(0,H.jsxs)(`div`,{className:`rounded-lg border border-default-200 bg-content2 px-6 py-3 text-sm`,children:[`Error loading character: `,n]})});if(t||!e)return(0,H.jsx)(`div`,{className:`flex justify-center items-center py-20`,children:(0,H.jsx)(D,{})});if(!i)return null;let c={base:`!bg-transparent !shadow-none !backdrop-filter-none !backdrop-blur-none pb-2 `,trigger:`py-4 min-h-0 px-2`,title:`text-[16px] leading-[16px] font-bold`,content:`py-0`,indicator:`text-default-700`},l=[{key:`equipments`,title:`装备`,component:(0,H.jsx)(je,{})},{key:`cards`,title:`阿尔卡那`,component:(0,H.jsx)(Ne,{})},{key:`stats`,title:`主要能力值`,component:(0,H.jsx)(Te,{})},{key:`boards`,title:`守护力`,component:(0,H.jsx)(xn,{})},{key:`skills`,title:`技能`,component:(0,H.jsx)(Ee,{})},{key:`titles`,title:`称号`,component:(0,H.jsx)(Fe,{})},{key:`rankings`,title:`排名`,component:(0,H.jsx)(De,{})}],u=[`stats`,`skills`,`rankings`],f=[`equipments`,`cards`,`boards`,`titles`],p=(e,t)=>(0,H.jsx)(x,{variant:`light`,selectionMode:`multiple`,defaultExpandedKeys:e.map(e=>e.key),itemClasses:c,showDivider:!1,className:t,children:e.map(e=>(0,H.jsx)(d,{title:e.title,className:`w-full`,children:e.component},e.key))});return(0,H.jsxs)(`div`,{className:`w-full space-y-4`,children:[(0,H.jsx)(Ce,{}),s?(0,H.jsx)(`div`,{children:p(l)}):(0,H.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,H.jsx)(`div`,{className:`flex flex-col`,children:p(l.filter(e=>u.includes(e.key)))}),(0,H.jsx)(`div`,{className:`flex flex-col`,children:p(l.filter(e=>f.includes(e.key)))})]})]})}function Cn(){return(0,H.jsxs)(`div`,{className:`h-full overflow-y-auto bg-chacracter-page flex flex-col`,children:[(0,H.jsxs)(`div`,{className:`max-w-6xl mx-auto px-4 py-6 space-y-4 flex-1 w-full`,children:[(0,H.jsx)(ye,{}),(0,H.jsx)(Sn,{})]}),(0,H.jsx)(ce,{})]})}var wn=()=>(0,H.jsx)(z,{children:(0,H.jsx)(se,{children:(0,H.jsx)(ge,{children:(0,H.jsx)(me,{children:(0,H.jsx)(ue,{children:(0,H.jsx)(Cn,{})})})})})});export{wn as component};